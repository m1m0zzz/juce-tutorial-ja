<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dsp/tutorial_dsp_delay_line" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã§ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ | JUCEæ—¥æœ¬èªç‰ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/juce-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/juce-social-card.jpg"><meta data-rh="true" property="og:url" content="https://m1m0zzz.github.io/juce-tutorial-ja/dsp/tutorial_dsp_delay_line/"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="keywords" content="JUCE, plugin, VST, æ—¥æœ¬èª, ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã§ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ | JUCEæ—¥æœ¬èªç‰ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"><meta data-rh="true" name="description" content="ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ãªã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…ã€‚ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ã‚¹ãƒ†ãƒ¬ã‚ªéŸ³å ´ã«è¤‡é›‘ãªã‚¨ã‚³ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½œã‚Šå‡ºã™ã€‚"><meta data-rh="true" property="og:description" content="ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ãªã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…ã€‚ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ã‚¹ãƒ†ãƒ¬ã‚ªéŸ³å ´ã«è¤‡é›‘ãªã‚¨ã‚³ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½œã‚Šå‡ºã™ã€‚"><link data-rh="true" rel="icon" href="/juce-tutorial-ja/img/juce.png"><link data-rh="true" rel="canonical" href="https://m1m0zzz.github.io/juce-tutorial-ja/dsp/tutorial_dsp_delay_line/"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/dsp/tutorial_dsp_delay_line/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/dsp/tutorial_dsp_delay_line/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1662Y26YFC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1662Y26YFC",{anonymize_ip:!0})</script><link rel="stylesheet" href="/juce-tutorial-ja/assets/css/styles.e1cde857.css">
<script src="/juce-tutorial-ja/assets/js/runtime~main.3188570e.js" defer="defer"></script>
<script src="/juce-tutorial-ja/assets/js/main.ffd66bad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ã§ã‚¹ã‚­ãƒƒãƒ—</a></div><nav aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚’é–‹ã" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/juce-tutorial-ja/"><div class="navbar__logo"><img src="/juce-tutorial-ja/img/juce.png" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/juce-tutorial-ja/img/juce.png" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JUCEæ—¥æœ¬èªç‰ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</b></a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/åˆç´š/">tag:åˆç´š</a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/ä¸­ç´š/">tag:ä¸­ç´š</a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/ä¸Šç´š/">tag:ä¸Šç´š</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹(ç¾åœ¨ã¯ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å…ˆé ­ã¸æˆ»ã‚‹" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚µã‚¤ãƒ‰ãƒãƒ¼" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/juce-tutorial-ja/">About / ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a><button aria-label="&#x27;Getting Started&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/audio/">Audio</a><button aria-label="&#x27;Audio&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/synth/">Synth</a><button aria-label="&#x27;Synth&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/midi/">MIDI</a><button aria-label="&#x27;MIDI&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/plugins/">Plugins</a><button aria-label="&#x27;Plugins&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/juce-tutorial-ja/category/dsp/">DSP</a><button aria-label="&#x27;DSP&#x27;ã®ç›®æ¬¡ã‚’éš ã™" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_dsp_introduction/">DSPå…¥é–€</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_dsp_convolution/">ã‚¦ã‚§ãƒ¼ãƒ–ã‚·ã‚§ãƒ¼ãƒ”ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹æ­ªã¿ã®è¿½åŠ </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_dsp_delay_line/">ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã§ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_simd_register_optimisation/">SIMDRegisterã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ãŸæœ€é©åŒ–</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_simple_fft/">é«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/dsp/tutorial_spectrum_analyser/">ä¿¡å·ã®å‘¨æ³¢æ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¦–è¦šåŒ–</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/graphics/">Graphics</a><button aria-label="&#x27;Graphics&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/interface-design/">Interface Design</a><button aria-label="&#x27;Interface Design&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/mobile/">Mobile</a><button aria-label="&#x27;Mobile&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/utility-classes/">Utility Classes</a><button aria-label="&#x27;Utility Classes&#x27;ã®ç›®æ¬¡ã‚’é–‹ã" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸" class="breadcrumbs__link" href="/juce-tutorial-ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/juce-tutorial-ja/category/dsp/"><span itemprop="name">DSP</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã§ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆ</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">ã“ã®ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—</button></div><div class="theme-doc-markdown markdown"><header><h1>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼šãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ</h1></header>
<p><a href="https://docs.juce.com/master/tutorial_dsp_delay_line.html">ğŸ“š Source Page</a></p>
<p>ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ãªã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…ã€‚ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ã‚¹ãƒ†ãƒ¬ã‚ªéŸ³å ´ã«è¤‡é›‘ãªã‚¨ã‚³ãƒ¼ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½œã‚Šå‡ºã™ã€‚</p>
<p>ãƒ¬ãƒ™ãƒ«ï¼šAdvanced</p>
<p>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼šWindows, macOS, Linux</p>
<p>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å½¢å¼ï¼šVST, AU, Standalone</p>
<p>ã‚¯ãƒ©ã‚¹ï¼š <a href="https://docs.juce.com/master/classdsp_1_1ProcessorChain" target="_blank" rel="noopener noreferrer" title="This variadically-templated class lets you join together any number of processor classes into a singl...">dsp::ProcessorChain</a>, <a href="https://docs.juce.com/master/classdsp_1_1Gain" target="_blank" rel="noopener noreferrer" title="Applies a gain to audio samples as single samples or AudioBlocks.">dsp::Gain</a>, <a href="https://docs.juce.com/master/classdsp_1_1Oscillator" target="_blank" rel="noopener noreferrer" title="Generates a signal based on a user-supplied function.">dsp::Oscillator</a>, <a href="https://docs.juce.com/master/classdsp_1_1Convolution" target="_blank" rel="noopener noreferrer" title="Performs stereo partitioned convolution of an input signal with an impulse response in the frequency ...">dsp::Convolution</a>, <a href="https://docs.juce.com/master/structdsp_1_1WaveShaper" target="_blank" rel="noopener noreferrer" title="Applies waveshaping to audio samples as single samples or AudioBlocks.">dsp::WaveShaper</a>, <a href="https://docs.juce.com/master/classdsp_1_1Reverb" target="_blank" rel="noopener noreferrer" title="Processor wrapper around juce::Reverb for easy integration into ProcessorChain.">dsp::Reverb</a></p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_BuS1"><p>ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€C++14ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå¿…è¦ã§ã™ã€‚Xcodeã¨Visual Studioã®æœ€è¿‘ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¯ã€ã“ã®ã‚µãƒãƒ¼ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ã¯ã˜ã‚ã‚‹">ã¯ã˜ã‚ã‚‹<a href="#ã¯ã˜ã‚ã‚‹" class="hash-link" aria-label="ã¯ã˜ã‚ã‚‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="ã¯ã˜ã‚ã‚‹ ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>This tutorial leads on from <a href="/juce-tutorial-ja/dsp/tutorial_dsp_convolution/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¦ã‚§ãƒ¼ãƒ–ã‚·ã‚§ã‚¤ãƒ”ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§æ­ªã¿ã‚’åŠ ãˆã‚‹</a>. If you haven&#x27;t done so already, you should read that tutorial first.</p>
<p>Download the demo project for this tutorial here: <a href="/juce-tutorial-ja/tutorials/PIPs/DSPDelayLineTutorial.zip/">ãƒ”ãƒƒãƒ—</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/DSPDelayLineTutorial.zip/">ã‚¸ãƒƒãƒ—</a>. Unzip the project and open the first header file in the Projucer.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_BuS1"><p>If using the PIP version of this project, please make sure to copy the <code>ãƒªã‚½ãƒ¼ã‚¹</code> folder into the generated Projucer project.</p></div></div>
<p>If you need help with this step, see <a href="/juce-tutorial-ja/dsp/tutorial_new_projucer_project/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«Projucerãƒ‘ãƒ¼ãƒˆ1ï¼šProjucerã‚’å§‹ã‚ã‚‹</a>.</p>
<h1>The demo project</h1>
<p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦æ§‹æƒ³ã•ã‚Œã¦ã„ã¾ã™ãŒã€IDEã§é©åˆ‡ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’é¸æŠã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Xcodeã§ã¯ã€ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ã‚ˆã†ã«ã€ãƒ¡ã‚¤ãƒ³ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å·¦ä¸Šã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</p>
<figure><img src="https://docs.juce.com/master/tutorial_dsp_introduction_standalone_screenshot1.png" alt="Changing the deployment target in Xcode"><figcaption><b>Changing the deployment target in Xcode</b></figcaption></figure>
<p>ãƒ‡ãƒ¢ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä¸ŠåŠåˆ†ã«MIDIã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãŒç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã€ä¸‹åŠåˆ†ã«ã¯ã‚ªã‚·ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é€šã—ã¦ä¿¡å·ãŒè¦–è¦šçš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ç¾åœ¨ã€éµç›¤ãŒæŠ¼ã•ã‚Œã‚‹ã¨ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã„ãã¤ã‹ã®ãƒªãƒãƒ¼ãƒ–ã¨ãƒ‡ã‚£ã‚¹ãƒˆãƒ¼ã‚·ãƒ§ãƒ³ã‚’åŠ ãˆãŸåŸºæœ¬çš„ãªã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ»ã‚µã‚¦ãƒ³ãƒ‰ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨è¨˜</div><div class="admonitionContent_BuS1"><p>Feel free to remove the effects to clearly hear the changes in each steps of the tutorial by commenting out the effects processors in the <code>ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¨ãƒ³ã‚¸ãƒ³</code> class.</p></div></div>
<figure><img src="https://docs.juce.com/master/tutorial_dsp_introduction_screenshot1.png" alt="The demo project plugin window"><figcaption><b>The demo project plugin window</b></figcaption></figure>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨è¨˜</div><div class="admonitionContent_BuS1"><p>MIDIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ãŠæŒã¡ã®å ´åˆã¯ã€ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¸­ã€ç”»é¢ä¸Šã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ä½¿ã†ä»£ã‚ã‚Šã«ã€MIDIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æ¥ç¶šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p></div></div>
<h1>Introduction</h1>
<p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ç•°ãªã‚‹æ–¹æ³•ã§ä¿¡å·å‡¦ç†ã‚’å¯èƒ½ã«ã™ã‚‹2ã¤ã®æ–°ã—ã„DSPã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ç´¹ä»‹ã—ã¾ã™ï¼šãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã¨ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ»ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã§ã™ã€‚</p>
<p>ã“ã®DSPç”¨èªã®å®šç¾©ã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-delay-line">What is a Delay Line?<a href="#what-is-a-delay-line" class="hash-link" aria-label="What is a Delay Line? ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="What is a Delay Line? ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã¯ã€æ®‹éŸ¿ç©ºé–“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚µã‚¦ãƒ³ãƒ‰ãƒ»ã‚·ãƒ³ã‚»ã‚·ã‚¹ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®å®Ÿè£…ã€ãƒ‡ã‚£ãƒ¬ã‚¤ã€ã‚³ãƒ¼ãƒ©ã‚¹ã€ãƒ•ã‚§ã‚¤ã‚¶ãƒ¼ã€ãƒ•ãƒ©ãƒ³ã‚¸ãƒ£ãƒ¼ãªã©ã®å¤å…¸çš„ãªã‚¿ã‚¤ãƒ ãƒ™ãƒ¼ã‚¹ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãªã©ã€å¹…åºƒã„ç”¨é€”ã«ä½¿ç”¨ã§ãã‚‹DSPã®åŸºæœ¬ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</p>
<p>åŸºæœ¬çš„ã«ã€ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ã‚ã‚‹ä¿¡å·ã‚’ã‚µãƒ³ãƒ—ãƒ«æ•°ã ã‘é…ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¤‡æ•°ã®ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’ä½¿ã„ã€åˆ¥ã€…ã®ä¿¡å·ã‚’ç•°ãªã‚‹é–“éš”ã§åˆè¨ˆã™ã‚‹ã“ã¨ã§ã€ãƒ‡ã‚¸ã‚¿ãƒ«ä¿¡å·å‡¦ç†ã®å¤§éƒ¨åˆ†ã‚’ä½œã‚Šå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã‚¢ãƒŠãƒ­ã‚°é ˜åŸŸã§ã¯ã€é…å»¶ç·šã¯ã€æ³¢ã®ä¼æ¬ã‚’é…å»¶ã•ã›ã‚‹ãŸã‚ã«ã€ãƒãƒã®ã‚ˆã†ãªå®Ÿéš›ã®ç‰©ç†çš„ãªæ‹¡å¼µã‚’å°å…¥ã™ã‚‹ã“ã¨ã§å®Ÿè£…ã•ã‚Œã¦ã„ãŸã€‚ãƒ‡ã‚¸ã‚¿ãƒ«é ˜åŸŸã§ã¯ã€é…å»¶ç·šã¯å¤šãã®å ´åˆã€ã‚µãƒ¼ã‚­ãƒ¥ãƒ©ãƒ¼ãƒ»ãƒãƒƒãƒ•ã‚¡ã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½¿ã£ã¦å®Ÿè£…ã•ã‚Œã‚‹ã€‚</p>
<p>ã‚µãƒ¼ã‚­ãƒ¥ãƒ©ãƒ¼ãƒ»ãƒãƒƒãƒ•ã‚¡ã¯ã€åŸºæœ¬çš„ã«ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ»ãƒãƒƒãƒ•ã‚¡ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚µã‚¤ã‚ºã«ä¸€è‡´ã™ã‚‹ã‚µãƒ¼ã‚­ãƒ¥ãƒ©ãƒ¼ãƒ»ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒãã‚Œè‡ªèº«ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹é…åˆ—ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‰ã®ãƒ–ãƒ­ãƒƒã‚¯ã«å«ã¾ã‚Œã‚‹ã™ã¹ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ç¾åœ¨ã®ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ä¿å­˜ã—ã€æ¬¡ã®åå¾©ã®ãŸã‚ã«ç¾åœ¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚ˆã£ã¦ä¸Šæ›¸ãã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ã‚µãƒ¼ã‚­ãƒ¥ãƒ©ãƒ¼ãƒ»ãƒãƒƒãƒ•ã‚¡ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-physical-modelling">What is Physical Modelling?<a href="#what-is-physical-modelling" class="hash-link" aria-label="What is Physical Modelling? ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="What is Physical Modelling? ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h2>
<p>ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ»ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã¯ã€ã‚µã‚¦ãƒ³ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«æ•°å­¦çš„ãŠã‚ˆã³ç‰©ç†çš„ãƒ¢ãƒ‡ãƒ«ã«ä¾å­˜ã™ã‚‹ã‚µã‚¦ãƒ³ãƒ‰åˆæˆæ‰‹æ³•ã‚’ç¤ºã™ã€‚ä»–ã®åˆæˆæ‰‹æ³•ã¨ã¯ç•°ãªã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ã‚’å‡ºç™ºç‚¹ã¨ã—ã¦ä½¿ç”¨ã›ãšã€ç´ æã®ç ”ç©¶ã‚’é€šã˜ã¦ç‰©ç†çš„ãªæ„å‘³ã§éŸ³ãŒã©ã®ã‚ˆã†ã«ç”Ÿæˆã•ã‚Œã‚‹ã‹ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã€‚</p>
<p>ãã®ã²ã¨ã¤ãŒãƒ‡ã‚¸ã‚¿ãƒ«å°æ³¢ç®¡ã¨å‘¼ã°ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã€éŸ³éŸ¿æ³¢ãŒç®¡ã‚„ãƒ‘ã‚¤ãƒ—ã®ä¸­ã‚’ä¼æ¬ã™ã‚‹ç‰©ç†ãƒ¢ãƒ‡ãƒ«ã«åŸºã¥ã„ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã®æ³¢ã®å¢ƒç•Œã«å¯¾ã™ã‚‹åå°„ã¯ã€é…å»¶ç·šã‚’ç”¨ã„ã¦åŠ¹ç‡çš„ã«è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦å¼¦æ¥½å™¨ãªã©ã®å¤šãã®æ¥½å™¨ã®éŸ³ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-waveguide-string-model">The waveguide string model<a href="#the-waveguide-string-model" class="hash-link" aria-label="The waveguide string model ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯" title="The waveguide string model ã¸ã®ç›´æ¥ãƒªãƒ³ã‚¯">â€‹</a></h3>
<p>ä¸€è¨€ã§è¨€ãˆã°ã€å°æ³¢ç®¡ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã¯ã€æŒ¯å‹•ã™ã‚‹ã‚¹ãƒˆãƒªãƒ³ã‚°ã¯ã€åå¯¾æ–¹å‘ã«é€²ã¿ã€2ã¤ã®ç«¯ç‚¹ã§è·³ã­è¿”ã‚‹2ã¤ã®æ³¢ã‚’ä½¿ã£ã¦ãƒ¢ãƒ‡ãƒ«åŒ–ã§ãã‚‹ã¨ã„ã†æ¦‚å¿µã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚ã“ã®2ã¤ã®æ³¢ã®çµ„ã¿åˆã‚ã›ã¯ã€æœ€çµ‚çš„ã«å¼¦ã‚’å¼¾ã„ãŸã¨ãã®ç†æƒ³çš„ãªå‹•ãã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã€2ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ï¼ˆå‰æ–¹ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã¨å¾Œæ–¹ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ï¼‰ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã—ã‹ã—ã€ã“ã®ç†æƒ³çš„ãªå¼¦ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€æ¸›è¡°ãŒè€ƒæ…®ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ç¾åœ¨ã®çŠ¶æ…‹ã§é™æ­¢ã™ã‚‹ã“ã¨ã¯ãªã„ã€‚ã—ãŸãŒã£ã¦ã€æ³¢ãŒå¢ƒç•Œã§æ–¹å‘ã‚’å¤‰ãˆã€ ãã®æ¥µæ€§ãŒåè»¢ã™ã‚‹ã¨ãã€æ³¢ã®å¤‰ä½ã‚’æ¸›ã‚‰ã™ãŸã‚ã«æ¸›è¡°ä¿‚æ•°ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<p>ã“ã®ãƒ¢ãƒ‡ãƒ«ã§è€ƒæ…®ã™ã¹ãä»–ã®å¤‰æ•°ã¯ã€å¼¦ã‚’ã¯ã˜ãä½ç½®ã¨ã€å¼¦ãŒæŒ¯å‹•ã™ã‚‹éŸ³ã‚’æ‹¾ã†ä½ç½®ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç©ºé–“ä¸Šã®ç‰¹å®šã®å ´æ‰€ã‹ã‚‰éŸ³ã‚’è´ãã®ã¨åŒã˜ã‚ˆã†ã«ã€2ã¤ã®æ³¢ãŒä¼æ’­ã™ã‚‹å¼¾ãä½ç½®ã¨æ‹¾ã†ä½ç½®ã‚’çµ±åˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p>
<p>æœ€å¾Œã«ãªã‚‹ãŒã€ç‰©ç†çš„ãªå¼¦ã§èµ·ã“ã‚‹è‡ªç„¶ç¾è±¡ã«ã€é«˜ã„å‘¨æ³¢æ•°ã®æ¸›è¡°ãŒä½ã„å‘¨æ³¢æ•°ã‚ˆã‚Šé€Ÿã„ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€‚ã“ã‚Œã¯ã€å¢ƒç•Œã®ä¸€ç«¯ã«ãƒ­ãƒ¼ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã€ã“ã®æ¸›è¡°æ™‚é–“ã®ä¸ä¸€è‡´ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã€æˆ‘ã€…ã®ãƒ¢ãƒ‡ãƒ«ã«ç°¡å˜ã«çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã“ã®ãƒ‡ã‚¸ã‚¿ãƒ«å°æ³¢ç®¡ãƒ¢ãƒ‡ãƒ«ã‚’å®Ÿè£…ã—ã€å¼¦ã‚’å¼¾ã„ãŸã¨ãã«å¼¦ã®å¢ƒç•Œã§åå°„ã™ã‚‹æ³¢ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
<h1>Implement a delay line</h1>
<p>ã¾ãšã€å˜ç´”ãªãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’ãƒ™ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã£ã¦å††å½¢ãƒãƒƒãƒ•ã‚¡ã¨ã—ã¦å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ã€‚</p>
<p>In the <code>ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³</code> class, there are a couple of self-explanatory helper functions already defined to facilitate the implementation such as <code>ã‚µã‚¤ã‚º</code> and <code>ãƒªã‚µã‚¤ã‚º()</code> methods, a <code>ã‚¯ãƒªã‚¢</code> function and a <code>ãƒãƒƒã‚¯()</code> function that retrieves the least recent sample in the buffer.</p>
<p>We first implement the <code>ãƒ—ãƒƒã‚·ãƒ¥</code> function which adds a new sample by overwriting the least recently added sample [1] and updates the least recent index variable by wrapping the index by the size of the circular buffer [2]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void push (Type valueToAdd) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rawData[leastRecentIndex] = valueToAdd; // [1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        leastRecentIndex = leastRecentIndex == 0 ? size() - 1 : leastRecentIndex - 1; // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then we complete the <code>ã‚²ãƒƒãƒˆ</code> function by returning the sample located at an offset specified by the function argument while making sure that the index wraps around the vector [3]. Notice here that we make sure the delay does not exceed the size of the buffer.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">å‹ get (size_t delayInSamples) const noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (delayInSamples &gt;= 0 &amp;&amp; delayInSamples &lt; size())ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rawData[(leastRecentIndex + 1 + delayInSamples) % size()]; // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we fill in the <code>set()</code> function by assigning the sample at an offset specified by the function argument while making sure that the index wraps around the vector [4]. Here again, we make sure the delay does not exceed the size of the buffer.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void set (size_t delayInSamples, Type newValue) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (delayInSamples &gt;= 0 &amp;&amp; delayInSamples &lt; size())ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rawData[(leastRecentIndex + 1 + delayInSamples) % size()] = newValue; // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ã“ã‚Œã§ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã®å®Ÿè£…ã¯å®Œäº†ã ã€‚</p>
<h1>Incorporate a delay effect</h1>
<p>åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ãƒ»ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ãŸã®ã§ã€ã‚·ã‚°ãƒŠãƒ«ãƒ»ãƒã‚§ã‚¤ãƒ³ã«ã‚¹ãƒ†ãƒ¬ã‚ªãƒ»ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’çµ„ã¿è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>In the <code>é…å»¶</code> class, there are multiple parameters that can be tweaked to change the behaviour of our delay effect and these include delay times for individual channels, the maximum delay time allowed, the dry/wet level of the effect and the amount of feedback.</p>
<p>ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã®å®Ÿè£…ã‚’ä½¿ãˆã°ã€ã•ã¾ã–ã¾ãªãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æ€ã„é€šã‚Šã«ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ãŒã€ã¾ãšã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§å®šç¾©ã•ã‚Œ  ã¦ã„ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰è¦‹ã¦ã„ã“ã†ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ã‚’å…¬é–‹ã—ã¾ã™ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ãƒ‡ã‚£ãƒ¬ã‚¤()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setMaxDelayTime (2.0f)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setDelayTime (0, 0.7f)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setDelayTime (1, 0.5f)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setWetLevel (0.8f)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setFeedback (0.5f)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ã“ã‚Œã‚‰ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¯ã€ä¸»ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã«å¯¾å¿œã™ã‚‹ãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ãŒã€ä¸­ã«ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å¤‰æ›´ã«å¯¾å¿œã™ã‚‹ãŸã‚ã«ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ãƒªã‚µã‚¤ã‚ºã‚’å¿…è¦ã¨ã™ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<p>One such case is the <code>setMaxDelayTime()</code> function defined below which calls the <code>updateDelayLineSize()</code> helper function [1]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void setMaxDelayTime (Type newValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (newValue &gt; Type (0))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxDelayTime = newValueï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        updateDelayLineSize(); // [1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Complete the following function which ensures that the circular buffers of all the delay lines are large enough to accomodate any delay time up to the max delay time by resizing the vectors [2]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void updateDelayLineSize()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto delayLineSizeSamples = (size_t) std::ceil (maxDelayTime * sampleRate)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto&amp; dline : delayLines)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dline.resize (delayLineSizeSamples); // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Another noteworthy case is in the <code>setDelayTime()</code> function of individual channels where a parameter change causes a call to the <code>updateDelayTime()</code> helper function [3] as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void setDelayTime (size_t channel, Type newValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (channel &gt;= getNumChannels())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            jassertfalseï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ã‚’è¿”ã—ã¾ã™ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (newValue &gt;= Type (0))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delayTimes[channel] = newValueï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        updateDelayTime(); // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Implement this helper function that recalculates the delay times in samples for all the channels based on the new parameter change [4]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void updateDelayTime() noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t ch = 0; ch &lt; maxNumChannels; ++ch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delayTimesSample[ch] = (size_t) juce::roundToInt (delayTimes[ch] * sampleRate)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒª  ãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>ãƒªã‚»ãƒƒãƒˆ</code> function, we reset the filters for each channel [5] which we will use in the next section of the tutorial and clear any old sample remaining in the delay lines [6]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void reset() noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto&amp; f : filters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            f.reset(); // [5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto&amp; dline : delayLines)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dline.clear(); // [6].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>prepare()</code> function, we make sure that the size of the delay lines [7] and the delay times in samples [8] are still correct in case the sample rate was changed between sample blocks and initialise the filters with a low-pass filter for now [9]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void prepare (const juce::dsp::ProcessSpec&amp; spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jassert (spec.numChannels &lt;= maxNumChannels);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sampleRate = (Type) spec.sampleRate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateDelayLineSize(); // [7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateDelayTime();     // [8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filterCoefs = juce::dsp::IIR::Coefficients::makeFirstOrderLowPass (sampleRate, Type (1e3)); // [9].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (auto&amp; f : filters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.prepare (spec)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.coefficients = filterCoefsï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jassert#definejassert(expression)ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¯ãƒ­å®šç¾© juce_PlatformDefs.h:165</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now let&#x27;s deal with the <code>ãƒ—ãƒ­ã‚»ã‚¹()</code> function to actually implement the delay effect:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template void process (const ProcessContext&amp; context) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto&amp; inputBlock = context.getInputBlock()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto&amp; outputBlock = context.getOutputBlock()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto numSamples = outputBlock.getNumSamples()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto numChannels = outputBlock.getNumChannels()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jassert (inputBlock.getNumSamples() == numSamples)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jassert (inputBlock.getNumChannels() == numChannels)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (size_t ch = 0; ch &lt; numChannels; ++ch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto* input = inputBlock .getChannelPointer (ch)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto* output = outputBlock.getChannelPointer (ch)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto&amp; dline = delayLines[ch]ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto delayTime = delayTimesSample[ch]ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto&amp; filter = filters[ch]ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t i = 0; i &lt; numSamples; ++i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto delayedSample = dline.get (delayTime); // [10].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto inputSample = input[i]; // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto dlineInputSample = std::tanh (inputSample + feedback * delayedSample); // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dline.push (dlineInputSample); // [13].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto outputSample = inputSample + wetLevel * delayedSample; // [14].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output[i] = outputSample; // [15].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[10]: First, for each sample in the buffer block of each channel, retrieve the delayed sample from the corresponding delay line.</li>
<li>[11]: Then get the current sample from the input block.</li>
<li>[12]: Next, calculate the sample to be pushed into the delay line by mixing the input sample with the delay line output weighted with the feedback parameter using <code>æ¨™æº–::tanh()</code>. The hyperbolic tangent function allows us to smoothly combine the two signals without clipping the summed sample and provides a natural decay.</li>
<li>[13]: We then push the sample calculated in the previous step into the delay line.</li>
<li>[14]: Finally, calculate the output sample by mixing the input sample with the delay line output weighted with the dry/wet parameter.</li>
<li>[15]: Then assign the sample to the output block.</li>
</ul>
<p>If we run this code after implementing the above changes in the <code>é…å»¶</code> class, we should be able to hear the delay effect on the oscillator signal.</p>
<figure><img src="https://docs.juce.com/master/tutorial_dsp_delay_line_screenshot1.png" alt="Delaying the oscillator signal"><figcaption><b>Delaying the oscillator signal</b></figcaption></figure>
<p>æ§˜ã€…ãªãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è©¦ã—ã€ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚¹ãƒ†ãƒ¬ã‚ªãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å†…ã§ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚</p>
<h1>Filter the delay effect</h1>
<p>ã»ã¨ã‚“ã©ã®ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã€è‡ªç„¶ç•Œã§ç™ºç”Ÿã™ã‚‹ã‚ˆã†ãªã€ã‚ˆã‚Šãƒªã‚¢ãƒ«ãªã‚µã‚¦ãƒ³ãƒ‰ã‚’æä¾›  ã™ã‚‹ãŸã‚ã«ã€ä¿¡å·ãŒç¹°ã‚Šè¿”ã—æ¸›è¡°ã™ã‚‹éš›ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’çµ„ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚ãã‚Œã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ã‚µã‚¦ãƒ³ãƒ‰ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‹ã‘ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<p>This can be achieved very easily by simply changing one line in the <code>ãƒ—ãƒ­ã‚»ã‚¹()</code> function of the <code>é…å»¶</code> class as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template void process (const ProcessContext&amp; context) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (size_t ch = 0; ch &lt; numChannels; ++ch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t i = 0; i &lt; numSamples; ++i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto delayedSample = filter.processSample (dline.get (delayTime)); // [1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto inputSample = input[i]ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto dlineInputSample = std::tanh (inputSample + feedback * delayedSample)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dline.push (dlineInputSample)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto outputSample = inputSample + wetLevel * delayedSampleï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            output[i] = outputSampleï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we simply call the <code>processSample()</code> function on the filter object by passing the delayed sample from the delay line [1].</p>
<p>Change the filter type to a high-pass filter in the <code>prepare()</code> function by swapping the coefficients and calling the <code>makeFirstOrderHighPass()</code> function [2] as shown here:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void prepare (const juce::dsp::ProcessSpec&amp; spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filterCoefs = juce::dsp::IIR::Coefficients::makeFirstOrderHighPass (sampleRate, Type (1e3)); // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒªãƒ”ãƒ¼ãƒˆå›æ•°ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦ã€ã‚ˆã‚Šæ˜ã‚‹ã„é…å»¶éŸ³ãŒå¾—ã‚‰ã‚Œã‚‹ã¯ãšã ã€‚</p>
<figure><img src="https://docs.juce.com/master/tutorial_dsp_delay_line_screenshot2.png" alt="Filtering the delayed signal"><figcaption><b>Filtering the delayed signal</b></figcaption></figure>
<p>æ§˜ã€…ãªç¨®é¡ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ã£ã¦é…å»¶éŸ³ã‚’å‡¦ç†ã—ã€ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ä¿¡å·ã®éŸ³ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’è©¦ã—ã¦ã¿ ã¦ãã ã•ã„ã€‚</p>
<h1>Integrate a waveguide string model</h1>
<p>é…å»¶åŠ¹æœã®ãŸã‚ã«ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’éƒ½åˆã‚ˆãå®Ÿè£…ã—ãŸã®ã§ã€åŒã˜ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ã¦å°æ³¢ç®¡ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’çµ±åˆã™ã‚‹ãŸã‚ã«åŒã˜ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<p>In the <code>å°æ³¢ç®¡æ–‡å­—åˆ—</code> class, there are multiple parameters that can be tweaked to change the behaviour of our string model and these include the trigger position, the pickup position and the decay time for the damping of the strings.</p>
<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§å®šç¾©ã•ã‚Œã€ãã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã¯å¯¾å¿œã™ã‚‹ãƒ¡ãƒ³ãƒãƒ¼å¤‰æ•°ã‚’æ¬¡ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ã‚’å…¬é–‹ã—ã¾ã™ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å°æ³¢ç®¡æ–‡å­—åˆ—()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setTriggerPosition(Type (0.2))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setPickupPosition (Type (0.8))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setDecayTime (Type (0.5))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These helper functions also call the <code>updateParameters()</code> function which initialises various variables such as the size of the delay lines, the pickup indices relative to the delay lines, the trigger index relative to the forward delay line and the filter coefficients as well as the decay coefficient based on the decay time.</p>
<p>ä»¥ä¸‹ã«èª¬æ˜ã™ã‚‹ã‚ˆã†ã«ã€ã“ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®å®Ÿè£…ã‚’è¿½åŠ ã™ã‚‹ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void updateParameters()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auto length = (size_t) juce::roundToInt (sampleRateHz / freqHz); // [1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    forwardDelayLine .resize (length);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backwardDelayLine.resize (length);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    forwardPickupIndex  = (size_t) juce::roundToInt (jmap (pickupPos, Type (0), Type (length / 2 - 1)));            // [2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    backwardPickupIndex = length - 1 - forwardPickupIndex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    forwardTriggerIndex = (size_t) juce::roundToInt (jmap (triggerPos, Type (0), Type (length / 2 - 1)));           // [3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    filter.coefficients = juce::dsp::IIR::Coefficients::makeFirstOrderLowPass (sampleRateHz, 4 * freqHz); // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    decayCoef = juce::jmap (decayTime, std::pow (Type (0.999), Type (length)), std::pow (Type (0.99999), Type (length))); // [5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reset()ã‚’å®Ÿè¡Œã™ã‚‹ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jmapconstexpr Type jmap(Type value0To1, Type targetRangeMin, Type targetRangeMax)æ­£è¦åŒ–ã•ã‚ŒãŸå€¤(0ã‹ã‚‰1ã®é–“)ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¯„å›²ã«ãƒªãƒãƒƒãƒ—ã™ã‚‹ã€‚å®šç¾© juce_MathsFunctions.h:369</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[1]: First, we resize the delay lines to the sample rate over the fundamental frequency of the note played. This is taken from the fact that the fundamental frequency is equal to the sampling frequency over the number of samples needed in the loop.</li>
<li>[2]: Next, we retrieve the index of the pickup position on the forward delay line by mapping the variable in the range of 0.0 .. 1.0 to the range of 0 to half of the delay line length. This is to accomodate the full cycle which includes the two directions of the travelling wave with the polarity flipping. The index of the pickup position on the backward delay line is calculated by simply taking the inverse of the forward index.</li>
<li>[3]: The index of the trigger position on the forward delay line is mapped in the same way from the range of 0.0 .. 1.0 to the range of 0 to half of the delay line length.</li>
<li>[4]: Then the coefficients of the low-pass filter that simulates the decay behaviour are set at a frequency that is four times higher than its fundamental.</li>
<li>[5]: Finally, the decay coefficient is calculated from the decay time by mapping from the range of 0.0 .. 1.0 to the range of 0.999^é•·ã• to 0.99999^é•·ã•. This produces values close to 1 which depicts the very little damping that actually happens on physical vibrating strings.</li>
</ul>
<p>In the <code>ãƒªã‚»ãƒƒãƒˆ</code> function, we reset the delay lines to clear any old sample remaining:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void reset() noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        forwardDelayLine .clear()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backwardDelayLine.clear()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>prepare()</code> function, we create a temporary audio block that will be used later for processing [6] and make sure that the parameters are still correct in case the sample rate was changed between sample blocks by calling the <code>updateParameters()</code> function again [7]:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void prepare (const juce::dsp::ProcessSpec&amp; spec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sampleRateHz = (Type) spec.sampleRate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tempBlock = juce::dsp::AudioBlock(heapBlock, spec.numChannels, spec.maximumBlockSize); // [6].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        filter.prepare (spec)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        updateParameters(); // [7].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ’¥å¼¦ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã‚‹å¼¦ã®åŠ±æŒ¯ã‚’å¼•ãèµ·ã“ã™ã«ã¯ã€2æœ¬ã®é…å»¶ç·šã«ã‚ˆã£ã¦è¡¨ã•ã‚Œã‚‹ä¸¡æ–¹ã®æ³¢ã®åˆæœŸå¤‰ä½ã‚’è¨­å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p>
<p>To do this in the <code>ãƒˆãƒªã‚¬ãƒ¼()</code> function, iterate first between the samples contained from the start of the delay line to the index of the trigger position, calculate the values for each sample by mapping the indices to ascending values reaching half of the note velocity and assigning these to the delay lines in opposite directions [8]. Do the same for the samples contained between the index of the trigger position to the end of the delay line with descending values from half of the note velocity [9].</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void trigger (Type velocity) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (velocity &gt;= Type (0) &amp;&amp; velocity &lt;= Type (1))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t i = 0; i &lt;= forwardTriggerIndex; ++i) // [8].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto value = juce::jmap (Type (i), Type (0), Type (forwardTriggerIndex), Type (0), velocity / 2)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            forwardDelayLine .set (i, value)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            backwardDelayLine.set (getDelayLineLength() - 1 - i, value)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t i = forwardTriggerIndex; i &lt; getDelayLineLength(); ++i) // [9].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto value = juce::jmap (Type (i), Type (forwardTriggerIndex), Type (getDelayLineLength() - 1), velocity / 2, Type (0))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            forwardDelayLine .set (i, value)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            backwardDelayLine.set (getDelayLineLength() - 1 - i, value)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ãƒãƒƒãƒ•ã‚¡ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã™ã¹ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã€ã‚µãƒ³ãƒ—ãƒ«ç”Ÿæˆã®1åå¾©ã®ã¿ã‚’è¿”ã™ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®£è¨€ã™ã‚‹ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ã‚¿ã‚¤ãƒ— processSample() noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto forwardOut = forwardDelayLine .back(); // [10].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto backwardOut = backwardDelayLine.back(); // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        forwardDelayLine .push (-backwardOut); // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backwardDelayLine.push (-decayCoef * filter.processSample (forwardOut)); // [13].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return forwardDelayLine.get (forwardPickupIndex) + backwardDelayLine.get (backwardPickupIndex); // [14].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[10]: First, we retrieve the least recent sample from the circular buffer of the forward delay line by calling the <code>ãƒãƒƒã‚¯()</code> function declared earlier.</li>
<li>[11]: We do the same for the least recent sample of the backward delay line.</li>
<li>[12]: Next, we have to push this last sample located at the boundary of the backward delay line into the forward delay line by inverting the polarity.</li>
<li>[13]: Then, we do the same for the other delay line but this time instead we filter the sample with the low-pass filter and multiply by the decay coefficient to apply dampening before inverting the polarity and pushing the sample into the circular buffer.</li>
<li>[14]: Finally, we return the recorded sample from the pickup location by summing the signal from both delay lines at their respective pickup indices.</li>
</ul>
<p>In the <code>ãƒ—ãƒ­ã‚»ã‚¹()</code> function, simply process all the samples in the buffer block by calling the <code>processSample()</code> helper function and assigning the values to the temporary block created earlier [15]. Then copy the samples to all channels in the audio block [16] and add the content of the temporary block into the output block along with the original content contained in the input block [17].</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    template void process (const ProcessContext&amp; context) noexcept</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto&amp;&amp; outBlock = context.getOutputBlock()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto numSamples = outBlock.getNumSamples()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto* dst = tempBlock.getChannelPointer (0)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t i = 0; i &lt; numSamples; ++i) // [15].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dst[i] = processSample()ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (size_t ch = 1; ch &lt; tempBlock.getNumChannels(); ++ch) // [16].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            juce::FloatVectorOperations::copy (tempBlock.getChannelPointer (ch)ã€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               tempBlock.getChannelPointer (0)ã€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               (int) numSamples)ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        outBlock.copyFrom (context.getInputBlock()).add (tempBlock.getSubBlock (0, outBlock.getNumSamples()))ï¼›</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>å£°</code> class, add a <code>å°æ³¢ç®¡æ–‡å­—åˆ—</code> processor to the processor chain [18] and add its corresponding index in the enum [19].</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oscIndex,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stringIndex,        // [19]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        masterGainIndex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::dsp::ProcessorChain, WaveguideString, juce::dsp::Gain&gt; processorChain; // [18].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>noteStarted()</code> function, remove the line that sets the level of the oscillator as we will be using the waveguide string model to generate sounds. Retrieve a reference to the string model from the processor chain [20], set the fundamental frequency of the string to the frequency of the note played [21] and trigger the plucking by calling the <code>ãƒˆãƒªã‚¬ãƒ¼()</code> function with the note velocity [22].</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void noteStarted() override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto velocity = getCurrentlyPlayingNote().noteOnVelocity.asUnsignedFloat();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto freqHz = (float) getCurrentlyPlayingNote().getFrequencyInHertz();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        processorChain.get().setFrequency (freqHz, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //processorChain.get().setLevel (velocity);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto&amp; stringModel = processorChain.get(); // [20]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stringModel.setFrequency (freqHz); // [21].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stringModel.trigger (velocity); // [22].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼" title="ã‚³ãƒ”ãƒ¼" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ã€ã©ã®ã‚ˆã†ã«èã“ãˆã‚‹ã‹è¦‹ã¦ã¿ã‚ˆã†ã€‚</p>
<figure><img src="https://docs.juce.com/master/tutorial_dsp_delay_line_screenshot3.png" alt="Delaying the waveguide string signal"><figcaption><b>Delaying the waveguide string signal</b></figcaption></figure>
<p>ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ãƒˆãƒªã‚¬ãƒ¼ã®ä½ç½®ã‚„ãƒ‡ã‚£ã‚±ã‚¤ãƒ»ã‚¿ã‚¤ãƒ ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®ç¨®é¡ãªã©ã€ã•ã¾ã–ã¾ãªå°æ³¢ç®¡ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è©¦ã—ã€ç”Ÿæˆã•ã‚Œã‚‹ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ã‚µã‚¦ãƒ³ãƒ‰ã«ã©ã®ã‚ˆã†ãªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã‹ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨è¨˜</div><div class="admonitionContent_BuS1"><p>The source code for this modified version of the code can be found in the <code>DSPDelayLineTutorial_02.h</code> file of the demo project.</p></div></div>
<h1>æ¦‚è¦</h1>
<p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ»ãƒ¢ãƒ‡ãƒ«ã¨é…å»¶ç·šã®å®Ÿè£…æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚ç‰¹ã«</p>
<ul>
<li>ãƒ•ã‚£ã‚¸ã‚«ãƒ«ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã¨ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã®åŸºç¤ã‚’å­¦ã¶ã€‚</li>
<li>ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¿ã‚¤ãƒ ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ©ã‚¤ãƒ³ã‚’å®Ÿè£…ã€‚</li>
<li>ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ»ãƒ©ã‚¤ãƒ³ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ã‚¹ãƒ†ãƒ¬ã‚ªã§é¢ç™½ã„ãƒ‡ã‚£ãƒ¬ã‚¤åŠ¹æœã‚’ç”Ÿã¿å‡ºã™ã€‚</li>
<li>ç‰©ç†ãƒ¢ãƒ‡ãƒªãƒ³ã‚°æŠ€è¡“ã«åŸºã¥ãå°æ³¢ç®¡ã‚¹ãƒˆãƒªãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã‚’çµ±åˆã€‚</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>æ³¨è¨˜</div><div class="admonitionContent_BuS1"><p>Return to part 1 of this tutorial to brush up on oscillators and filters here: <a href="/juce-tutorial-ja/dsp/tutorial_dsp_introduction/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«DSPå…¥é–€</a></p><p>Jump back to part 2 of this tutorial to understand distortion and convolution here: <a href="/juce-tutorial-ja/dsp/tutorial_dsp_convolution/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¦ã‚§ãƒ¼ãƒ–ã‚·ã‚§ã‚¤ãƒ”ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§æ­ªã¿ã‚’åŠ ãˆã‚‹</a></p></div></div>
<h1>é–¢é€£é …ç›®</h1>
<ul>
<li><a href="/juce-tutorial-ja/dsp/tutorial_simple_fft/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›</a></li>
<li><a href="/juce-tutorial-ja/dsp/tutorial_spectrum_analyser/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¿¡å·ã®å‘¨æ³¢æ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¯è¦–åŒ–ã™ã‚‹</a></li>
<li><a href="/juce-tutorial-ja/dsp/tutorial_simd_register_optimisation/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«SIMDRegisterã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ãŸæœ€é©åŒ–</a></li>
<li><a href="/juce-tutorial-ja/dsp/tutorial_dsp_introduction/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«DSPå…¥é–€</a></li>
<li><a href="/juce-tutorial-ja/dsp/tutorial_dsp_convolution/">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¦ã‚§ãƒ¼ãƒ–ã‚·ã‚§ã‚¤ãƒ”ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§æ­ªã¿ã‚’åŠ ãˆã‚‹</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>ã‚¿ã‚°:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/juce-tutorial-ja/tags/ä¸Šç´š/">ä¸Šç´š</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/dsp/tutorial_dsp_delay_line.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸"><a class="pagination-nav__link pagination-nav__link--prev" href="/juce-tutorial-ja/dsp/tutorial_dsp_convolution/"><div class="pagination-nav__sublabel">å‰ã¸</div><div class="pagination-nav__label">ã‚¦ã‚§ãƒ¼ãƒ–ã‚·ã‚§ãƒ¼ãƒ”ãƒ³ã‚°ã¨ã‚³ãƒ³ãƒœãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹æ­ªã¿ã®è¿½åŠ </div></a><a class="pagination-nav__link pagination-nav__link--next" href="/juce-tutorial-ja/dsp/tutorial_simd_register_optimisation/"><div class="pagination-nav__sublabel">æ¬¡ã¸</div><div class="pagination-nav__label">SIMDRegisterã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ãŸæœ€é©åŒ–</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ã¯ã˜ã‚ã‚‹" class="table-of-contents__link toc-highlight">ã¯ã˜ã‚ã‚‹</a></li><li><a href="#what-is-a-delay-line" class="table-of-contents__link toc-highlight">What is a Delay Line?</a></li><li><a href="#what-is-physical-modelling" class="table-of-contents__link toc-highlight">What is Physical Modelling?</a><ul><li><a href="#the-waveguide-string-model" class="table-of-contents__link toc-highlight">The waveguide string model</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">JUCE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juce.com/learn/tutorials/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juce.com/learn/documentation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.juce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="footer__link-item">repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/juce-framework/JUCE" target="_blank" rel="noopener noreferrer" class="footer__link-item">JUCE GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2024 Raw Material Software Limited. translation: mimoz</div></div></div></footer></div>
</body>
</html>