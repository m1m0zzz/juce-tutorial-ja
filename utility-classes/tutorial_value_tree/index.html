<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-utility-classes/tutorial_value_tree" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">The ValueTree class | JUCE日本語版チュートリアル</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/juce-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/juce-social-card.jpg"><meta data-rh="true" property="og:url" content="https://m1m0zzz.github.io/juce-tutorial-ja/utility-classes/tutorial_value_tree/"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="keywords" content="JUCE, plugin, VST, 日本語, チュートリアル"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="The ValueTree class | JUCE日本語版チュートリアル"><meta data-rh="true" name="description" content="Learn how to use the ValueTree class to manage data effectively in your applications."><meta data-rh="true" property="og:description" content="Learn how to use the ValueTree class to manage data effectively in your applications."><link data-rh="true" rel="icon" href="/juce-tutorial-ja/img/juce.png"><link data-rh="true" rel="canonical" href="https://m1m0zzz.github.io/juce-tutorial-ja/utility-classes/tutorial_value_tree/"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/utility-classes/tutorial_value_tree/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/utility-classes/tutorial_value_tree/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1662Y26YFC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-1662Y26YFC",{anonymize_ip:!0})</script><link rel="stylesheet" href="/juce-tutorial-ja/assets/css/styles.e1cde857.css">
<script src="/juce-tutorial-ja/assets/js/runtime~main.3188570e.js" defer="defer"></script>
<script src="/juce-tutorial-ja/assets/js/main.ffd66bad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/juce-tutorial-ja/"><div class="navbar__logo"><img src="/juce-tutorial-ja/img/juce.png" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/juce-tutorial-ja/img/juce.png" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JUCE日本語版チュートリアル</b></a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/初級/">tag:初級</a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/中級/">tag:中級</a><a class="navbar__item navbar__link" href="/juce-tutorial-ja/tags/上級/">tag:上級</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/juce-tutorial-ja/">About / このサイトについて</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a><button aria-label="&#x27;Getting Started&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/audio/">Audio</a><button aria-label="&#x27;Audio&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/synth/">Synth</a><button aria-label="&#x27;Synth&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/midi/">MIDI</a><button aria-label="&#x27;MIDI&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/plugins/">Plugins</a><button aria-label="&#x27;Plugins&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/dsp/">DSP</a><button aria-label="&#x27;DSP&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/graphics/">Graphics</a><button aria-label="&#x27;Graphics&#x27;の 目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/interface-design/">Interface Design</a><button aria-label="&#x27;Interface Design&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/juce-tutorial-ja/category/mobile/">Mobile</a><button aria-label="&#x27;Mobile&#x27;の目次を開く" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/juce-tutorial-ja/category/utility-classes/">Utility Classes</a><button aria-label="&#x27;Utility Classes&#x27;の目次を隠す" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_big_integer/">The BigInteger class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_random/">The Random class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_file_reading/">File reading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/">The ValueTree class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_undo_manager_value_tree/">Using an UndoManager with a ValueTree</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_analytics_collection/">App analytics collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_online_unlock_status/">Unlock your plugins through online registration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_app_plugin_packaging/">Package your app or plugin for distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/utility-classes/tutorial_osc_sender_receiver/">Implement the OSC protocol in your app</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/juce-tutorial-ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/juce-tutorial-ja/category/utility-classes/"><span itemprop="name">Utility Classes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">The ValueTree class</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><p><a href="https://docs.juce.com/master/tutorial_value_tree.html">📚 Source Page</a></p>
<header><h1>Tutorial: The ValueTree class</h1></header>
<p>Learn how to use the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class to manage data effectively in your applications.</p>
<p>Level: Intermediate</p>
<p>Platforms: Windows, macOS, Linux, iOS, Android</p>
<p>Classes: <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a>, <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a>, <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a></p>
<h1>Introduction</h1>
<p>The <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class is JUCE&#x27;s secret weapon. It has the power to massively streamline the internal complexity of your applications, turning the traditionally passive data model into an active participant in runtime operation. It takes care of some of the fiddlier aspects of development, such as interfacing data with the GUI, and providing automatic undo and redo of data modifications, as well as providing a universal container for your data. It is also inherently serialisable, making the export and import process very straightforward.</p>
<p>You may not know about them, or perhaps you may have simply not realised their potential. This guide is intended to cover everything you need to know in order to use them.</p>
<h1>Three essential classes</h1>
<p>The <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class is really an ensemble and, when working with them, you will always be interacting with at least three important classes. These are the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class itself, the <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> class, and the <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> class. It is impossible to do anything meaningful with <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects without encountering these, so it is useful to appreciate how (and why) you should be using them. Therefore, before we discuss the actual practicalities of manipulating such data, you should familiarise yourself with the following:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="valuetree-class-overview">ValueTree class overview<a href="#valuetree-class-overview" class="hash-link" aria-label="ValueTree class overview への直接リンク" title="ValueTree class overview への直接リンク">​</a></h2>
<p>The <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class is the ultimate container class, capable of holding any kind of information. Whilst this may be the obvious role of the type, there are many other facets to it, taking it beyond mere structural duties.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-storage">Data Storage<a href="#data-storage" class="hash-link" aria-label="Data Storage への直接リンク" title="Data Storage への直接リンク">​</a></h3>
<p>A <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object is a flexible, multi-purpose data object. It has a basic <em>type</em> name, and can hold an arbitrary set of named properties. It is like a kind of <em>universal struct</em>; you don’t need to define what (or how much) data it should hold, you can just use it for whatever you like at runtime.</p>
<p>For illustrative purposes, one object (shown here as <em>pseudo-data</em>) might hold the following information:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;Fluffmuff&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Animal = &quot;Cat&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Size = 2.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As the name suggests, a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object may also function as a node in a tree structure. Along with its named properties, it can contain any number of child nodes (and can in turn itself be added to a parent node).</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Pet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;Fluffmuff&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Animal = &quot;Cat&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Size = 2.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Accessories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Collar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Colour = &quot;Pink&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Camera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HasFlash = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Capacity = 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColourRepresents a colour, also including a transparency value.Definition juce_Colour.h:41</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These structures are very similar to those formed in the XML format; an individual <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> node is very much like an <a href="https://docs.juce.com/master/classXmlElement" target="_blank" rel="noopener noreferrer" title="Used to build a tree of elements representing an XML document.">XmlElement</a> object, having a name, properties, and children. The big difference is that the properties are stored as actual typed data, rather than the text-for-everything representation used by the XML format . This means they can hold more complex types of data, access it more efficiently, and be generally better suited to use in a data model (and not just serialisation). In fact, it is possible to automatically generate XML text (or a special binary format) from any given <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> node, and later restore that structure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference-counting">Reference counting<a href="#reference-counting" class="hash-link" aria-label="Reference counting への直接リンク" title="Reference counting への直接リンク">​</a></h3>
<p>Each node is reference counted, so their lifetimes are easily managed. The data itself is actually stored in a hidden shared instance, for which the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class is just a light, reference-keeping wrapper interface.</p>
<p>You can pass them around quickly by value, and not have to use pointers directly; returning a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object from a function does not copy any data, only a reference, so it makes your interfaces both simple and safe.</p>
<p>You never have to worry about deleting them yourself; as soon as you are no longer using one anywhere, it will be automatically destroyed. This also means that the node data will never be accidentally deleted whilst you might be still using it, which is particularly handy for ensuring an asynchronous UI will never encounter dangling pointers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simple-interface">Simple interface<a href="#simple-interface" class="hash-link" aria-label="Simple interface への直接リンク" title="Simple interface への直接リンク">​</a></h3>
<p>It has a simple, universal interface for manipulating its properties and children. By being generic, it can have a single interface to access the content, regardless of its type or organisation. Using the universal <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> class as the common property type, it can take a variety of inputs. Using the <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> class to store and retrieve these properties by name, it presents an intuitive way to organise your data.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="undo-and-redo">Undo and redo<a href="#undo-and-redo" class="hash-link" aria-label="Undo and redo への直接リンク" title="Undo and redo への直接リンク">​</a></h3>
<p>By having such a concise set of controls, it is able to provide built-in support for undo; all of the functions which modify content incorporate predefined undoable actions, so you need only supply an <a href="https://docs.juce.com/master/classUndoManager" target="_blank" rel="noopener noreferrer" title="Manages a list of undo/redo commands.">UndoManager</a> object to provide such functionality in your application. In case you weren’t already convinced, this is a very compelling reason to use <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects in a data model.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notifications">Notifications<a href="#notifications" class="hash-link" aria-label="Notifications への直接リンク" title="Notifications への直接リンク">​</a></h3>
<p>Another very powerful feature is the ability for ValueTrees to send notifications when their contents change; this offers huge practical simplifications, particularly in keeping the UI up to date. For example, a <a href="https://docs.juce.com/master/classComponent" target="_blank" rel="noopener noreferrer" title="The base class for all JUCE user-interface objects.">Component</a> object being used to display the contents of a node can simply refresh itself whenever it sees that the data has been edited—you need only implement it as a <a href="https://docs.juce.com/master/classValueTree_1_1Listener" target="_blank" rel="noopener noreferrer" title="Listener class for events that happen to a ValueTree.">ValueTree::Listener</a> subclass.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="概要">概要<a href="#概要" class="hash-link" aria-label="概要 への直接リンク" title="概要 への直接リンク">​</a></h3>
<p>The <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class is like some kind of miracle class for the application data model, effortlessly providing a wealth of functionality to simplify the way the insides of your application slot together.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="var-class-overview">var class overview<a href="#var-class-overview" class="hash-link" aria-label="var class overview への直接リンク" title="var class overview への直接リンク">​</a></h2>
<p>The <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> class is a universal <em>variant</em> class, for holding data of various types. Its functionality makes it suitable for representing JSON data structures.</p>
<p>Traditionally, you would have to decide in advance what type of data any given variable in your code may store (for example, if you want to hold a whole number, you would choose an <code>int</code>, and that is all that variable is allowed to be used for). However, if you were to use a <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a>, such a decision does not have to be made, as it is compatible with a variety of types.</p>
<p>It is like a generic chameleon variable, capable of representing basic numeric values (<code>int</code> or <code>double</code>), text (a <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object), and <code>bool</code> values, as well as a <code>void</code> state (because <code>0</code> or <code>false</code> can be conceptually different to <em>nothing</em>). They can also hold a pointer to any class derived from the <a href="https://docs.juce.com/master/classReferenceCountedObject" target="_blank" rel="noopener noreferrer" title="A base class which provides methods for reference-counting.">ReferenceCountedObject</a> class (which could be comprised of any kind of complex data you can imagine). As if that weren’t enough, a single <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> object can also be used as an array of multiple <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> objects!</p>
<p>This versatility makes it ideal for use in a generic container (such as the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class), allowing its interface the luxury of not having to care what type you’re giving to it (or expecting from it), as long as it can be held in a var. There is implicit casting (and overloaded assignment operators) for the basic types, making interaction in code simple. You can even automatically return a string representation of its current value (including non-text types). The only place these luxuries don’t all apply is when a <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> object holds a <a href="https://docs.juce.com/master/classReferenceCountedObject" target="_blank" rel="noopener noreferrer" title="A base class which provides methods for reference-counting.">ReferenceCountedObject</a> object. As these are unknown types, you have to cast them yourself (you can do this safely with a <code>dynamic_cast</code>, as this returns <code>nullptr</code> if it is not of the correct type).</p>
<p>In a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object, all properties are held as <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> objects. By choosing this multi-purpose class as a property type, it is possible to have a single set of functions to access them, regardless of what they may be. You don’t need to use one function for <code>int</code> values and another for text; all such functions can be unified by dealing with <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> objects.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="identifier-class-overview">Identifier class overview<a href="#identifier-class-overview" class="hash-link" aria-label="Identifier class overview への直接リンク" title="Identifier class overview への直接リンク">​</a></h2>
<p>This class is intended as a human-readable <em>key</em>, used to identify data.</p>
<p>Essentially, an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object is a string. You can assign one from a <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object, and you can also retrieve their contents as a <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object. In the context of the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class, it is used both to specify a type name for the node, and also to uniquely label each of its properties.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-not-just-use-the-string-class">Why not just use the String class?<a href="#why-not-just-use-the-string-class" class="hash-link" aria-label="Why not just use the String class? への直接リンク" title="Why not just use the String class? への直接リンク">​</a></h3>
<p>There are two main reasons for using a specialised class instead of the general purpose <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> class.</p>
<ul>
<li>It can force a limited character set: Firstly, this class enforces a limitation on the characters which can make up a valid key; it only allows alphanumeric characters and special characters <code>_-:#$%</code>. This might sound a bit rubbish, but it makes it possible to ensure compatibility with other systems with the same limitation (for example, the XML format and scripts).</li>
<li>It can be optimised for purpose: The second (but most important) reason stems from how we want to use them. They are to act as a key to identify a single item from a list of any size, and so the most common operation to be performed with them is a comparison. However, comparisons of <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> objects can be fairly slow. We actually have to check the text, and only when we find the first different character can we say for sure that two <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> objects are not the same. For strings that are mostly the same, we may end up checking most of the letters (and strings which are a match will have had all of their characters tested). For a single comparison, that might be acceptable, but when you want to compare one string against a list (as we would when using it as a key), the whole business can take a long time.</li>
</ul>
<p>By using a special class, we can ensure that it is optimised to allow for quick comparisons. Because of this optimisation (and the limited character set), they are not intended to be used for general text handling, but they are perfectly suited to using string-like data as a key.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-they-be-faster-to-compare">How can they be faster to compare?<a href="#how-can-they-be-faster-to-compare" class="hash-link" aria-label="How can they be faster to compare? への直接リンク" title="How can they be faster to compare? への直接リンク">​</a></h3>
<p>It is useful to know about the optimisation of the <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> class. For one thing, it will reassure you that the code is not secretly checking all the characters in each test. More importantly, however, as with many optimisations, there is a cost involved, and it helps to know where that is so you can avoid it being an issue.</p>
<p>It is perfectly possible to use the <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> without knowing this stuff, but you will have a better understanding of where the trade-offs occur if you do.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>The details of this optimisation may well change (this is Secondary Knowledge of a class), but it is unlikely that the implications for your implementation will.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-special-case-in-string-comparisons">A special case in String comparisons<a href="#a-special-case-in-string-comparisons" class="hash-link" aria-label="A special case in String comparisons への直接リンク" title="A special case in String comparisons への直接リンク">​</a></h3>
<p>To know that two <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> objects are the same, what you actually have to do is prove that they are not different. As it happens, the <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> class holds reference counted text, so there is a chance that two <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> objects actually point to the same data; if that is the case, we can spot it straight away (as they will both hold the same address).</p>
<p>These special cases are much quicker, but the <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> class can only take advantage of them if they happen. When the addresses are not the same, it does not prove that their content is not equivalent, and so we must still check the characters.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exploiting-the-special-case">Exploiting the special case<a href="#exploiting-the-special-case" class="hash-link" aria-label="Exploiting the special case への直接リンク" title="Exploiting the special case への直接リンク">​</a></h3>
<p>The <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> class exploits this behaviour, and makes it so that we can actually guarantee that all equivalent <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> objects will always be pointing to the same piece of data. Because of the way they are optimised, a character-for-character match of different <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> objects will never exist for different memory addresses. This means that the <em>special case</em> of identical strings is now the only way to be equivalent, and thus proving that they are different is as simple as spotting that they hold different addresses.</p>
<p>This is not magic, however, as the cost is simply moved elsewhere.</p>
<p>In order to enforce this behaviour, all <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> objects share a single, concealed, global pool of unique strings. The strings held by every <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object used at runtime are stored in this pool. When assigning an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object from a <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object, the pool is checked to see if it already contains an equivalent copy. If it does, that will be used instead; if not, the new <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object is added, ready to be found by the next <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object to look for it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-cost">The cost<a href="#the-cost" class="hash-link" aria-label="The cost への直接リンク" title="The cost への直接リンク">​</a></h3>
<p>Thus, instantiating an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object from a <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object is the most expensive part of their operation. Once one exists, if you always copy from it, you will never have to pay that price for it again. Sometimes it is unavoidable (specifically if you are acquiring an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object from input, or data held in a normal <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object), but this is far less regular an occurrence than comparing them. Every time you assign one from a bare <a href="https://docs.juce.com/master/classString" target="_blank" rel="noopener noreferrer" title="The JUCE String class!">String</a> object (either from data, or as a literal in code), a pool check is required to enforce the optimisation. If you instead assign from another existing <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object, it is guaranteed that such a check has already been done.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-minimise-costs">How to minimise costs<a href="#how-to-minimise-costs" class="hash-link" aria-label="How to minimise costs への直接リンク" title="How to minimise costs への直接リンク">​</a></h3>
<p>A good strategy is to initialise some easily-accessible <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> instances at startup. From your code, you can then use these instead of literal strings, and you will never incur any further lookup penalties from them. You could put them in a globally accessible namespace, use file static instances, or even static class members to help organise them.</p>
<h1>Basic ValueTree class usage</h1>
<p>In addition to the <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> and <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> classes, there are actually many more that you will see used in conjunction with <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects, as we shall see later. These, however, are required for most of the fundamental operations in the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class.</p>
<p>Once you&#x27;ve learned about the three essential classes, you should be in a good position to proceed to pick up the basics.</p>
<p>This is a basic guide introducing all of the essential core functions of the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class. It covers all of the functionality you need to be able to get started using them in your code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-valuetree-object">Creating a ValueTree object<a href="#creating-a-valuetree-object" class="hash-link" aria-label="Creating a ValueTree object への直接リンク" title="Creating a ValueTree object への直接リンク">​</a></h2>
<p>You can easily use <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects by simply creating an object on the stack (or as a member of a class).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="invalid-valuetree-objects">Invalid ValueTree objects<a href="#invalid-valuetree-objects" class="hash-link" aria-label="Invalid ValueTree objects への直接リンク" title="Invalid ValueTree objects への直接リンク">​</a></h2>
<p>A <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object is, by default, <strong>invalid</strong>. That is, a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object initialised with the <em>default constructor</em> will have no data at all. Unless you explicitly initialise it with an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> (or an existing, valid, <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object), it will hold nothing; it is an empty shell.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">juce::ValueTree myNode; // this object is invalid - it does not hold any node data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is similar to a null pointer (in fact, internally, that&#x27;s exactly what it is), but without any of the inherent dangers. Until it is assigned a valid node, it refers to nothing. The main difference here is that the interface functions can still be used, albeit largely without any effect (as there is nothing to be manipulated).</p>
<p>Whilst it is safe to &#x27;accidentally&#x27; call the access functions on an invalid node, it doesn&#x27;t get you very far!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-check-if-a-node-is-invalid">How to check if a node is invalid<a href="#how-to-check-if-a-node-is-invalid" class="hash-link" aria-label="How to check if a node is invalid への直接リンク" title="How to check if a node is invalid への直接リンク">​</a></h2>
<p>In your code you can call the member function <a title="Returns true if this tree refers to some valid data." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a9c1506afbe6b840e4ab43fabf275845a">ValueTree::isValid()</a> to find out if the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> is empty:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (myNode.isValid())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This will not be reached for an invalid node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="valid-valuetree-objects">Valid ValueTree objects<a href="#valid-valuetree-objects" class="hash-link" aria-label="Valid ValueTree objects への直接リンク" title="Valid ValueTree objects への直接リンク">​</a></h2>
<p>The primary means of creating a valid <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object is by initialising with a valid <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object. This is used to <em>name</em> the new node, and represents the node’s <strong>type</strong>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static juce::Identifier myNodeType (&quot;MyNode&quot;); // pre-create an Identifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">juce::ValueTree myNode (myNodeType);           // This is a valid node, of type &quot;MyNode&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>You can use a string literal instead of explicitly providing an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object, but it is better practice to use an existing <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> instance where possible. (See <a href="#tutorial_value_tree_indentifier_overview">Identifier class overview</a> for more information.)</p></div></div>
<p>By requiring that a valid node has a type, we have a mechanism of indicating what sort of data it should contain. Conversely, when faced with a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object (for example, as a parameter supplied to a function), you can check its type—using the <a title="Returns the type of this tree." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#aaba6256213ee02c418e9ef3d320f0ff1">ValueTree::getType()</a> function—to determine what you might expect to find inside it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void foo (const juce::ValueTree&amp; someNode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (someNode.getType() == myNodeType)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This would be hit for nodes created as “MyNode”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>Once a node is created, you cannot change its type. This is intentional, as such information is not really a property of the object, it is the fundamental essence of the object.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sharing-valid-valuetree-objects">Sharing valid ValueTree objects<a href="#sharing-valid-valuetree-objects" class="hash-link" aria-label="Sharing valid ValueTree objects への直接リンク" title="Sharing valid ValueTree objects への直接リンク">​</a></h2>
<p>The third way in which a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> can be initialised is via the copy constructor, by providing an existing <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[1]:    juce::ValueTree myNode (myNodeType); // creates a new node of type &quot;MyNode&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2]:    juce::ValueTree sameNode (myNode);   // This object points to the same data as myNode</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This results in an object which refers to <em>the same node data</em> as the existing object.</p>
<p>It is important to understand that nothing is copied here except for a reference; both objects are attached to <strong>the same underlying instance</strong> of the original node data. Changes made to either (if the shared node is valid) will be found upon inspection of the other.</p>
<p>You can achieve the same result (a sharing of node data) by using the assignment operator.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[3]:    juce::ValueTree otherNode (myNodeType); // This creates a second (new) &quot;MyNode&quot; node...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[4]:    otherNode = sameNode;                   // ...but the object now points to the first instance</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is a question:</p>
<p>What happens to the node instance created in line [3] when we replace it in line [4]?</p>
<p>By the end, all three variables point to the same initial instance. There are no longer any <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects referring to the second instance, so <strong>it is destroyed</strong>.</p>
<p>Whenever a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object is reassigned (or goes out of scope), the underlying data it was pointing to loses a reference. If that data is not held elsewhere, it is automatically destroyed. This may sound scary, as if you might be operating in a world where your data could self-destruct at any moment; in reality, it is very unlikely that you will inadvertently lose your nodes! It is a very robust system. Besides, if the data is important, you’ll probably find that you have in fact already stored it somewhere; it is as intuitive as you could wish for.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>This also means that you need to be careful in real-time code such as an audio callback. Reassigning a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object in an audio callback could inadvertently cause the <code>delete</code> operator if there are no longer references to the previously assigned data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-about-the-undomanager-class">A note about the UndoManager class<a href="#a-note-about-the-undomanager-class" class="hash-link" aria-label="A note about the UndoManager class への直接リンク" title="A note about the UndoManager class への直接リンク">​</a></h2>
<p>All of the access functions in the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class understand how to use <a href="https://docs.juce.com/master/classUndoManager" target="_blank" rel="noopener noreferrer" title="Manages a list of undo/redo commands.">UndoManager</a> objects. They come ready-prepared with suitable <a href="https://docs.juce.com/master/classUndoableAction" target="_blank" rel="noopener noreferrer" title="Used by the UndoManager class to store an action which can be done and undone.">UndoableAction</a> objects; all you have to do is provide a pointer to an <a href="https://docs.juce.com/master/classUndoManager" target="_blank" rel="noopener noreferrer" title="Manages a list of undo/redo commands.">UndoManager</a> object with your call, and an operational, undoable record of the modification will be added to it automatically.</p>
<p>There&#x27;s not a lot you need to know to manage this, but we cover it in more detail in <a href="/juce-tutorial-ja/utility-classes/tutorial_undo_manager_value_tree/">Tutorial: Using an UndoManager with a ValueTree</a>.</p>
<p>For now, we will make use of the functions without bothering to store a history, by providing a <code>nullptr</code> value. We will take it as read that any such modification functions must be given at least a null pointer to an <a href="https://docs.juce.com/master/classUndoManager" target="_blank" rel="noopener noreferrer" title="Manages a list of undo/redo commands.">UndoManager</a> object when describing them; there will of course be <code>nullptr</code> values visible in the examples.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="receiving-notifications-as-a-listener">Receiving notifications as a Listener<a href="#receiving-notifications-as-a-listener" class="hash-link" aria-label="Receiving notifications as a Listener への直接リンク" title="Receiving notifications as a Listener への直接リンク">​</a></h2>
<p>Registering as a listener to the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> allows us to be notified synchronously when the data has changed. The pointer to the listener is held in the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> instance and therefore it is usually best to take a copy of the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> before registering like so:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct ExampleListener  : public juce::ValueTree::Listener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExampleListener (juce::ValueTree v)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : tree (v)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tree.addListener (this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::ValueTree tree;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AccessibilityRole::tree@ tree</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can then implement the following callback functions depending on the behaviour we wish to be notified for:</p>
<ul>
<li>valueTreePropertyChanged(): Called when a property change occurs in the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> or any of its children.</li>
<li>valueTreeChildAdded(): Called when a child node is added to the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> or any of its children.</li>
<li>valueTreeChildRemoved(): Called when a child node is removed from the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> or any of its children.</li>
<li>valueTreeChildOrderChanged(): Called when a child node is reordered in the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> or any of its children.</li>
<li>valueTreeParentChanged(): Called when the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> is added or removed from a parent node.</li>
</ul>
<p>Callbacks are propagated upwards in the tree hierarchy so listeners to parent nodes will also receive property change callbacks from children and therefore types and property names should be checked.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>Since callbacks are synchronous, for any time-critical applications you should use an <a href="https://docs.juce.com/master/classAsyncUpdater" target="_blank" rel="noopener noreferrer" title="Has a callback method that is triggered asynchronously.">AsyncUpdater</a> to handle property changes.</p></div></div>
<h1>Basic property access</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-a-property">Setting a property<a href="#setting-a-property" class="hash-link" aria-label="Setting a property への直接リンク" title="Setting a property への直接リンク">​</a></h2>
<p>The <a title="Changes a named property of the tree." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a550e9c8780d4ee56d14d67de17f200e2">ValueTree::setProperty()</a> function is one direct way to set a property on a valid node. You must provide an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object to specify the name of the property you wish to set, and a <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> value for it to take:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static juce::Identifier propertyName (&quot;name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNode.setProperty (propertyName, &quot;Fluffmuff&quot;, nullptr);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-property">Getting a property<a href="#getting-a-property" class="hash-link" aria-label="Getting a property への直接リンク" title="Getting a property への直接リンク">​</a></h2>
<p>There are two basic ways to retrieve a property. For each approach, you must provide an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> to specify which named property you are requesting.</p>
<p>Using the <a title="Returns the value of a named property." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a97f6d4b2a0e28be73d349cba363ab7e2">ValueTree::getProperty()</a> function:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">juce::String name (myNode.getProperty (propertyName));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nameint UnityEventModifiers const char * nameDefinition juce_UnityPluginInterface.h:195</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or using the subscript operator (that is, the <a title="Returns the value of a named property." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a6cf8b3f5eac2d14f1323f5fe0f228a71">ValueTree::operator[]</a> function):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">name = myNode[propertyName];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Both of the above lines store the same result into the <code>name</code> variable. Remember that these properties can hold any supported <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> type. Thus, the following code is also valid:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static juce::Identifier propertySize (&quot;size&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNode.setProperty (propertySize, 2.4, nullptr);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">double size = myNode[propertySize];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, a property is set in the same way using a <code>double</code> value, and is easily read back in as such. It is also possible to replace an existing property with a different type of value.</p>
<p>If all you want to do is store individual values in a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> node (and nothing more complex), then you already know enough to get started!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finding-out-about-properties">Finding out about properties<a href="#finding-out-about-properties" class="hash-link" aria-label="Finding out about properties への直接リンク" title="Finding out about properties への直接リンク">​</a></h2>
<p>If you were using structs, you would only have the ability to set or get these member variables directly. With a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> node, you can also (at runtime) find out what <em>variables</em> there are.</p>
<p>The <a title="Returns the total number of properties that the tree contains." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a018730ee95c743705aa9132a37829b32">ValueTree::getNumProperties()</a> function tells you how many properties a node has:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int numProperties = myNode.getNumProperties();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a title="Returns the identifier of the property with a given index." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a6ea2ce53b4759a37d58e3f99d9702e36">ValueTree::getPropertyName()</a> function returns an <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> object giving the name of the property at the specified position. By using this in combination with the <a title="Returns the total number of properties that the tree contains." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a018730ee95c743705aa9132a37829b32">ValueTree::getNumProperties()</a> function, it is possible to iterate over the properties without previously knowing what they are.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; numProperties; ++i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::Identifier name (myNode.getPropertyName (i));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // …</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a title="Returns true if the tree contains a named property." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a0dbec0d665fb9d57b9fd7b3189ec0ee0">ValueTree::hasProperty()</a> function simply tells you whether or not a particular named property has been set for a node:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (myNode.hasProperty (nameProperty))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // property was found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These functions allow for what is called reflection, whereby your program is able to inspect the nature of your objects. When faced with an object to work with, your code doesn&#x27;t necessarily need a definition (for example, class header) to be able to make use of it; you can check to see what members it has, and use them if they are appropriate.</p>
<h1>Basic child access</h1>
<p>If you want to create more complex structures, you will want to start using these objects as nodes in a hierarchy.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-child">Adding a child<a href="#adding-a-child" class="hash-link" aria-label="Adding a child への直接リンク" title="Adding a child への直接リンク">​</a></h2>
<p>Whilst a node can have a bunch of properties attached to it, it can also contain a number of child nodes, much like an array.</p>
<p>If we have a node we wish to add as a child, we simply call the <a title="Adds a child to this tree." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a93d639299ef9dfedc651544e05f06693">ValueTree::addChild</a> () function on the node we wish to add it to. We naturally pass in the new child node, but we must also specify where it should go. If you don&#x27;t need it to be inserted at any particular position, you can specify <code>-1</code> to simply place it on the end.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">juce::ValueTree childNode (myNodeType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNode.addChild (childNode, -1, nullptr);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, the data held in <code>childNode</code> node belongs to the data held in <code>myNode</code>.</p>
<p>Note that this <em>belonging</em> is also an additional reference. If we reassign the <code>childNode</code> variable, the existing data will not be lost.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">childNode = juce::ValueTree (myNodeType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myNode.addChild (childNode, -1, nullptr);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Whilst we may no longer have any <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects in our immediate scope pointing directly to that instance, it is kept alive within the original node.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-child">Getting a child<a href="#getting-a-child" class="hash-link" aria-label="Getting a child への直接リンク" title="Getting a child への直接リンク">​</a></h2>
<p>There are a number of ways in which you can retrieve a child node. Which you should choose for any given task depends upon how your chosen structures are organised.</p>
<p>With all of them, any requests which don&#x27;t correspond to a child will return an invalid object.</p>
<p>The <a title="Returns one of this tree&#x27;s sub-trees." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a3f89053219ec515f24997a115cfd74e5">ValueTree::getChild()</a> function returns the child currently sitting in the specified position within the node&#x27;s internal list. If you&#x27;re always adding them to the end, <code>0</code> would correspond to the first one you put in:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">childNode = myNode.getChild (0);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a title="Returns the first sub-tree with the specified type name." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#a4047208c32c4e024a1f2809d1c35be48">ValueTree::getChildWithName()</a> function returns the first child with the specified name identifier as its node type:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">childNode = myNode.getChildWithName (myNodeType);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a title="Looks for the first sub-tree that has the specified property value." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#aa17ae8b3ef8149fe5b9cc8b37d4ebd7d">ValueTree::getChildWithProperty()</a> function returns the first child which has the named property set to the specified value:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">childNode = myNode.getChildWithProperty (nameProperty, &quot;Fluffmuff&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The last two, along with any other such methods you require, can of course be written using the first one; it&#x27;s easy to write your own functions to retrieve a child by some other criteria (for example, a combination of matching node type and a property value).</p>
<p>You can also retrieve the current owner of any given node using the <a title="Returns the parent tree that contains this one." href="/juce-tutorial-ja/utility-classes/tutorial_value_tree/classValueTree.html/#ad22561c896d9bcdb763d27aacbb5815c">ValueTree::getParent()</a> function:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ValueTree parent (childNode.getParent());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValueTreeA powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...Definition juce_ValueTree.h:75</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>概要</h1>
<p>This tutorial has given a detailed overview of the <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> class and related classes. In particular, you should:</p>
<ul>
<li>Know the importance of the <a href="https://docs.juce.com/master/classvar" target="_blank" rel="noopener noreferrer" title="A variant class, that can be used to hold a range of primitive values.">var</a> and <a href="https://docs.juce.com/master/classIdentifier" target="_blank" rel="noopener noreferrer" title="Represents a string identifier, designed for accessing properties by name.">Identifier</a> classes.</li>
<li>How to create <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects and pass them around.</li>
<li>How to add and access properties of <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> objects.</li>
<li>How to add and access child nodes to a <a href="https://docs.juce.com/master/classValueTree" target="_blank" rel="noopener noreferrer" title="A powerful tree structure that can be used to hold free-form data, and which can handle its own undo ...">ValueTree</a> object.</li>
</ul>
<h1>関連項目</h1>
<ul>
<li><a href="/juce-tutorial-ja/utility-classes/tutorial_undo_manager_value_tree/">Tutorial: Using an UndoManager with a ValueTree</a></li>
<li><a href="/juce-tutorial-ja/utility-classes/tutorial_audio_processor_value_tree_state/">Tutorial: Saving and loading your plug-in state</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/utility-classes/tutorial_value_tree.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/juce-tutorial-ja/utility-classes/tutorial_file_reading/"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">File reading</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/juce-tutorial-ja/utility-classes/tutorial_undo_manager_value_tree/"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">Using an UndoManager with a ValueTree</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#valuetree-class-overview" class="table-of-contents__link toc-highlight">ValueTree class overview</a><ul><li><a href="#data-storage" class="table-of-contents__link toc-highlight">Data Storage</a></li><li><a href="#reference-counting" class="table-of-contents__link toc-highlight">Reference counting</a></li><li><a href="#simple-interface" class="table-of-contents__link toc-highlight">Simple interface</a></li><li><a href="#undo-and-redo" class="table-of-contents__link toc-highlight">Undo and redo</a></li><li><a href="#notifications" class="table-of-contents__link toc-highlight">Notifications</a></li><li><a href="#概要" class="table-of-contents__link toc-highlight">概要</a></li></ul></li><li><a href="#var-class-overview" class="table-of-contents__link toc-highlight">var class overview</a></li><li><a href="#identifier-class-overview" class="table-of-contents__link toc-highlight">Identifier class overview</a><ul><li><a href="#why-not-just-use-the-string-class" class="table-of-contents__link toc-highlight">Why not just use the String class?</a></li><li><a href="#how-can-they-be-faster-to-compare" class="table-of-contents__link toc-highlight">How can they be faster to compare?</a></li><li><a href="#a-special-case-in-string-comparisons" class="table-of-contents__link toc-highlight">A special case in String comparisons</a></li><li><a href="#exploiting-the-special-case" class="table-of-contents__link toc-highlight">Exploiting the special case</a></li><li><a href="#the-cost" class="table-of-contents__link toc-highlight">The cost</a></li><li><a href="#how-to-minimise-costs" class="table-of-contents__link toc-highlight">How to minimise costs</a></li></ul></li><li><a href="#creating-a-valuetree-object" class="table-of-contents__link toc-highlight">Creating a ValueTree object</a></li><li><a href="#invalid-valuetree-objects" class="table-of-contents__link toc-highlight">Invalid ValueTree objects</a></li><li><a href="#how-to-check-if-a-node-is-invalid" class="table-of-contents__link toc-highlight">How to check if a node is invalid</a></li><li><a href="#valid-valuetree-objects" class="table-of-contents__link toc-highlight">Valid ValueTree objects</a></li><li><a href="#sharing-valid-valuetree-objects" class="table-of-contents__link toc-highlight">Sharing valid ValueTree objects</a></li><li><a href="#a-note-about-the-undomanager-class" class="table-of-contents__link toc-highlight">A note about the UndoManager class</a></li><li><a href="#receiving-notifications-as-a-listener" class="table-of-contents__link toc-highlight">Receiving notifications as a Listener</a></li><li><a href="#setting-a-property" class="table-of-contents__link toc-highlight">Setting a property</a></li><li><a href="#getting-a-property" class="table-of-contents__link toc-highlight">Getting a property</a></li><li><a href="#finding-out-about-properties" class="table-of-contents__link toc-highlight">Finding out about properties</a></li><li><a href="#adding-a-child" class="table-of-contents__link toc-highlight">Adding a child</a></li><li><a href="#getting-a-child" class="table-of-contents__link toc-highlight">Getting a child</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">JUCE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juce.com/learn/tutorials/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juce.com/learn/documentation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.juce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="footer__link-item">repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/juce-framework/JUCE" target="_blank" rel="noopener noreferrer" class="footer__link-item">JUCE GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Raw Material Software Limited. translation: mimoz</div></div></div></footer></div>
</body>
</html>