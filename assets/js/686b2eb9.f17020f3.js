"use strict";(self.webpackChunkjuce_tutorial_ja=self.webpackChunkjuce_tutorial_ja||[]).push([[6325],{7432:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var n=t(4848),i=t(8453),o=t(3449);t(6378);const a={title:"MIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",sidebar_position:5},c="\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebMIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",r={id:"synth/tutorial_synth_using_midi_input",title:"MIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",description:"This tutorial implements a polyphonic sine wave synthesiser that responds to MIDI input. This makes use of the \u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc class and related classes.",source:"@site/docs/synth/tutorial_synth_using_midi_input.mdx",sourceDirName:"synth",slug:"/synth/tutorial_synth_using_midi_input",permalink:"/juce-tutorial-ja/synth/tutorial_synth_using_midi_input",draft:!1,unlisted:!1,editUrl:"https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/synth/tutorial_synth_using_midi_input.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"MIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",permalink:"/juce-tutorial-ja/synth/tutorial_sine_synth"},next:{title:"\u30a6\u30a7\u30fc\u30d6\u30c6\u30fc\u30d6\u30eb\u30fb\u30b7\u30f3\u30bb\u30b7\u30b9",permalink:"/juce-tutorial-ja/synth/tutorial_wavetable_synth"}},l={},d=[{value:"Setting up the keyboard",id:"setting-up-the-keyboard",level:2},{value:"AudioAppComponent functions",id:"audioappcomponent-functions",level:2},{value:"The SynthAudioSource class",id:"the-synthaudiosource-class",level:2},{value:"The SineWaveSound class",id:"the-sinewavesound-class",level:2},{value:"Sine wave voice state",id:"sine-wave-voice-state",level:2},{value:"Checking which sound can be played",id:"checking-which-sound-can-be-played",level:2},{value:"Starting a voice",id:"starting-a-voice",level:2},{value:"Rendering a voice",id:"rendering-a-voice",level:2},{value:"Stopping a voice",id:"stopping-a-voice",level:2},{value:"Providing a MIDI input to the SynthAudioSource",id:"providing-a-midi-input-to-the-synthaudiosource",level:2},{value:"Listing MIDI inputs",id:"listing-midi-inputs",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebmidi\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebMIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"}),"\n",(0,n.jsxs)(s.p,{children:["This tutorial implements a polyphonic sine wave synthesiser that responds to MIDI input. This makes use of the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," class and related classes."]}),"\n",(0,n.jsx)(s.p,{children:"\u30ec\u30d9\u30eb Intermediate"}),"\n",(0,n.jsx)(s.p,{children:"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0 Windows, macOS, Linux"}),"\n",(0,n.jsxs)(s.p,{children:["\u30af\u30e9\u30b9\uff1a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"}),", ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserVoice",title:"Represents a voice that a Synthesiser can use to play a SynthesiserSound.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30fb\u30dc\u30a4\u30b9"}),", ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"}),", ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioSource",title:"Base class for objects that can produce a continuous stream of audio.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"}),", ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})]}),"\n",(0,n.jsx)(s.h1,{id:"getting-started",children:"Getting started"}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsxs)(s.p,{children:["You should be familiar with handling MIDI input in JUCE and how to generate a sine wave. See ",(0,n.jsx)(s.a,{href:"../tutorial_handling_midi_events/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\uff1aMIDI\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406"})," and ",(0,n.jsx)(s.a,{href:"../tutorial_sine_synth/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"}),"."]})}),"\n",(0,n.jsxs)(s.p,{children:["Download the demo project for this tutorial here: ",(0,n.jsx)(s.a,{href:"/tutorials/PIPs/SynthUsingMidiInputTutorial.zip",children:"\u30d4\u30c3\u30d7"})," | ",(0,n.jsx)(s.a,{href:"/tutorials/ZIPs/SynthUsingMidiInputTutorial.zip",children:"\u30b8\u30c3\u30d7"}),". Unzip the project and open the first header file in the Projucer."]}),"\n",(0,n.jsxs)(s.p,{children:["If you need help with this step, see ",(0,n.jsx)(s.a,{href:"../tutorial_new_projucer_project/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebProjucer\u30d1\u30fc\u30c81\uff1aProjucer\u3092\u59cb\u3081\u308b"}),"."]}),"\n",(0,n.jsx)(s.h1,{id:"the-demo-project",children:"The demo project"}),"\n",(0,n.jsx)(s.p,{children:"\u3053\u306e\u30c7\u30e2\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u6f14\u594f\u3059\u308b\u306e\u306b\u4f7f\u3048\u308b\u30aa\u30f3\u30b9\u30af\u30ea\u30fc\u30f3\u30fb\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u7d39\u4ecb\u3057\u3066\u3044\u308b\u3002"}),"\n",(0,n.jsx)(o.A,{src:"https://docs.juce.com/master/tutorial_synth_using_midi_input_screenshot1.png",caption:"The application window containing a MidiKeyboardComponent"}),"\n",(0,n.jsx)(s.p,{children:"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u3001\u753b\u9762\u4e0a\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff08A\u3001S\u3001D\u3001F\u306a\u3069\u306e\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u3001\u97f3\u7b26C\u3001D\u3001E\u3001F\u306a\u3069\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\uff09\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u30dd\u30ea\u30d5\u30a9\u30cb\u30c3\u30af\u306b\u6f14\u594f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,n.jsx)(s.h1,{id:"the-synthesiser-class",children:"The Synthesiser class"}),"\n",(0,n.jsxs)(s.p,{children:["This tutorial makes use of the JUCE ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," class to implement a polyphonic synthesiser. This shows you all the basic elements needed to customise the synthesiser with your own sounds in your own applications. There are various classes needed to get this to work and in addition to our standard ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class, these are:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"}),": This implements a custom ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioSource",title:"Base class for objects that can produce a continuous stream of audio.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class called ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"}),", which contains the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," class itself. This outputs all of the audio from the synthesiser."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"\u30b5\u30a4\u30f3\u30a6\u30a7\u30fc\u30d6\u30dc\u30a4\u30b9"}),": This is a custom ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserVoice",title:"Represents a voice that a Synthesiser can use to play a SynthesiserSound.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30fb\u30dc\u30a4\u30b9"})," class called ",(0,n.jsx)(s.code,{children:"\u30b5\u30a4\u30f3\u30a6\u30a7\u30fc\u30d6\u30dc\u30a4\u30b9"}),". A voice class renders one of the voices of the synthesiser mixing it with the other sounding voices in a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," object. A single instance of a voice class renders one voice."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"\u6b63\u5f26\u6ce2\u30b5\u30a6\u30f3\u30c9"}),": This contains a custom ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," class called ",(0,n.jsx)(s.code,{children:"\u6b63\u5f26\u6ce2\u30b5\u30a6\u30f3\u30c9"}),". A sound class is effectively a description of the sound that can be created as a voice. For example, this may contain the sample data for a sampler voice or the wavetable data for a wavetable synthesiser."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"setting-up-the-keyboard",children:"Setting up the keyboard"}),"\n",(0,n.jsxs)(s.p,{children:["Our ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class contains the following data members."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"juce::MidiKeyboardState keyboardState\uff1b\n    SynthAudioSource synthAudioSource\uff1b\n    juce::MidiKeyboardComponent keyboardComponent\uff1b\n \n    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (MainContentComponent).\n};\n"})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," and ",(0,n.jsx)(s.code,{children:"\u30ad\u30fc\u30dc\u30fc\u30c9\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," members are initialised in the ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," constructor."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"MainContentComponent()\n        : synthAudioSource (keyboardState)\u3001\n          keyboardComponent (keyboardState, juce::MidiKeyboardComponent::horizontalKeyboard)\n    {\n        addAndMakeVisible (keyboardComponent)\uff1b\n        setAudioChannels (0, 2)\uff1b\n \n        setSize (600, 160)\uff1b\n        startTimer (400)\uff1b\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["See ",(0,n.jsx)(s.a,{href:"../tutorial_handling_midi_events/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\uff1aMIDI\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406"})," for more information on the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiKeyboardComponent",title:"A component that displays a piano keyboard, whose notes can be clicked on.",children:"MidiKeyboardComponent"})," class."]}),"\n",(0,n.jsx)(s.p,{children:"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u304b\u3089\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u6f14\u594f\u3092\u958b\u59cb\u3059\u308b\u305f\u3081\u306b\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u76f4\u5f8c\u306b\u30ad\u30fc\u30dc\u30fc\u30c9\u30fb\u30d5\u30a9\u30fc\u30ab\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u3001400\u30df\u30ea\u79d2\u5f8c\u306b\u8d77\u52d5\u3059\u308b\u5358\u7d14\u306a\u30bf\u30a4\u30de\u30fc\u3092\u4f7f\u3044\u307e\u3059\uff1a"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void timerCallback() \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n    {\n        keyboardComponent.grabKeyboardFocus()\uff1b\n        stopTimer()\uff1b\n    }\n"})}),"\n",(0,n.jsx)(s.h2,{id:"audioappcomponent-functions",children:"AudioAppComponent functions"}),"\n",(0,n.jsxs)(s.p,{children:["The application uses the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioAppComponent",title:"A base class for writing audio apps that stream from the audio i/o devices.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," to set up a simple audio application (see ",(0,n.jsx)(s.a,{href:"../tutorial_simple_synth_noise/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30db\u30ef\u30a4\u30c8\u30ce\u30a4\u30ba\u30fb\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f5c\u308b"})," for the most basic application). The three required ",(0,n.jsx)(s.a,{href:"http://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/",children:"\u30d4\u30e5\u30a2\u30d0\u30fc\u30c1\u30e3\u30eb"})," functions simply call the corresponding functions in our custom ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioSource",title:"Base class for objects that can produce a continuous stream of audio.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void prepareToPlay (int samplesPerBlockExpected, double sampleRate) override\n    {\n        synthAudioSource.prepareToPlay (samplesPerBlockExpected, sampleRate)\uff1b\n    }\n \n    void getNextAudioBlock (const juce::AudioSourceChannelInfo& bufferToFill) override\n    {\n        synthAudioSource.getNextAudioBlock (bufferToFill)\uff1b\n    }\n \n    void releaseResources() \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n    {\n        synthAudioSource.releaseResources()\uff1b\n    }\n"})}),"\n",(0,n.jsx)(s.h2,{id:"the-synthaudiosource-class",children:"The SynthAudioSource class"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class does a little more work:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"class SynthAudioSource : public juce::AudioSource\n{\npublic\uff1a\n    SynthAudioSource (juce::MidiKeyboardState& keyState)\n        : keyboardState (keyState)\n    {\n        for (auto i = 0; i < 4; ++i) // [1].\n            synth.addVoice (new SineWaveVoice())\uff1b\n \n        synth.addSound (new SineWaveSound()); // [2].\n    }\n \n    void setUsingSineWaveSound()\n    {\n        synth.clearSounds()\uff1b\n    }\n \n    void prepareToPlay (int /*samplesPerBlockExpected*/, double sampleRate) override\n    {\n        synth.setCurrentPlaybackSampleRate (sampleRate); // [3].\n    }\n \n    void releaseResources() override {}.\n \n    void getNextAudioBlock (const juce::AudioSourceChannelInfo& bufferToFill) override\n    {\n        bufferToFill.clearActiveBufferRegion()\uff1b\n \n        juce::MidiBuffer incomingMidi\uff1b\n        keyboardState.processNextMidiBuffer (incomingMidi, bufferToFill.startSample\u3001\n                                             bufferToFill.numSamples, true); // [4].\n \n        synth.renderNextBlock (*bufferToFill.buffer, incomingMidi\u3001\n                               bufferToFill.startSample, bufferToFill.numSamples); // [5\uff3d\n    }\n \nprivate\uff1a\n    juce::MidiKeyboardState& keyboardState\uff1b\n    juce::Synthesiser synth\uff1b\n};\n"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"[1]: We add some voices to our synthesiser. This number of voices added determines the polyphony of the synthesiser."}),"\n",(0,n.jsx)(s.li,{children:"[2]: We add the sound so that the synthesiser knows which sounds it can play."}),"\n",(0,n.jsx)(s.li,{children:"[3]: The synthesiser needs to know the sample rate of the audio output."}),"\n",(0,n.jsxs)(s.li,{children:["[4]: In the ",(0,n.jsx)(s.code,{children:"getNextAudioBlock()"})," function we pull buffers of MIDI data from the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiKeyboardState",title:"Represents a piano keyboard, keeping track of which keys are currently pressed.",children:"\u30df\u30c7\u30a3\u30ad\u30fc\u30dc\u30fc\u30c9\u30b9\u30c6\u30fc\u30c8"})," object."]}),"\n",(0,n.jsx)(s.li,{children:"[5]: These buffers of MIDI are passed to the synthesiser which will be used to render the voices using the timestamps of the note-on and note-off messages (and other MIDI channel voice messages)."}),"\n"]}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserVoice",title:"Represents a voice that a Synthesiser can use to play a SynthesiserSound.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30fb\u30dc\u30a4\u30b9"})," objects must be added to one and only one ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," object. The ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," object manages the lifetime of the voices."]})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," objects can be shared between ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," objects if you wish. The ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," class is a type of ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classReferenceCountedObject",title:"A base class which provides methods for reference-counting.",children:"\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"})," class therefore the lifetime of ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," objects is handled automatically."]}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsxs)(s.p,{children:["If you need to keep a pointer to a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," object you should store it in a ",(0,n.jsx)(s.code,{children:"YourSoundClass::Ptr"})," variable for this memory management to work."]})}),"\n",(0,n.jsx)(s.h2,{id:"the-sinewavesound-class",children:"The SineWaveSound class"}),"\n",(0,n.jsxs)(s.p,{children:["Our sound class is very simple, it doesn't even need to contain any data. It just needs to report whether this sound should play on particular MIDI channels and specific notes or note ranges on that channel. In our simple case, it just returns ",(0,n.jsx)(s.code,{children:"\u771f\u306e"})," for both the ",(0,n.jsx)(s.code,{children:"applicesToNote()\u3002"})," and ",(0,n.jsx)(s.code,{children:"applicesToChannel()\u3002"})," functions. As mentioned above, the sound class might be where you would store data that is needed to create the sound (such as a wavetable)."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"struct SineWaveSound : public juce::SynthesiserSound\n{\n    SineWaveSound(){}\uff08\u30b5\u30a4\u30f3\u30a6\u30a7\u30fc\u30d6\u30b5\u30a6\u30f3\u30c9\uff09 {}\uff08\u30b5\u30a4\u30f3\u30a6\u30a7\u30fc\u30d6\u30b5\u30a6\u30f3\u30c9\n \n    bool appliesToNote (int) override { return true; }.\n    bool appliesToChannel (int) override { return true; }.\n};\n"})}),"\n",(0,n.jsx)(s.h2,{id:"sine-wave-voice-state",children:"Sine wave voice state"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"\u30b5\u30a4\u30f3\u30a6\u30a7\u30fc\u30d6\u30dc\u30a4\u30b9"})," class is a bit more complex. It needs to maintain the state of one of the voices of the synthesiser. For our sine wave, we need these data members:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"private\uff1a\n    double currentAngle = 0.0, angleDelta = 0.0, level = 0.0, tailOff = 0.0\uff1b\n};\n"})}),"\n",(0,n.jsxs)(s.p,{children:["See ",(0,n.jsx)(s.a,{href:"../tutorial_sine_synth/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"})," for information on the first three. The ",(0,n.jsx)(s.code,{children:"\u30c6\u30fc\u30eb\u30aa\u30d5"})," member is used to give each voice a slightly softer ",(0,n.jsx)(s.em,{children:"\u30ea\u30ea\u30fc\u30b9"})," to its amplitude envelope. This gives each voice a slight fade out at the end rather than stopping abruptly."]}),"\n",(0,n.jsx)(o.A,{src:"https://docs.juce.com/master/tutorial_synth_using_midi_input_graph1.png",caption:"Exponential release envelope"}),"\n",(0,n.jsx)(s.h2,{id:"checking-which-sound-can-be-played",children:"Checking which sound can be played"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#aa9fb097ca96dc39fae8e6f7b9139df9f",title:"Must return true if this voice object is capable of playing the given sound.",children:"SynthesiserVoice::canPlaySound()"})," function must be overriden to return whether the voice can play a sound. We could just return ",(0,n.jsx)(s.code,{children:"\u771f\u306e"})," in this case but our example illustrates how to use ",(0,n.jsx)(s.code,{children:"\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30ad\u30e3\u30b9\u30c8"})," to check the type of the sound class being passed in."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"    bool canPlaySound (juce::SynthesiserSound* sound) override\n    {\n        return dynamic_cast(sound) != nullptr\uff1b\n    }\n"})}),"\n",(0,n.jsx)(s.h2,{id:"starting-a-voice",children:"Starting a voice"}),"\n",(0,n.jsxs)(s.p,{children:["A voice is started by the owning synthesiser by calling our ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#af3b872622dd9bb540030420189175762",title:"Called to start a new note.",children:"SynthesiserVoice::startNote()"})," function, which we must override:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"    void startNote (int midiNoteNumber, float velocity,\n                    juce::SynthesiserSound*, int /*currentPitchWheelPosition*/) override\n    {\n        currentAngle = 0.0;\n        level = velocity * 0.15;\n        tailOff = 0.0;\n \n        auto cyclesPerSecond = juce::MidiMessage::getMidiNoteInHertz (midiNoteNumber);\n        auto cyclesPerSample = cyclesPerSecond / getSampleRate();\n \n        angleDelta = cyclesPerSample * 2.0 * juce::MathConstants::pi\uff1b\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Again, most of this should be familar to your from ",(0,n.jsx)(s.a,{href:"../tutorial_sine_synth/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"}),". The ",(0,n.jsx)(s.code,{children:"\u30c6\u30fc\u30eb\u30aa\u30d5"})," value is set to zero at the start of each voice. We also use the velocity of the MIDI note-on event to control the level of the voice."]}),"\n",(0,n.jsx)(s.h2,{id:"rendering-a-voice",children:"Rendering a voice"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#a72ab7856c1e7651b1ce955388645a0a1",title:"Renders the next block of data for this voice.",children:"SynthesiserVoice::renderNextBlock()"})," function must be overriden to generate the audio."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void renderNextBlock (juce::AudioSampleBuffer& outputBuffer, int startSample, int numSamples) override\n    {\n        if (\u89d2\u5ea6\u30c7\u30eb\u30bf != 0.0)\n        {\n            if (tailOff > 0.0) // [7].\n            {\n                while (--numSamples >= 0)\n                {\n                    auto currentSample = (float) (std::sin (currentAngle) * level * tailOff)\uff1b\n \n                    for (auto i = outputBuffer.getNumChannels(); --i >= 0;)\n                        outputBuffer.addSample (i, startSample, currentSample)\uff1b\n \n                    currentAngle += angleDelta\uff1b\n                    ++startSample\uff1b\n \n                    tailOff *= 0.99; // [8].\n \n                    if (tailOff <= 0.005)\n                    {\n                        clearCurrentNote(); // [9].\n \n                        angleDelta = 0.0\uff1b\n                        \u30d6\u30ec\u30fc\u30af\uff1b\n                    }\n                }\n            }\n            else\n            {\n                while (--numSamples >= 0) // [6].\n                {\n                    auto currentSample = (float) (std::sin (currentAngle) * level)\uff1b\n \n                    for (auto i = outputBuffer.getNumChannels(); --i >= 0;)\n                        outputBuffer.addSample (i, startSample, currentSample)\uff1b\n \n                    currentAngle += angleDelta\uff1b\n                    ++startSample\uff1b\n                }\n            }\n        }\n    }\n"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["[6]: This loop is used for the ",(0,n.jsx)(s.em,{children:"\u901a\u5e38"})," state of the voice, while the key is being held down. Notice that we use the ",(0,n.jsx)(s.a,{href:"classAudioBuffer.html#ab46e9ad400252255daa1086b354454b8",title:"Adds a value to a sample in the buffer.",children:"AudioSampleBuffer::addSample()"})," function, which mixes the ",(0,n.jsx)(s.code,{children:"\u30ab\u30ec\u30f3\u30c8\u30b5\u30f3\u30d7\u30eb"})," value with the value alread at index ",(0,n.jsx)(s.code,{children:"\u958b\u59cb\u30b5\u30f3\u30d7\u30eb"}),". This is because the synthesiser will be iterating over all of the voices. It is the responsibility of each voice to mix its output with the current contents of the buffer."]}),"\n",(0,n.jsxs)(s.li,{children:["[7]: When the key has been released the ",(0,n.jsx)(s.code,{children:"\u30c6\u30fc\u30eb\u30aa\u30d5"})," value will be greater than zero. You can see the synthesis algorithm is similar."]}),"\n",(0,n.jsx)(s.li,{children:"[8]: We use a simple exponential decay envelope shape."}),"\n",(0,n.jsxs)(s.li,{children:["[9]: When the ",(0,n.jsx)(s.code,{children:"\u30c6\u30fc\u30eb\u30aa\u30d5"})," value is small we determine that the voice has ended. We ",(0,n.jsx)(s.em,{children:"\u30de\u30b9\u30c8"})," call the ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#a55d1e7a062f8dc9a6cd78526b0da049c",title:"Resets the state of this voice after a sound has finished playing.",children:"SynthesiserVoice::clearCurrentNote()"})," function at this point so that the voice is reset and available to be reused."]}),"\n"]}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsxs)(s.p,{children:["It is ",(0,n.jsx)(s.em,{children:"\u3068\u3066\u3082"})," important that you take note of the ",(0,n.jsx)(s.code,{children:"\u958b\u59cb\u30b5\u30f3\u30d7\u30eb"})," argument. The synthesiser is very likely to call the ",(0,n.jsx)(s.code,{children:"\u30ec\u30f3\u30c0\u30fc\u30cd\u30af\u30b9\u30c8\u30d6\u30ed\u30c3\u30af()"})," function mid-way through one of its output blocks. This is because the notes may start on any sample. These start times are based on the timestamps of the MIDI data received."]})}),"\n",(0,n.jsx)(s.h2,{id:"stopping-a-voice",children:"Stopping a voice"}),"\n",(0,n.jsxs)(s.p,{children:["A voice is stopped by the owning synthersiser calling our ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#ae1faf9289de24cdeb1d42289754601e6",title:"Called to stop a note.",children:"SynthesiserVoice::stopNote()"})," function, which we must override:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void stopNote (float /*velocity*/, bool allowTailOff) override\n    {\n        if (allowTailOff)\n        {\n            if (tailOff == 0.0)\n                tailOff = 1.0\uff1b\n        }\n        else\n        {\n            clearCurrentNote()\uff1b\n            angleDelta = 0.0\uff1b\n        }\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["This may include velocity information from the MIDI note-off message, but in many cases we can ignore this. We may be being asked to stop the voice immediately in which case we call the the ",(0,n.jsx)(s.a,{href:"classSynthesiserVoice.html#a55d1e7a062f8dc9a6cd78526b0da049c",title:"Resets the state of this voice after a sound has finished playing.",children:"SynthesiserVoice::clearCurrentNote()"})," function straight away. Under normal circumstances the synthesiser will allow our voices to end naturally. In our case we have the simple tail-off envelope. We trigger our tail-off by setting our ",(0,n.jsx)(s.code,{children:"\u30c6\u30fc\u30eb\u30aa\u30d5"})," member to ",(0,n.jsx)(s.code,{children:"1.0"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"\u58f0\u90e8\u304c\u7a81\u7136\u59cb\u307e\u3089\u306a\u3044\u3088\u3046\u306b\u3001\u3086\u3063\u304f\u308a\u3057\u305f\u30a2\u30bf\u30c3\u30af\u3092\u52a0\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002"}),"\n",(0,n.jsx)(s.h1,{id:"adding-external-midi-input",children:"Adding external MIDI input"}),"\n",(0,n.jsx)(s.p,{children:"\u30b9\u30af\u30ea\u30fc\u30f3\u4e0a\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3060\u3051\u3067\u306a\u304f\u3001\u5916\u90e8MIDI\u30bd\u30fc\u30b9\u304b\u3089\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3067\u304d\u308b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u3088\u3046\u3002"}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsx)(s.p,{children:"\u304a\u305d\u3089\u304f\u3001\u30e2\u30d0\u30a4\u30eb\u30fb\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f\u306a\u304f\u3001macOS\u3001Windows\u3001Linux\u306a\u3069\u306e\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30fb\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u8a66\u3059\u5fc5\u8981\u304c\u3042\u308b\u3060\u308d\u3046\u3002"})}),"\n",(0,n.jsx)(s.h2,{id:"providing-a-midi-input-to-the-synthaudiosource",children:"Providing a MIDI input to the SynthAudioSource"}),"\n",(0,n.jsxs)(s.p,{children:["First add a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})," object as a member of the ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class. This provides somewhere that MIDI messages can be sent and that the ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class can use them:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"juce::MidiMessageCollector midiCollector\uff1b\n};\n"})}),"\n",(0,n.jsxs)(s.p,{children:["In order to process the timestamps of the MIDI data the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})," class needs to know the audio sample rate. Set this in the ",(0,n.jsx)(s.code,{children:"SynthAudioSource::prepareToPlay()"})," function [10]:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void prepareToPlay (int /*samplesPerBlockExpected*/, double sampleRate) override\n    {\n        synth.setCurrentPlaybackSampleRate (sampleRate)\uff1b\n        midiCollector.reset (sampleRate); // [10].\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Then you can pull any MIDI messages for each block of audio using the ",(0,n.jsx)(s.a,{href:"classMidiMessageCollector.html#ac72b6cf4965e63b90d1a2402b73b1798",title:"Removes all the pending messages from the queue as a buffer.",children:"MidiMessageCollector::removeNextBlockOfMessages()"})," function [11]:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void getNextAudioBlock (const juce::AudioSourceChannelInfo& bufferToFill) override\n    {\n        bufferToFill.clearActiveBufferRegion()\uff1b\n \n        juce::MidiBuffer incomingMidi\uff1b\n        midiCollector.removeNextBlockOfMessages (incomingMidi, bufferToFill.numSamples); // [11].\n \n        keyboardState.processNextMidiBuffer (incomingMidi, bufferToFill.startSample\u3001\n                                             bufferToFill.numSamples, true)\uff1b\n \n        synth.renderNextBlock (*bufferToFill.buffer, incomingMidi\u3001\n                               bufferToFill.startSample, bufferToFill.numSamples)\uff1b\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["We'll need access to this ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})," object from outside the ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class, so add an accessor to the ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," class like this:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"juce::MidiMessageCollector* getMidiCollector()\n    {\n        return &midiCollector\uff1b\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["In our ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class we'll add this ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})," object as a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiInputCallback",title:"Receives incoming messages from a physical MIDI input device.",children:"MidiInputCallback"})," object to our application's ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioDeviceManager",title:"Manages the state of some audio and midi i/o devices.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30c7\u30d0\u30a4\u30b9\u30de\u30cd\u30fc\u30b8\u30e3\u30fc"})," object."]}),"\n",(0,n.jsx)(s.h2,{id:"listing-midi-inputs",children:"Listing MIDI inputs"}),"\n",(0,n.jsxs)(s.p,{children:["To present a list of MIDI input devices to user, we'll use some code from ",(0,n.jsx)(s.a,{href:"../tutorial_handling_midi_events/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\uff1aMIDI\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406"}),". Add some members to our ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"juce::ComboBox midiInputList\uff1b\n    juce::Label midiInputListLabel\uff1b\n    int lastInputIndex = 0\uff1b\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Then add the following code to the ",(0,n.jsx)(s.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," constructor."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:'addAndMakeVisible (midiInputListLabel)\uff1b\n        midiInputListLabel.setText ("MIDI Input:", juce::dontSendNotification)\uff1b\n        midiInputListLabel.attachToComponent (&midiInputList, true)\uff1b\n \n        auto midiInputs = juce::MidiInput::getAvailableDevices()\uff1b\n        addAndMakeVisible (midiInputList)\uff1b\n        midiInputList.setTextWhenNoChoicesAvailable ("No MIDI Inputs Enabled")\uff1b\n \n        juce::StringArray midiInputNames\uff1b\n        for (auto input : midiInputs)\n            midiInputNames.add (input.name)\uff1b\n \n        midiInputList.addItemList (midiInputNames, 1)\uff1b\n        midiInputList.onChange = [this] { setMidiInput (midiInputList.getSelectedItemIndex()); }\uff1b\n \n        for (auto input : midiInputs)\n        {\n            if (deviceManager.isMidiInputDeviceEnabled (input.identifier))\n            {\n                setMidiInput (midiInputs.indexOf (input))\uff1b\n                break\uff1b\n            }\n        }\n \n        if (midiInputList.getSelectedId() == 0)\n            setMidiInput (0)\uff1b\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Add the ",(0,n.jsx)(s.code,{children:"setMidiInput()"})," function that is called in the code above:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void setMidiInput (int index)\n    {\n        auto list = juce::MidiInput::getAvailableDevices()\uff1b\n \n        deviceManager.removeMidiInputDeviceCallback (list[lastInputIndex].identifier\u3001\n                                                     synthAudioSource.getMidiCollector()); // [12].\n \n        auto newInput = list[index]\uff1b\n \n        if (! deviceManager.isMidiInputDeviceEnabled (newInput.identifier))\n            deviceManager.setMidiInputDeviceEnabled (newInput.identifier, true)\uff1b\n \n        deviceManager.addMidiInputDeviceCallback (newInput.identifier, synthAudioSource.getMidiCollector()); // [13].\n        midiInputList.setSelectedId (index + 1, juce::dontSendNotification)\uff1b\n \n        lastInputIndex = index\uff1b\n    }\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Notice that we add the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiMessageCollector",title:"Collects incoming realtime MIDI messages and turns them into blocks suitable for processing by a bloc...",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8\u30b3\u30ec\u30af\u30bf"})," object from our ",(0,n.jsx)(s.code,{children:"\u30b7\u30f3\u30bb\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," object as a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiInputCallback",title:"Receives incoming messages from a physical MIDI input device.",children:"MidiInputCallback"})," object [13] for the specified MIDI input device. We also need to remove the previous ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiInputCallback",title:"Receives incoming messages from a physical MIDI input device.",children:"MidiInputCallback"})," object for the previously selected MIDI input device if the user changes the selected device using the combo-box [12]."]}),"\n",(0,n.jsxs)(s.p,{children:["We need to position this ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classComboBox",title:"A component that lets the user choose from a drop-down list of choices.",children:"\u30b3\u30f3\u30dc\u30dc\u30c3\u30af\u30b9"})," object and adjust the position of the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classMidiKeyboardComponent",title:"A component that displays a piano keyboard, whose notes can be clicked on.",children:"MidiKeyboardComponent"})," object in our ",(0,n.jsx)(s.code,{children:"\u30ea\u30b5\u30a4\u30ba"})," function:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"void resized() override\n    {\n        midiInputList .setBounds (200, 10, getWidth() - 210, 20)\uff1b\n        keyboardComponent.setBounds (10, 40, getWidth() - 20, getHeight() - 50)\uff1b\n    }\n"})}),"\n",(0,n.jsx)(s.p,{children:"\u3082\u3046\u4e00\u5ea6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3059\uff1a"}),"\n",(0,n.jsx)(o.A,{src:"https://docs.juce.com/master/tutorial_synth_using_midi_input_screenshot2.png",caption:"The application window showing the MIDI input device list"}),"\n",(0,n.jsx)(s.p,{children:"\u3082\u3061\u308d\u3093\u3001\u8868\u793a\u3055\u308c\u308b\u30c7\u30d0\u30a4\u30b9\u306f\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsxs)(s.p,{children:["The source code for this modified version of the application can be found in the ",(0,n.jsx)(s.code,{children:"SynthUsingMidiInputTutorial_02.h"})," file of the demo project."]})}),"\n",(0,n.jsx)(s.p,{children:"\u5404\u30dc\u30a4\u30b9\u306e\u30c6\u30fc\u30eb\u30aa\u30d5\u306e\u9577\u3055\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u30a2\u30bf\u30c3\u30af\u306e\u9577\u3055\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,n.jsx)(s.h1,{id:"summary",children:"Summary"}),"\n",(0,n.jsxs)(s.p,{children:["This tutorial has introduced the ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," class. After reading this tutorial you should be able to:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Set up a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," class within an ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classAudioSource",title:"Base class for objects that can produce a continuous stream of audio.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30bd\u30fc\u30b9"})," subclass for generating audio."]}),"\n",(0,n.jsxs)(s.li,{children:["Create appropriate ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserVoice",title:"Represents a voice that a Synthesiser can use to play a SynthesiserSound.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30fb\u30dc\u30a4\u30b9"})," and ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiserSound",title:"Describes one of the sounds that a Synthesiser can play.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u30b5\u30a6\u30f3\u30c9"})," classes and add them to a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," object."]}),"\n",(0,n.jsxs)(s.li,{children:["Send MIDI message from an on-screen keyboard and external MIDI sources to a ",(0,n.jsx)(s.a,{href:"https://docs.juce.com/master/classSynthesiser",title:"Base class for a musical device that can play sounds.",children:"\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc"})," object."]}),"\n"]}),"\n",(0,n.jsx)(s.h1,{id:"see-also",children:"See also"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_handling_midi_events/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\uff1aMIDI\u30a4\u30d9\u30f3\u30c8\u306e\u51e6\u7406"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_simple_synth_noise/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30db\u30ef\u30a4\u30c8\u30ce\u30a4\u30ba\u30fb\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f5c\u308b"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_sine_synth/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30b5\u30a4\u30f3\u6ce2\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_synth_db_level_control/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30c7\u30b7\u30d9\u30eb\u3092\u4f7f\u3063\u3066\u30aa\u30fc\u30c7\u30a3\u30aa\u30ec\u30d9\u30eb\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_synth_level_control/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30aa\u30fc\u30c7\u30a3\u30aa\u30ec\u30d9\u30eb\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"../tutorial_wavetable_synth/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30a6\u30a7\u30fc\u30d6\u30c6\u30fc\u30d6\u30eb\u30b7\u30f3\u30bb\u30b7\u30b9"})}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},3449:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(4848);function i(e){let{src:s,caption:t,alt:i,width:o,height:a}=e;return(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:s,alt:i||t,width:o,height:a}),(0,n.jsx)("figcaption",{children:(0,n.jsx)("b",{children:t})})]})}},6378:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(4848);function i(e){let{path:s}=e;return(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"https://docs.juce.com/master/"+s,children:"\ud83d\udcda Source Page"})})}},8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>c});var n=t(6540);const i={},o=n.createContext(i);function a(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);