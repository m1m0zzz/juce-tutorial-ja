"use strict";(self.webpackChunkjuce_tutorial_ja=self.webpackChunkjuce_tutorial_ja||[]).push([[6716],{7894:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var o=n(4848),t=n(8453),s=n(3449);n(6378);const r={title:"\u57fa\u672c\u7684\u306a\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f5c\u6210 \u30d1\u30fc\u30c82",sidebar_position:4},d="\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aAudio/MIDI\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b, \u30d1\u30fc\u30c82: \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0",a={id:"getting-started/tutorial_code_basic_plugin",title:"\u57fa\u672c\u7684\u306a\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f5c\u6210 \u30d1\u30fc\u30c82",description:"This tutorial follows on from \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aAudio/MIDI\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b, \u30d1\u30fc\u30c81\uff1a\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7, and will talk through starting from a clean project and ending up with a fully functioning, if somewhat simple, plug-in that can react to incoming MIDI notes.",source:"@site/docs/getting-started/tutorial_code_basic_plugin.mdx",sourceDirName:"getting-started",slug:"/getting-started/tutorial_code_basic_plugin",permalink:"/juce-tutorial-ja/getting-started/tutorial_code_basic_plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/getting-started/tutorial_code_basic_plugin.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"\u57fa\u672c\u7684\u306a\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f5c\u6210 \u30d1\u30fc\u30c82",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\u57fa\u672c\u7684\u306a\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f5c\u6210 \u30d1\u30fc\u30c81",permalink:"/juce-tutorial-ja/getting-started/tutorial_create_projucer_basic_plugin"},next:{title:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u9069\u3057\u305fProjucer\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u9078\u629e",permalink:"/juce-tutorial-ja/getting-started/tutorial_choosing_projucer_template"}},l={},c=[{value:"Create a simple GUI control",id:"create-a-simple-gui-control",level:2},{value:"Pass control information to the processor class",id:"pass-control-information-to-the-processor-class",level:2},{value:"Modify MIDI notes",id:"modify-midi-notes",level:2}];function u(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.h1,{id:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aaudiomidi\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b-\u30d1\u30fc\u30c82-\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aAudio/MIDI\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b, \u30d1\u30fc\u30c82: \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0"}),"\n",(0,o.jsxs)(i.p,{children:["This tutorial follows on from ",(0,o.jsx)(i.a,{href:"../tutorial_create_projucer_basic_plugin/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aAudio/MIDI\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b, \u30d1\u30fc\u30c81\uff1a\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7"}),", and will talk through starting from a clean project and ending up with a fully functioning, if somewhat simple, plug-in that can react to incoming MIDI notes."]}),"\n",(0,o.jsx)(i.p,{children:"\u30ec\u30d9\u30eb Intermediate"}),"\n",(0,o.jsx)(i.p,{children:"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0 Windows, macOS, Linux"}),"\n",(0,o.jsx)(i.p,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u5f62\u5f0f\uff1a VST, VST3, AU, Standalone"}),"\n",(0,o.jsxs)(i.p,{children:["\u30af\u30e9\u30b9\uff1a ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classAudioProcessorEditor",title:"Base class for the component that acts as the GUI for an AudioProcessor.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30a8\u30c7\u30a3\u30bf\u30fc"}),", ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classAudioProcessor",title:"Base class for audio processing classes or plugins.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30ed\u30bb\u30c3\u30b5"}),", ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classSlider",title:"A slider control for changing a value.",children:"\u30b9\u30e9\u30a4\u30c0\u30fc"}),", ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classMidiMessage",title:"Encapsulates a MIDI message.",children:"\u30df\u30c7\u30a3\u30e1\u30c3\u30bb\u30fc\u30b8"}),", ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classMidiBuffer",title:"Holds a sequence of time-stamped midi events.",children:"\u30df\u30c7\u30a3\u30d0\u30c3\u30d5\u30a1"})]}),"\n",(0,o.jsx)(i.h1,{id:"getting-started",children:"Getting started"}),"\n",(0,o.jsxs)(i.p,{children:["Launch the Projucer and create a new audio plug-in project with the name ",(0,o.jsx)(i.strong,{children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3"}),". If you don't remember how to do that, please refer to ",(0,o.jsx)(i.a,{href:"../tutorial_new_projucer_project/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebProjucer\u30d1\u30fc\u30c81\uff1aProjucer\u3092\u59cb\u3081\u308b"}),"."]}),"\n",(0,o.jsx)(i.h1,{id:"orientation",children:"Orientation"}),"\n",(0,o.jsxs)(i.p,{children:["A newly-created audio plug-in project contains two main classes: ",(0,o.jsx)(i.code,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc"})," handles the audio and MIDI IO and processing logic, and ",(0,o.jsx)(i.code,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u30a8\u30c7\u30a3\u30bf"})," handles any on screen GUI controls or visualisations."]}),"\n",(0,o.jsx)(i.p,{children:"\u3053\u306e2\u3064\u306e\u9593\u3067\u60c5\u5831\u3092\u3084\u308a\u53d6\u308a\u3059\u308b\u5834\u5408\u3001\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u3092\u30a8\u30c7\u30a3\u30bf\u306e\u89aa\u3068\u8003\u3048\u308b\u306e\u304c\u30d9\u30b9\u30c8\u3067\u3059\u3002\u30d7\u30e9\u30b0\u30a4\u30f3\u30fb\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u306f1\u3064\u3060\u3051\u3067\u3059\u304c\u3001\u30a8\u30c7\u30a3\u30bf\u30fc\u306f\u8907\u6570\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\u5404\u30a8\u30c7\u30a3\u30bf\u30fc\u306f\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u3078\u306e\u53c2\u7167\u3092\u6301\u3061\u3001\u30aa\u30fc\u30c7\u30a3\u30aa\u30b9\u30ec\u30c3\u30c9\u306e\u60c5\u5831\u3084\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7de8\u96c6\u3057\u305f\u308a\u3001\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30fb\u30b9\u30ec\u30c3\u30c9\u306b\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u305f\u308a\u3001\u53d6\u5f97\u3057\u305f\u308a\u3059\u308b\u306e\u306f\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u4ed5\u4e8b\u3067\u3042\u308a\u3001\u305d\u306e\u9006\u306f\u3042\u308a\u307e\u305b\u3093\u3002"}),"\n",(0,o.jsxs)(i.p,{children:["The main function we will be editing in the ",(0,o.jsx)(i.code,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc.cpp"})," file is the ",(0,o.jsx)(i.code,{children:"processBlock()"})," method. This receives and produces both audio and MIDI data to the plug-in output. The main function we will change in the ",(0,o.jsx)(i.code,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u30a8\u30c7\u30a3\u30bf\u30fc.cpp"})," file is the constructor, where we initialise and set up our window and GUI objects, and also the ",(0,o.jsx)(i.code,{children:"\u30da\u30a4\u30f3\u30c8"})," method where we can draw extra controls and custom GUI components."]}),"\n",(0,o.jsxs)(i.p,{children:["The editor constructor currently has one method call \u2014 ",(0,o.jsx)(i.code,{children:"\u30bb\u30c3\u30c8\u30b5\u30a4\u30ba (400, 300)"})," \u2014 which sets the size of our plug-in window. Let's make a smaller window of ",(0,o.jsx)(i.code,{children:"(200, 200)"})," for this simple application."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"TutorialPluginAudioProcessorEditor::TutorialPluginAudioProcessorEditor (TutorialPluginAudioProcessor& p)\n    : AudioProcessorEditor (&p), audioProcessor (p)\n{\n    // \u3053\u3053\u3067\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a8\u30c7\u30a3\u30bf\u30fb\u30b5\u30a4\u30ba\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n    setSize (200, 200)\uff1b\n}\nAudioProcessor\u306eGUI\u3068\u3057\u3066\u52d5\u4f5c\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306eAudioProcessorEditorBase\u30af\u30e9\u30b9\u3067\u3059\u3002\u5b9a\u7fa9 juce_AudioProcessorEditor.h:46\n"})}),"\n",(0,o.jsx)(i.h2,{id:"create-a-simple-gui-control",children:"Create a simple GUI control"}),"\n",(0,o.jsx)(i.p,{children:"MIDI\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u97f3\u91cf\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u306e\u30b9\u30e9\u30a4\u30c0\u30fc\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002"}),"\n",(0,o.jsxs)(i.p,{children:["Create a new ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classSlider",title:"A slider control for changing a value.",children:"\u30b9\u30e9\u30a4\u30c0\u30fc"})," object in the Editor header file called ",(0,o.jsx)(i.code,{children:"\u30df\u30c7\u30a3\u30dc\u30ea\u30e5\u30fc\u30e0"})," [1]:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"class TutorialPluginAudioProcessorEditor : public juce::AudioProcessorEditor\n{\npublic\uff1a\n    TutorialPluginAudioProcessorEditor (TutorialPluginAudioProcessor&)\uff1b\n    ~TutorialPluginAudioProcessorEditor()\uff1b\n \n    //===================================================================\n    void paint (juce::Graphics&) override\uff1b\n    void resized() override\uff1b\n \nprivate\uff1a\n    \u3053\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306f\u3001\u30a8\u30c7\u30a3\u30bf\u304c // \u3053\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30bb\u30c3\u30b5\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u7c21\u5358\u306a\u65b9\u6cd5\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n    // \u30d7\u30ed\u30bb\u30c3\u30b5\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u7c21\u5358\u306a\u65b9\u6cd5\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n    TutorialPluginAudioProcessor& audioProcessor\uff1b\n \n    juce::Slider midiVolume; // [1].\n \n    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (TutorialPluginAudioProcessorEditor).\n};\nJUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR#define JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR(className)this is a shorthand way of writing both a JUCE_DECLARE_NON_COPYABLE and JUCE_LEAK_DETECTOR macro for ...Definition juce_PlatformDefs.h:245\n"})}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classAudioProcessorEditor",title:"Base class for the component that acts as the GUI for an AudioProcessor.",children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30a8\u30c7\u30a3\u30bf\u30fc"})," plays the same role in an Audio Plug-in that the ",(0,o.jsx)(i.em,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," has in a standalone app. See ",(0,o.jsx)(i.a,{href:"../tutorial_main_component/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30e1\u30a4\u30f3\u30fb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"}),"."]})}),"\n",(0,o.jsxs)(i.p,{children:["We can set the properties of this slider with various functions in the editor constructor. We must also call ",(0,o.jsx)(i.code,{children:"addAndMakeVisible (&midiVolume)"})," to attach our slider to the editor. There are many different slider styles and parameters to use and experiment with in your own project. For this tutorial adjust the slider parameters such that your editor constructor looks like this:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:'TutorialPluginAudioProcessorEditor::TutorialPluginAudioProcessorEditor (TutorialPluginAudioProcessor& p)\n    : AudioProcessorEditor (&p), audioProcessor (p)\n{\n    // \u3053\u3053\u3067\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a8\u30c7\u30a3\u30bf\u30fb\u30b5\u30a4\u30ba\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n    setSize (200, 200)\uff1b\n \n    // \u3053\u308c\u3089\u306f\u3001\u30b9\u30e9\u30a4\u30c0\u30fc\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5b9a\u7fa9\u3057\u307e\u3059\n    midiVolume.setSliderStyle (juce::Slider::LinearBarVertical)\uff1b\n    midiVolume.setRange (0.0, 127.0, 1.0)\uff1b\n    midiVolume.setTextBoxStyle (juce::Slider::NoTextBox, false, 90, 0)\uff1b\n    midiVolume.setPopupDisplayEnabled (true, false, this)\uff1b\n    midiVolume.setTextValueSuffix (" Volume")\uff1b\n    midiVolume.setValue(1.0)\uff1b\n \n    // \u3053\u306e\u95a2\u6570\u306f\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u30a8\u30c7\u30a3\u30bf\u30fc\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n    addAndMakeVisible (&midiVolume)\uff1b\n}\n'})}),"\n",(0,o.jsxs)(i.p,{children:["JUCE windows have a method called ",(0,o.jsx)(i.code,{children:"\u30ea\u30b5\u30a4\u30ba"})," that is called once at the initialisation of the window and every time the window is resized by the user (if resizing is enabled). This is a good place to set the size and position of our sliders (and other GUI components) so they can be positioned relative to the window bounds."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"void TutorialPluginAudioProcessorEditor::resized()\n{\n    // \u5f15\u6570 (x, y, width, height) \u3067\u30b9\u30e9\u30a4\u30c0\u30fc\u306e\u4f4d\u7f6e\u3068\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n    midiVolume.setBounds (40, 30, 20, getHeight() - 60)\uff1b\n}\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Lets also change the ",(0,o.jsx)(i.code,{children:"\u300c\u30cf\u30ed\u30fc\u30fb\u30ef\u30fc\u30eb\u30c9"})," text to ",(0,o.jsx)(i.code,{children:"\u300c\u30df\u30c7\u30a3\u30fb\u30dc\u30ea\u30e5\u30fc\u30e0"})," in the ",(0,o.jsx)(i.code,{children:"\u30da\u30a4\u30f3\u30c8"})," function and move it to the top. This function is where all custom shapes and GUI elements are drawn to the window."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:'void TutorialPluginAudioProcessorEditor::paint (juce::Graphics& g)\n{\n    // \u30a6\u30a3\u30f3\u30c9\u30a6\u5168\u4f53\u3092\u767d\u304f\u5857\u308a\u3064\u3076\u3059\n    g.fillAll (juce::Colours::white)\uff1b\n \n    // \u73fe\u5728\u306e\u63cf\u753b\u8272\u3092\u9ed2\u306b\u8a2d\u5b9a\u3059\u308b\n    g.setColour (juce::Colours::black)\uff1b\n \n    // \u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\u3057\u3001\u30c6\u30ad\u30b9\u30c8\u3092\u753b\u9762\u306b\u63cf\u753b\u3059\u308b\n    g.setFont (15.0f)\uff1b\n \n    g.drawFittedText ("Midi Volume", 0, 0, getWidth(), 30, juce::Justification::centred, 1)\uff1b\n'})}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:["You can learn more about Components and their methods ",(0,o.jsx)(i.code,{children:"\u30da\u30a4\u30f3\u30c8"})," and ",(0,o.jsx)(i.code,{children:"\u30ea\u30b5\u30a4\u30ba"})," in ",(0,o.jsx)(i.a,{href:"../tutorial_graphics_class/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebGraphics\u30af\u30e9\u30b9"})," and ",(0,o.jsx)(i.a,{href:"../tutorial_component_parents_children/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u89aa\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"}),"."]})}),"\n",(0,o.jsx)(i.p,{children:"\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30db\u30b9\u30c8\u30fb\u30a8\u30c7\u30a3\u30bf\u30fc\u4e0a\u3067\u6b21\u306e\u3088\u3046\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u4f5c\u6210\u3055\u308c\u308b\u306f\u305a\u3067\u3059\uff1a"}),"\n",(0,o.jsx)(s.A,{src:"https://docs.juce.com/master/tutorial_code_basic_plugin_1.png",caption:""}),"\n",(0,o.jsx)(i.h2,{id:"pass-control-information-to-the-processor-class",children:"Pass control information to the processor class"}),"\n",(0,o.jsx)(i.p,{children:"\u3053\u308c\u3067\u3001\u8abf\u6574\u3067\u304d\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304c\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u306b\u306f\u4f55\u3082\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3067\u304d\u307e\u305b\u3093\u3002\u5165\u529b\u3055\u308c\u308bMIDI\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30c8\u3057\u3066\u3001\u30ce\u30fc\u30c8\u30fb\u30aa\u30f3\u30fb\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b9\u30e9\u30a4\u30c0\u30fc\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u7f6e\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30fb\u30b9\u30ec\u30c3\u30c9\u3067MIDI\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b\u305f\u3081\u306b\u30b9\u30e9\u30a4\u30c0\u30fc\u306e\u5024\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30fb\u30b9\u30ec\u30c3\u30c9\u306b\u65b0\u3057\u3044\u5909\u6570\u3092\u4f5c\u6210\u3057\u3001\u30b9\u30e9\u30a4\u30c0\u30fc\u3092\u4f7f\u3063\u3066\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,o.jsxs)(i.p,{children:["Create a new public float variable called ",(0,o.jsx)(i.code,{children:"\u30ce\u30fc\u30c8\u30aa\u30f3\u30d9\u30eb"})," in the processor class header. This is the variable that we will set with the slider."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"public\uff1a\n    float noteOnVel\uff1b\n"})}),"\n",(0,o.jsx)(i.p,{children:"\u30b9\u30e9\u30a4\u30c0\u30fc\u304c\u5909\u66f4\u3055\u308c\u308b\u305f\u3073\u306b\u3053\u306e\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u30b9\u30e9\u30a4\u30c0\u30fc\u30fb\u30ea\u30b9\u30ca\u30fc\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\u3069\u306e\u30af\u30e9\u30b9\u3067\u3082\u30b9\u30e9\u30a4\u30c0\u30fc\u30fb\u30ea\u30b9\u30ca\u30fc\u306e\u6a5f\u80fd\u3092\u7d99\u627f\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u76ee\u7684\u3067\u306f\u3001\u3053\u306e\u6a5f\u80fd\u3092\u30a8\u30c7\u30a3\u30bf\u30fc\u30fb\u30af\u30e9\u30b9\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002"}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:["For a more in-depth description of listeners please see ",(0,o.jsx)(i.a,{href:"../tutorial_listeners_and_broadcasters/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc"}),"."]})}),"\n",(0,o.jsx)(i.p,{children:"Add the inheritance [2] and the default callback function [3] so the editor class looks like this:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"class TutorialPluginAudioProcessorEditor : public juce::AudioProcessorEditor\u3001\n                                           private juce::Slider::Listener // [2].\n{\npublic\uff1a\n    TutorialPluginAudioProcessorEditor (TutorialPluginAudioProcessor&)\uff1b\n    ~TutorialPluginAudioProcessorEditor()\uff1b\n \n    //==================================================================\n    // \u3053\u308c\u306f\u6a19\u6e96\u7684\u306a Juce \u306e paint \u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n    void paint (juce::Graphics& g) override\uff1b\n \n    void resized() override\uff1b\n \nprivate\uff1a\n    void sliderValueChanged (juce::Slider* slider) override; // [3].\n \n    //==================================================================\n    \u3053\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306f\u3001\u30a8\u30c7\u30a3\u30bf\u304c // \u30d7\u30ed\u30bb\u30c3\u30b5\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u7c21\u5358\u306a\u65b9\u6cd5\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n    // \u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30bb\u30c3\u30b5\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u7c21\u5358\u306a\u65b9\u6cd5\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n    TutorialPluginAudioProcessor& audioProcessor\uff1b\n \n    juce::Slider midiVolume\uff1b\n \n    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (TutorialPluginAudioProcessorEditor).\n};\n\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u30ed\u30fc\u30eb::slider@ slider\n"})}),"\n",(0,o.jsx)(i.p,{children:"\u6b21\u306b\u3001\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30fb\u30b9\u30e9\u30a4\u30c0\u30fc\u306b\u30b9\u30e9\u30a4\u30c0\u30fc\u30fb\u30ea\u30b9\u30ca\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff1a"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"TutorialPluginAudioProcessorEditor::TutorialPluginAudioProcessorEditor (TutorialPluginAudioProcessor& p)\n    : AudioProcessorEditor (&p), audioProcessor (p)\n{\n    // ...\n \n    // \u30ea\u30b9\u30ca\u30fc\u3092\u30b9\u30e9\u30a4\u30c0\u30fc\u306b\u8ffd\u52a0\u3059\u308b\n    midiVolume.addListener (this)\uff1b\n}\n"})}),"\n",(0,o.jsx)(i.p,{children:"...\u305d\u3057\u3066\u3001\u30d1\u30d6\u30ea\u30c3\u30af\u30fb\u30d7\u30ed\u30bb\u30c3\u30b5\u30fb\u30dc\u30ea\u30e5\u30fc\u30e0\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u30ea\u30b9\u30ca\u30fc\u95a2\u6570\u3092\u633f\u5165\u3059\u308b\uff1a"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"void TutorialPluginAudioProcessorEditor::sliderValueChanged (juce::Slider* slider)\n{\n    audioProcessor.noteOnVel = midiVolume.getValue()\uff1b\n}\n"})}),"\n",(0,o.jsx)(i.p,{children:"\u3053\u308c\u3067\u3001\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u30fb\u30af\u30e9\u30b9\u306e\u5909\u6570\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3059\u308b\u30b9\u30e9\u30a4\u30c0\u30fc\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u3053\u306e\u30d7\u30ed\u30bb\u30c3\u30b5\u5909\u6570\u3092\u4f7f\u3063\u3066MIDI\u30c7\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002"}),"\n",(0,o.jsx)(i.h2,{id:"modify-midi-notes",children:"Modify MIDI notes"}),"\n",(0,o.jsxs)(i.p,{children:["The ",(0,o.jsx)(i.code,{children:"processBlock()"})," method in the processor class receives and produces both MIDI and audio buffers in real time. We are going to iterate through the midi buffer to intercept signals of ",(0,o.jsx)(i.code,{children:"\u30ce\u30fc\u30c8\u30aa\u30f3"})," type and set their velocity to the value of our slider."]}),"\n",(0,o.jsxs)(i.p,{children:["The MIDI messages are all passed through this function. To alter the MIDI as it passes through we create a new ",(0,o.jsx)(i.a,{href:"https://docs.juce.com/master/classMidiBuffer",title:"Holds a sequence of time-stamped midi events.",children:"\u30df\u30c7\u30a3\u30d0\u30c3\u30d5\u30a1"})," object called ",(0,o.jsx)(i.code,{children:"\u52a0\u5de5\u30df\u30c7\u30a3"})," and append our modified MIDI signals to this new buffer before swapping it with the original at the end (this avoids direct modification problems). Remove the current code in the ",(0,o.jsx)(i.code,{children:"processBlock()"})," method (this handles the audio buffer, which we do not need for this tutorial) and replace it with the code below."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"void TutorialPluginAudioProcessor::processBlock (juce::AudioBuffer\u30d0\u30c3\u30d5\u30a1, juce::MidiBuffer& midiMessages)\n{\n    buffer.clear()\uff1b\n \n    juce::MidiBuffer processedMidi\uff1b\n \n    for (const auto metadata : midiMessages)\n    {\n        auto message = metadata.getMessage()\uff1b\n        const auto time = metadata.samplePosition\uff1b\n \n        if (message.isNoteOn())\n        {\n            message = juce::MidiMessage::noteOn (message.getChannel()\u3001\n                                                 message.getNoteNumber()\u3001\n                                                 (juce::uint8) noteOnVel)\uff1b\n        }\n \n        processedMidi.addEvent (message, time)\uff1b\n    }\n \n    midiMessages.swapWith (processedMidi)\uff1b\n}\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Run the plug-in in the host environment and you will see that all MIDI note on signals are coming through our plug-in have the value set with our slider. The ",(0,o.jsx)(i.code,{children:"\u3082\u3057"})," statement above can be also used to modify and apply various transformations and effects to other types of incoming MIDI signals. With these methods you can build more complex effects and GUIs."]}),"\n",(0,o.jsx)(i.p,{children:"\u30dc\u30bf\u30f3\u3084\u30b9\u30e9\u30a4\u30c0\u306a\u3069\u306e\u4ed6\u306eGUI\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u8a66\u3057\u3066\u307f\u305f\u308a\u3001JUCE\u306e\u6a5f\u80fd\u3092\u4f53\u9a13\u3059\u308b\u305f\u3081\u306bJUCE DemoRunner\u3092\u30c1\u30a7\u30c3\u30af\u3057\u305f\u308a\u3001\u8a73\u7d30\u306b\u3064\u3044\u3066\u306fAPI\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:["Generating audio using the incoming MIDI notes will be covered in a future tutorial (see ",(0,o.jsx)(i.a,{href:"../tutorial_synth_using_midi_input/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebMIDI\u30b7\u30f3\u30bb\u30b5\u30a4\u30b6\u30fc\u3092\u4f5c\u308b"}),"). For now, please have a look at the ",(0,o.jsx)(i.code,{children:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u30c7\u30e2"}),", which is located in ",(0,o.jsx)(i.code,{children:"JUCE/examples/Plugins"}),"."]})}),"\n",(0,o.jsx)(i.h1,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(i.p,{children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u8aad\u3081\u3070\u3001\u6b21\u306e\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3060\uff1a"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"\u57fa\u672c\u7684\u306aGUI\u3092\u5099\u3048\u305f\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3001"}),"\n",(0,o.jsx)(i.li,{children:"\u30d7\u30e9\u30b0\u30a4\u30f3\u306bMIDI\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\u3055\u305b\u307e\u3059\u3002"}),"\n"]}),"\n",(0,o.jsx)(i.h1,{id:"see-also",children:"See also"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_new_projucer_project/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebProjucer\u30d1\u30fc\u30c81\uff1aProjucer\u3092\u59cb\u3081\u308b"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_create_projucer_basic_plugin/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u57fa\u672c\u7684\u306aAudio/MIDI\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308b, \u30d1\u30fc\u30c81\uff1a\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_plugin_examples/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f8b"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_audio_bus_layouts/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u9069\u5207\u306a\u30d0\u30b9\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u8a2d\u5b9a\u3059\u308b"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_main_component/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30e1\u30a4\u30f3\u30fb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_graphics_class/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebGraphics\u30af\u30e9\u30b9"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_component_parents_children/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u89aa\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})}),"\n",(0,o.jsx)(i.li,{children:(0,o.jsx)(i.a,{href:"../tutorial_listeners_and_broadcasters/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},3449:(e,i,n)=>{n.d(i,{A:()=>t});var o=n(4848);function t(e){let{src:i,caption:n,alt:t,width:s,height:r}=e;return(0,o.jsxs)("figure",{children:[(0,o.jsx)("img",{src:i,alt:t||n,width:s,height:r}),(0,o.jsx)("figcaption",{children:(0,o.jsx)("b",{children:n})})]})}},6378:(e,i,n)=>{n.d(i,{A:()=>t});var o=n(4848);function t(e){let{path:i}=e;return(0,o.jsx)("p",{children:(0,o.jsx)("a",{href:"https://docs.juce.com/master/"+i,children:"\ud83d\udcda Source Page"})})}},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>d});var o=n(6540);const t={},s=o.createContext(t);function r(e){const i=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:i},e.children)}}}]);