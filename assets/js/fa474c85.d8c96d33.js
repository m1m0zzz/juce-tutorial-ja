"use strict";(self.webpackChunkjuce_tutorial_ja=self.webpackChunkjuce_tutorial_ja||[]).push([[8257],{2163:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>h});var s=n(4848),i=n(8453),a=n(3449);n(6378);const c={title:"\u30ea\u30b9\u30ca\u30fc\u3068\u653e\u9001\u5c40",sidebar_position:7},o="\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc",r={id:"interface-design/tutorial_listeners_and_broadcasters",title:"\u30ea\u30b9\u30ca\u30fc\u3068\u653e\u9001\u5c40",description:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001JUCE\u306e\u91cd\u8981\u306a\u30b3\u30f3\u30bb\u30d7\u30c8\u3067\u3042\u308b\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30dc\u30bf\u30f3\u306e\u30af\u30ea\u30c3\u30af\u306b\u5fdc\u7b54\u3059\u308b\u7c21\u5358\u306a\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\u3092\u901a\u3057\u3066\u3001\u3053\u306e\u6982\u5ff5\u3092\u898b\u3066\u3044\u304d\u307e\u3059\u3002",source:"@site/docs/interface-design/tutorial_listeners_and_broadcasters.mdx",sourceDirName:"interface-design",slug:"/interface-design/tutorial_listeners_and_broadcasters",permalink:"/juce-tutorial-ja/interface-design/tutorial_listeners_and_broadcasters",draft:!1,unlisted:!1,editUrl:"https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/interface-design/tutorial_listeners_and_broadcasters.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"\u30ea\u30b9\u30ca\u30fc\u3068\u653e\u9001\u5c40",sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"FlexBox\u3068Grid\u3092\u4f7f\u3063\u305f\u30ec\u30b9\u30dd\u30f3\u30b7\u30d6GUI\u30ec\u30a4\u30a2\u30a6\u30c8",permalink:"/juce-tutorial-ja/interface-design/tutorial_flex_box_grid"},next:{title:"\u30b9\u30e9\u30a4\u30c0\u30fc\u30af\u30e9\u30b9",permalink:"/juce-tutorial-ja/interface-design/tutorial_slider_values"}},l={},h=[{value:"\u306f\u3058\u3081\u308b",id:"\u306f\u3058\u3081\u308b",level:2},{value:"Adding a listener base class",id:"adding-a-listener-base-class",level:2},{value:"Declaring the listener&#39;s callback",id:"declaring-the-listeners-callback",level:2},{value:"Implementing the listener callback",id:"implementing-the-listener-callback",level:2},{value:"Registering as a listener with the broadcaster",id:"registering-as-a-listener-with-the-broadcaster",level:2},{value:"Deregistering as a listener with the broadcaster",id:"deregistering-as-a-listener-with-the-broadcaster",level:3},{value:"Simplifying the Button callback",id:"simplifying-the-button-callback",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc"}),"\n",(0,s.jsx)(t.p,{children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001JUCE\u306e\u91cd\u8981\u306a\u30b3\u30f3\u30bb\u30d7\u30c8\u3067\u3042\u308b\u30ea\u30b9\u30ca\u30fc\u3068\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30dc\u30bf\u30f3\u306e\u30af\u30ea\u30c3\u30af\u306b\u5fdc\u7b54\u3059\u308b\u7c21\u5358\u306a\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\u3092\u901a\u3057\u3066\u3001\u3053\u306e\u6982\u5ff5\u3092\u898b\u3066\u3044\u304d\u307e\u3059\u3002"}),"\n",(0,s.jsx)(t.p,{children:"\u30ec\u30d9\u30eb Beginner"}),"\n",(0,s.jsx)(t.p,{children:"\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0 Windows, macOS, Linux, iOS, Android"}),"\n",(0,s.jsxs)(t.p,{children:["\u30af\u30e9\u30b9\uff1a ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTime",title:"Holds an absolute date and time.",children:"\u6642\u9593"})]}),"\n",(0,s.jsx)(t.h2,{id:"\u306f\u3058\u3081\u308b",children:"\u306f\u3058\u3081\u308b"}),"\n",(0,s.jsxs)(t.p,{children:["Download the demo project for this tutorial here: ",(0,s.jsx)(t.a,{href:"/tutorials/PIPs/ListenersAndBroadcastersTutorial.zip",children:"\u30d4\u30c3\u30d7"})," | ",(0,s.jsx)(t.a,{href:"/tutorials/ZIPs/ListenersAndBroadcastersTutorial.zip",children:"\u30b8\u30c3\u30d7"}),". Unzip the project and open the first header file in the Projucer."]}),"\n",(0,s.jsxs)(t.p,{children:["If you need help with this step, see ",(0,s.jsx)(t.a,{href:"../tutorial_new_projucer_project/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebProjucer\u30d1\u30fc\u30c81\uff1aProjucer\u3092\u59cb\u3081\u308b"}),"."]}),"\n",(0,s.jsx)(t.h1,{id:"the-demo-project",children:"The demo project"}),"\n",(0,s.jsx)(t.p,{children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u30c7\u30e2\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u30011\u3064\u306e\u30dc\u30bf\u30f3\u30681\u3064\u306e\u30e9\u30d9\u30eb\u3092\u6301\u3064\u30b7\u30f3\u30d7\u30eb\u306a\u30e6\u30fc\u30b6\u30fc\u30fb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306f\u6b21\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306b\u4f3c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\uff1a"}),"\n",(0,s.jsx)(a.A,{src:"https://docs.juce.com/master/tutorial_listeners_and_broadcasters_screenshot1.png",caption:"A basic button and label interface."}),"\n",(0,s.jsx)(t.p,{children:"\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306f\u63d0\u4f9b\u3055\u308c\u305f\u72b6\u614b\u3067\u306f\u4f55\u3082\u3057\u306a\u3044\u3002\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u30e9\u30d9\u30eb\u306b\u73fe\u5728\u306e\u65e5\u4ed8\u3068\u6642\u523b\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002"}),"\n",(0,s.jsx)(t.h1,{id:"configuring-the-interface",children:"Configuring the interface"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class comprises two child components: a ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," object and a ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classLabel",title:"A component that displays a text string, and can optionally become a text editor when clicked.",children:"\u30e9\u30d9\u30eb"})," object. A ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," object can display a button containing some specific text, and a ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classLabel",title:"A component that displays a text string, and can optionally become a text editor when clicked.",children:"\u30e9\u30d9\u30eb"})," object can display a piece of text."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," class implements one type of button. There are many types of ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," class available in JUCE. See the API reference documentation for the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classToggleButton",title:"A button that can be toggled on/off.",children:"\u30c8\u30b0\u30eb\u30dc\u30bf\u30f3"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classShapeButton",title:"A button that contains a filled shape.",children:"\u30b7\u30a7\u30a4\u30d7\u30dc\u30bf\u30f3"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classImageButton",title:"As the title suggests, this is a button containing an image.",children:"\u30a4\u30e1\u30fc\u30b8\u30dc\u30bf\u30f3"}),", ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classDrawableButton",title:"A button that displays a Drawable.",children:"\u63cf\u753b\u53ef\u80fd\u30dc\u30bf\u30f3"}),", and ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classArrowButton",title:"A button with an arrow in it.",children:"\u77e2\u5370\u30dc\u30bf\u30f3"})," classes for more information."]})}),"\n",(0,s.jsxs)(t.p,{children:["The declaration for the ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class is as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"class MainContentComponent : public juce::Component\n{\n\u3092\u516c\u958b\u3057\u307e\u3059\uff1a\n    //==============================================================================\n    MainContentComponent()\n    {\n        // ...\n    }\n \n    ~\u30e1\u30a4\u30f3\u30fb\u30b3\u30f3\u30c6\u30f3\u30c4\u30fb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8()\n    {\n        // ...\n    }\n \n    void resized() \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n    {\n        // ...\n    }\n \nprivate\uff1a\n    juce::TextButton checkTheTimeButton\uff1b\n    juce::Label timeLabel\uff1b\n \n    //==============================================================================\n    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (MainContentComponent)\n};\nJUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR#define JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR(className)this is a shorthand way of writing both a JUCE_DECLARE_NON_COPYABLE and a JUCE_LEAK_DETECTOR macro for ...definition juce_PlatformDefs.h:245\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The button and the label are added to the ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," object and made visible in the ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," constructor:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'MainContentComponent()\n    {\n        addAndMakeVisible (checkTheTimeButton)\uff1b\n        checkTheTimeButton.setButtonText ("Check the time...")\uff1b\n \n        addAndMakeVisible (timeLabel)\uff1b\n        timeLabel.setColour (juce::Label::backgroundColourId, juce::Colours::black)\uff1b\n        timeLabel.setColour (juce::Label::textColourId, juce::Colours::white)\uff1b\n        timeLabel.setJustificationType (juce::Justification::centred)\uff1b\n \n        setSize (600, 110)\uff1b\n    }\n'})}),"\n",(0,s.jsx)(t.p,{children:"\u3053\u3053\u3067\u306f\u3001\u30dc\u30bf\u30f3\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u8a2d\u5b9a\u3057\u3001\u30e9\u30d9\u30eb\u306e\u7279\u5b9a\u306e\u5916\u89b3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30e9\u30d9\u30eb\u306f\u9ed2\u3044\u80cc\u666f\u306b\u767d\u3044\u30c6\u30ad\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30e9\u30d9\u30eb\u306f\u30c6\u30ad\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u305b\u3093\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"adding-a-listener-base-class",children:"Adding a listener base class"}),"\n",(0,s.jsxs)(t.p,{children:["In JUCE, buttons, sliders, and many other types of controls that may need to inform other objects about a change in their state are a type of ",(0,s.jsx)(t.em,{children:"\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc"})," object. In order to respond to changes in a broadcaster object, other classes need to be a ",(0,s.jsx)(t.em,{children:"\u30ea\u30b9\u30ca\u30fc"})," for that specific type of broadcaster. Listeners also need to be registered with at least one specific broadcaster object of that type. (The broadcaster-listener system in JUCE follows the ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Observer_pattern",children:"\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u30d1\u30bf\u30fc\u30f3"}),".) Many broadcaster objects contain a nested ",(0,s.jsx)(t.code,{children:"\u30ea\u30b9\u30ca\u30fc"})," class, from which we can inherit, in order to become a listener for that type of broadcaster. For example, the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," class contains a nested class ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," for this purpose."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," class can be used to listen to any of the different button types including instances of the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," class as shown here."]})}),"\n",(0,s.jsxs)(t.p,{children:["To use the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," class we need to add it as a base class. In our case, we need to add the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," class as a base class of the ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class [1]:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"class MainContentComponent : public juce::Component\u3001\n                               public juce::Button::Listener // [1].\n{\npublic\uff1a\n"})}),"\n",(0,s.jsx)(t.p,{children:"\u30ab\u30b9\u30bf\u30e0\u30fb\u30af\u30e9\u30b9\u306f\u3001\u540c\u3058\u3088\u3046\u306b\u30ea\u30b9\u30ca\u30fc\u30fb\u30d9\u30fc\u30b9\u30fb\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u7570\u306a\u308b\u30bf\u30a4\u30d7\u306e\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u306e\u30ea\u30b9\u30ca\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"declaring-the-listeners-callback",children:"Declaring the listener's callback"}),"\n",(0,s.jsxs)(t.p,{children:["Usually each listener class has at least one ",(0,s.jsx)(t.a,{href:"http://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/",children:"\u30d4\u30e5\u30a2\u30d0\u30fc\u30c1\u30e3\u30eb"})," function. This is the function that will be called as a callback when the broadcaster object needs to broadcast its change. We must override this in order for the code to compile, and for us to use it."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["Listener classes often contain other virtual functions that may be overridden, but these are optional as they are needed in fewer cases. See the documentation for the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classSlider_1_1Listener",title:"A class for receiving callbacks from a Slider.",children:"\u30b9\u30e9\u30a4\u30c0\u30fc::\u30ea\u30b9\u30ca\u30fc"})," class for an example."]})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"http://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/",children:"\u30d4\u30e5\u30a2\u30d0\u30fc\u30c1\u30e3\u30eb"})," function in the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," class is the ",(0,s.jsx)(t.a,{href:"classButton_1_1Listener.html#a81499cef24b7189cd0d1581fd9dc9e14",title:"Called when the button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc::buttonClicked()"})," function. We need to add its declaration [2] within our ",(0,s.jsx)(t.code,{children:"\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8"})," class as shown here:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"MainContentComponent()\n    {\n        // ...\n    }\n \n    ~\u30e1\u30a4\u30f3\u30fb\u30b3\u30f3\u30c6\u30f3\u30c4\u30fb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8()\n    {\n        // ...\n    }\n \n    void resized() \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\n    {\n        // ...\n    }\n \n    void buttonClicked (juce::Button* button) override // [2].\n    {\n    }\n \n// ...\nbuttonfloat float UnityEventModifiers int buttonDefinition juce_UnityPluginInterface.h:191\n"})}),"\n",(0,s.jsx)(t.h2,{id:"implementing-the-listener-callback",children:"Implementing the listener callback"}),"\n",(0,s.jsxs)(t.p,{children:["Now, let's implement the ",(0,s.jsx)(t.code,{children:"MainContentComponent::buttonClicked()"})," function. Here, we are passed a pointer to the object that has broadcasted the change. We can then compare this pointer with other objects to determine which object it was:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"void buttonClicked (juce::Button* button) override // [2].\n    {\n        if (button == &checkTheTimeButton) // [3].\n        {\n            auto currentTime = juce::Time::getCurrentTime(); // [4] { // [3] { auto currentTime = juce::Time::getCurrentTime(); // [4\n \n            auto includeDate = true\uff1b\n            auto includeTime = true\uff1b\n            auto currentTimeString = currentTime.toString (includeDate, includeTime); // [5].\n \n            timeLabel.setText (currentTimeString, juce::dontSendNotification); // [6].\n        \n    }\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["[3]: Here we compare the pointer passed to the function with the address of our button, to see if it matches. You should do this even if you have only one button, as we do here. It is safe to compare the pointer to the base ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," class passed to the function with instances of ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," subclasses, such as the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," class as shown here."]}),"\n",(0,s.jsxs)(t.li,{children:["[4]: This uses the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTime",title:"Holds an absolute date and time.",children:"\u6642\u9593"})," class to get the current time from the operating system."]}),"\n",(0,s.jsxs)(t.li,{children:["[5]: This converts the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTime",title:"Holds an absolute date and time.",children:"\u6642\u9593"})," object to a readable string. The two ",(0,s.jsx)(t.code,{children:"\u30d6\u30fc\u30eb"})," values allow some customisation of the output (see the documentation for the ",(0,s.jsx)(t.a,{href:"classTime.html#a330e0926141abd7ef42957bce8a9e054",title:"Returns a string version of this date and time, using this machine's local timezone.",children:"Time::toString()"})," function for more information)."]}),"\n",(0,s.jsx)(t.li,{children:"[6]: Here we update the text displayed within the label."}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"\u901a\u77e5\u3092\u9001\u4fe1\u3057\u306a\u3044"})," argument [7] prevents the label from broadcasting this change to its listeners, should it have any. (",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classLabel",title:"A component that displays a text string, and can optionally become a text editor when clicked.",children:"\u30e9\u30d9\u30eb"})," objects can have listeners since they can be used to edit text, too.) In this case we know that it can't have any listeners (as it is our own private member) but it is good practice to be specific."]})}),"\n",(0,s.jsx)(t.h2,{id:"registering-as-a-listener-with-the-broadcaster",children:"Registering as a listener with the broadcaster"}),"\n",(0,s.jsxs)(t.p,{children:["In order to receive the messages that are broadcast, we need to register our listener object with one or more broadcaster objects. In this case, we need to register with the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTextButton",title:"A button that uses the standard lozenge-shaped background with a line of text on it.",children:"\u30c6\u30ad\u30b9\u30c8\u30dc\u30bf\u30f3"})," object. Typically, this would be done within the constructor of the listener subclass [7]:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'MainContentComponent()\n    {\n        addAndMakeVisible (checkTheTimeButton)\uff1b\n        checkTheTimeButton.setButtonText ("Check the time...")\uff1b\n        checkTheTimeButton.addListener (this); // [7].\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["Most broadcaster objects have an ",(0,s.jsx)(t.code,{children:"addListener()"})," function for this purpose (the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classChangeBroadcaster",title:"Holds a list of ChangeListeners, and sends messages to them when instructed.",children:"\u30c1\u30a7\u30f3\u30b8\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc"})," object is an exception, it has the ",(0,s.jsx)(t.a,{href:"classChangeBroadcaster.html#ad68416fe79a94cd5c99519bdea6c2a06",title:"Registers a listener to receive change callbacks from this broadcaster.",children:"ChangeBroadcaster::addChangeListener()"})," function instead)."]})}),"\n",(0,s.jsx)(t.h3,{id:"deregistering-as-a-listener-with-the-broadcaster",children:"Deregistering as a listener with the broadcaster"}),"\n",(0,s.jsxs)(t.p,{children:["Broadcasters will also have a ",(0,s.jsx)(t.code,{children:"removeListener()"})," function, too. For example, see the ",(0,s.jsx)(t.a,{href:"classButton.html#aa7016d2e4b8ab37a12c2736057eb28de",title:"Removes a previously-registered button listener.",children:"\u30dc\u30bf\u30f3::removeListener()"})," function. Since our button is owned by the same class that is performing the listening we don't really ",(0,s.jsx)(t.em,{children:"\u5fc5\u8981"})," to remove the listener as the button will be destroyed at the same time as the listener. For completeness, we ",(0,s.jsx)(t.em,{children:"\u53ef\u80fd\u6027\u304c\u3042\u308b"})," add this to our destructor:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"~\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8()\n{\n    checkTheTimeButton.removeListener (this)\uff1b\n}\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"\u30ea\u30b9\u30ca\u30fc\u3092\u9069\u5207\u306b\u524a\u9664\u3059\u308b\u3053\u3068\u306f\u3001\u3088\u308a\u8907\u96d1\u306a\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u3068\u30ea\u30b9\u30ca\u30fc\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306b\u91cd\u8981\u3067\u3042\u308b\u3002"})}),"\n",(0,s.jsx)(t.p,{children:"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u30e9\u30d9\u30eb\u306b\u6642\u9593\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002"}),"\n",(0,s.jsx)(a.A,{src:"https://docs.juce.com/master/tutorial_listeners_and_broadcasters_screenshot2.png",caption:"Using the button to display the current time."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The completed code for this section can be found in the ",(0,s.jsx)(t.code,{children:"ListenersAndBroadcastersTutorial_02.h"})," file of the demo project for this tutorial."]})}),"\n",(0,s.jsxs)(t.p,{children:["Try changing the format of the text displayed. You can do this by changing the arguments passed to the ",(0,s.jsx)(t.a,{href:"classTime.html#a330e0926141abd7ef42957bce8a9e054",title:"Returns a string version of this date and time, using this machine's local timezone.",children:"Time::toString()"})," function. You could also change the code such that the label displays the number of milliseconds between button clicks, rather than the absolute time."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["An example implementation of the code for this exercise can be found in the ",(0,s.jsx)(t.code,{children:"ListenersAndBroadcastersTutorial_03.h"})," file of the demo project for this tutorial."]})}),"\n",(0,s.jsx)(t.h2,{id:"simplifying-the-button-callback",children:"Simplifying the Button callback"}),"\n",(0,s.jsx)(t.p,{children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u793a\u3057\u305f\u3088\u3046\u306a\u30ea\u30b9\u30ca\u30fc\u3084\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u306e\u30d1\u30e9\u30c0\u30a4\u30e0\u3092\u4f7f\u3046\u4ee3\u308f\u308a\u306b\u3001\u6700\u65b0\u306eC++\u6a19\u6e96\u306e\u30e9\u30e0\u30c0\u95a2\u6570\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30dc\u30bf\u30f3\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5358\u7d14\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u8907\u96d1\u306a\u5b9f\u88c5\u3092\u5fc5\u8981\u3068\u3057\u306a\u3044\u5358\u7d14\u306a\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u306f\u7279\u306b\u6709\u52b9\u3067\u3059\u3002"}),"\n",(0,s.jsxs)(t.p,{children:["First, let's remove the inheritance from the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton_1_1Listener",title:"Used to receive callbacks when a button is clicked.",children:"\u30dc\u30bf\u30f3::\u30ea\u30b9\u30ca\u30fc"})," class and restore the MainContentComponent class definition like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"class MainContentComponent : public juce::Component\n{\npublic\uff1a\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Then, instead of adding the MainContentComponent as a listener to the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"}),", assign a lambda function to the ",(0,s.jsx)(t.a,{href:"classButton.html#a30b76ab312dc7f66e67596ae20540ec2",title:"You can assign a lambda to this callback object to have it called when the button is clicked.",children:"\u30dc\u30bf\u30f3::onClick"})," helper object [8] as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'MainContentComponent()\n    {\n        addAndMakeVisible (checkTheTimeButton)\uff1b\n        checkTheTimeButton.setButtonText ("Check the time...")\uff1b\n        checkTheTimeButton.onClick = [this] { checkTime(); }; // [8].\n'})}),"\n",(0,s.jsxs)(t.p,{children:["This tells the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," object which function to call when the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," is clicked by the user."]}),"\n",(0,s.jsxs)(t.p,{children:["Finally, rename the callback function to checkTime() [9] and remove the if() statement checking the pointers to the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," objects as we don't need to check which ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classButton",title:"A base class for buttons.",children:"\u30dc\u30bf\u30f3"})," called the function anymore:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"void checkTime() // [9].\n    {\n        auto currentTime = juce::Time::getCurrentTime()\uff1b\n \n        auto includeDate = true\uff1b\n        auto includeTime = true\uff1b\n        auto currentTimeString = currentTime.toString (includeDate, includeTime)\uff1b\n \n        timeLabel.setText (currentTimeString, juce::dontSendNotification)\uff1b\n    }\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The implementation of the code can be found in the ",(0,s.jsx)(t.code,{children:"ListenersAndBroadcastersTutorial_04.h"})," file of the demo project for this tutorial."]})}),"\n",(0,s.jsx)(t.h1,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,s.jsx)(t.p,{children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001JUCE\u306b\u304a\u3051\u308b\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u3068\u30ea\u30b9\u30ca\u30fc\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u57fa\u672c\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u30dc\u30bf\u30f3\u306b\u7126\u70b9\u3092\u5f53\u3066\u307e\u3057\u305f\u304c\u3001\u540c\u3058\u30c6\u30af\u30cb\u30c3\u30af\u306fJUCE\u30b3\u30fc\u30c9\u306e\u591a\u304f\u306e\u9818\u57df\u306b\u9069\u7528\u3067\u304d\u307e\u3059\u3002\u7279\u306b\u3001\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u5b66\u3073\u307e\u3057\u305f\uff1a"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u30ab\u30b9\u30bf\u30e0\u30fb\u30af\u30e9\u30b9\u306e1\u3064\u3092\u30ea\u30b9\u30ca\u30fc\u30fb\u30bf\u30a4\u30d7\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3059\u308b\u65b9\u6cd5\u3002"}),"\n",(0,s.jsx)(t.li,{children:"\u30ea\u30b9\u30ca\u30fc\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u306e\u8ffd\u52a0\u65b9\u6cd5"}),"\n",(0,s.jsx)(t.li,{children:"\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30bf\u30fc\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30ea\u30b9\u30ca\u30fc\u3068\u3057\u3066\u306e\u767b\u9332\u3068\u767b\u9332\u89e3\u9664\u306e\u65b9\u6cd5\u3002"}),"\n",(0,s.jsxs)(t.li,{children:["How to access the current time using the ",(0,s.jsx)(t.a,{href:"https://docs.juce.com/master/classTime",title:"Holds an absolute date and time.",children:"\u6642\u9593"})," class."]}),"\n",(0,s.jsx)(t.li,{children:"\u30e9\u30e0\u30c0\u95a2\u6570\u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5358\u7d14\u5316\u3059\u308b\u65b9\u6cd5\u3002"}),"\n"]}),"\n",(0,s.jsx)(t.h1,{id:"\u95a2\u9023\u9805\u76ee",children:"\u95a2\u9023\u9805\u76ee"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../tutorial_label/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebLabel\u30af\u30e9\u30b9"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../tutorial_combo_box/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30ebComboBox\u30af\u30e9\u30b9"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../tutorial_radio_buttons_checkboxes/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30e9\u30b8\u30aa\u30dc\u30bf\u30f3\u3068\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../tutorial_slider_values/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30b9\u30e9\u30a4\u30c0\u30fc\u30af\u30e9\u30b9"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"../tutorial_playing_sound_files/",children:"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u30aa\u30fc\u30c7\u30a3\u30aa\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u69cb\u7bc9"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3449:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(4848);function i(e){let{src:t,caption:n,alt:i,width:a,height:c}=e;return(0,s.jsxs)("figure",{children:[(0,s.jsx)("img",{src:t,alt:i||n,width:a,height:c}),(0,s.jsx)("figcaption",{children:(0,s.jsx)("b",{children:n})})]})}},6378:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(4848);function i(e){let{path:t}=e;return(0,s.jsx)("p",{children:(0,s.jsx)("a",{href:"https://docs.juce.com/master/"+t,children:"\ud83d\udcda Source Page"})})}},8453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>o});var s=n(6540);const i={},a=s.createContext(i);function c(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);