---
title: ラジオボタンとチェックボックス
sidebar_position: 11
tags: [初級]
---

# チュートリアル：ラジオボタンとチェックボックス

<SourcePageLink path="tutorial_radio_buttons_checkboxes" />

ラジオボタンとチェックボックスを使用して、アプリケーションに選択可能なオプションを追加します。

**レベル:** 初級<br/>
**プラットフォーム:** Windows, macOS, Linux, iOS, Android<br/>
**クラス:** [ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off."), [Button](https://docs.juce.com/master/classButton.html "A base class for buttons."), [Label](https://docs.juce.com/master/classLabel.html "A component that displays a text string, and can optionally become a text editor when clicked."), [String](https://docs.juce.com/master/classString.html "The JUCE String class!")

## はじめに

このチュートリアルのデモプロジェクトをこちらからダウンロードしてください：[PIP](https://docs.juce.com/tutorials/PIPs/RadioButtonsAndCheckboxesTutorial.zip) \| [ZIP](https://docs.juce.com/tutorials/ZIPs/RadioButtonsAndCheckboxesTutorial.zip)。プロジェクトを解凍し、最初のヘッダファイルを Projucer で開いてください。

この手順でサポートが必要な場合は、[チュートリアル：Projucer Part 1: Projucer を始めよう](../../getting-started/tutorial_new_projucer_project/)を参照してください。

## デモプロジェクト

デモプロジェクトは、JUCE でのラジオボタンとチェックボックスの使用を示しています。これらは通常[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")クラスを使用して実装されますが、任意の JUCE [Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")コンポーネントを個々のトグルボタンとして、または「ラジオグループ」の一部として使用できます。デモアプリケーションは、いくつかの見出し（[Label](https://docs.juce.com/master/classLabel.html "A component that displays a text string, and can optionally become a text editor when clicked.")クラスを使用）と一連の[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")コンポーネントを表示します：

<CaptionImage
  src="/_images/tutorial_radio_buttons_checkboxes_screenshot1.png"
  caption="デモアプリケーション"
/>

## ラジオボタンとチェックボックス

このチュートリアルでは、オン/オフスタイルのオプションを作成するための[Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")クラスの使用を調べます。通常、これには[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")クラスを使用しますが、上述のように、任意のボタンをトグルタイプのボタンとして設定できます。標準の[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")コンポーネントは、テキストとテキストの左側にチェックマークを含むか含まない「バブル」で構成されています。（この外観は、必要に応じて[LookAndFeel](https://docs.juce.com/master/classLookAndFeel.html "LookAndFeel objects define the appearance of all the JUCE widgets, and subclasses can be used to appl...")クラスを使用してカスタマイズできます。）これらの 2 つの状態は、前のセクションのスクリーンショットで見ることができます。

`MainContentComponent`コンストラクタでは、「male」と「female」ボタンは以下のように設定されます：

```cpp
addAndMakeVisible (maleButton);
addAndMakeVisible (femaleButton);
maleButton.onClick = [this] { updateToggleState (&maleButton, "Male"); };
femaleButton.onClick = [this] { updateToggleState (&femaleButton, "Female"); };
```

ここでは、[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトが[TextButton](https://docs.juce.com/master/classTextButton.html "A button that uses the standard lozenge-shaped background with a line of text on it.")オブジェクトと同じ方法で設定されていることがわかります（[チュートリアル：リスナーとブロードキャスター](../tutorial_listeners_and_broadcasters/)を参照）。これらの 2 つのトグルボタンを相互排他的にするには、同じ「ラジオグループ」に追加する必要があります。これにより、これらのボタンのうち 1 つだけが一度にオンにできるようになります（他のボタンをオンにすると、もう一方がオフになります）。*ラジオグループ ID*は、相互排他的でなければならないボタンのグループを識別するために使用される非ゼロの整数です。さらに、これが機能するためには、同じ*ラジオグループ ID*を持つすべてのボタンが同じ親コンポーネントの子コンポーネントである必要があります。（ボタンが異なる親コンポーネントまたは異なるウィンドウ内にある場合は、この相互排他的な動作を自分で実装する必要があります。）

この例では、列挙値（`GenderButtons`）を*ラジオグループ ID*として使用します：

```cpp
enum RadioButtonIds {
    GenderButtons = 1001
};
```

次に、[Button::setRadioGroupId()](https://docs.juce.com/master/classButton.html#a29adebc6ed27829f75b69c6ba40ef958 "Enables the button to act as a member of a mutually-exclusive group of 'radio buttons'.")関数を使用して*ラジオグループ ID*を設定します。

```cpp
maleButton.setRadioGroupId (GenderButtons);
femaleButton.setRadioGroupId (GenderButtons);
```

:::tip
`setRadioGroupId()`関数は、[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")クラスだけでなく、[Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")クラスのメンバーであることに注意してください。任意のボタンをラジオグループの一部にできますが、そのボタンが（単にクリックイベントをインターセプトするだけでなく）オンとオフを切り替えられることを期待するように設定されている場合にのみ意味があります。
:::

他の 3 つの[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトは、ラジオグループに追加せずに設定されます：

```cpp
addAndMakeVisible (sportButton);
addAndMakeVisible (artButton);
addAndMakeVisible (filmButton);
sportButton.onClick = [this] { updateToggleState (&sportButton, "Sport"); };
artButton.onClick = [this] { updateToggleState (&artButton, "Art"); };
filmButton.onClick = [this] { updateToggleState (&filmButton, "Film"); };
```

:::tip
[Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")オブジェクトは、ゼロ引数で[Button::setRadioGroupId()](https://docs.juce.com/master/classButton.html#a29adebc6ed27829f75b69c6ba40ef958 "Enables the button to act as a member of a mutually-exclusive group of 'radio buttons'.")関数を呼び出すことで、ラジオグループから削除できます。
:::

### トグル状態の変更への応答

オンまたはオフにトグルできるボタンへの応答は、通常のボタンクリックへの応答と似ています。ボタンがトグルされたときに呼び出す関数を、[Button::onClick](https://docs.juce.com/master/classButton.html#a30b76ab312dc7f66e67596ae20540ec2 "You can assign a lambda to this callback object to have it called when the button is clicked.")ヘルパーオブジェクトにラムダ関数を割り当てることで指定する必要があります（上記のコードスニペットで見られるように）。

違いは、updateToggleState()関数でボタンのトグル状態もチェックする必要があることです。これを行うには、[Button::getToggleState()](https://docs.juce.com/master/classButton.html#ae1723837340c174f0f212855d247b626 "Returns true if the button is 'on'.")関数を呼び出すことができます。これも[Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")クラスのメンバーなので、任意のボタンに対して有効です（ただし、ボタンがオンとオフを切り替えられることを期待している場合にのみ意味があります。そうでない場合は`false`を返します）。

```cpp
void updateToggleState (juce::Button* button, juce::String name)
{
    auto state = button->getToggleState();
```

私たちの例では、トグルの変更をロガーに投稿するだけです：

```cpp
juce::String stateString = state ? "ON" : "OFF";

juce::Logger::outputDebugString (name + " Button changed to " + stateString);
}
```

特に、「Male」または「Female」ボタンのいずれかをオンにトグルすると、他のボタンが「オフ」に切り替わり、*かつ*これが`updateToggleState()`関数によって報告されることに注意してください。

:::note
追加の[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトを追加してください。もちろん、趣味をもっと簡単に追加できます。ただし、性別カテゴリの下にもオプションを追加できます。例えば、「回答しない」や「その他」などです。
:::

### 他のボタンをトグルとして使用

上記で示唆されているように、*任意の*ボタンをトグルボタンとして使用できます。説明するために、デモプロジェクトのすべての[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトを[TextButton](https://docs.juce.com/master/classTextButton.html "A button that uses the standard lozenge-shaped background with a line of text on it.")オブジェクトに変換しましょう。ここで行う必要がある明らかなことは、メンバー変数のタイプを[TextButton](https://docs.juce.com/master/classTextButton.html "A button that uses the standard lozenge-shaped background with a line of text on it.")クラスに変更することです：

```cpp
juce::Label genderLabel { {}, "I identify my gender as..." };
juce::ToggleButton maleButton { "Male" },
    femaleButton { "Female" };

juce::Label hobbiesLabel { {}, "My hobbies are..." };
juce::ToggleButton sportButton { "Sport" },
    artButton { "Art" },
    filmButton { "Film" };

//==============================================================================
JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (MainContentComponent)
};
```

ただし、マウスクリックでボタンをトグル可能にするには、[Button::setClickingTogglesState()](https://docs.juce.com/master/classButton.html#a675d6848c16e265ff334b2d51328d8d2 "This tells the button to automatically flip the toggle state when the button is clicked.")関数を呼び出す必要があります。これを行うには、`MainContentComponent`コンストラクタ内の任意の場所に以下のコードを追加します：

```cpp
maleButton.setClickingTogglesState (true);
femaleButton.setClickingTogglesState (true);
sportButton.setClickingTogglesState (true);
artButton.setClickingTogglesState (true);
filmButton.setClickingTogglesState (true);
```

このコードを実行すると、元のアプリケーションと同じように使用できますが、外観が異なるものになります：

<CaptionImage
  src="/_images/tutorial_radio_buttons_checkboxes_screenshot2.png"
  caption="テキストボタンをトグルボタンとして使用"
/>

:::tip
オン状態とオフ状態でのテキストボタンの色のカスタマイズについては、[チュートリアル：JUCE での色](../tutorial_colours/)を参照してください。
:::

### テキストを使用してボタンのトグル状態を表示

ボタンのトグル状態に応じて表示されるテキストを変更したい場合もあるでしょう。これを行うには、`updateToggleState()`関数内で[Button::setButtonText()](https://docs.juce.com/master/classButton.html#a96f4185a0a716d10309f1081f0af2f91 "Changes the button's text.")関数を呼び出すだけです。これを試すには、`updateToggleState()`関数を以下のように修正します：

```cpp
void updateToggleState (juce::Button* button, juce::String name)
{
    auto state = button->getToggleState();
    juce::String stateString = state ? "ON" : "OFF";
    juce::String selectedString = state ? " (selected)" : "";

    juce::Logger::outputDebugString (name + " Button changed to " + stateString);
    button->setButtonText (name + selectedString);
}
```

この場合、ボタンがオンの状態にある場合、通常のボタンテキストに「(selected)」というテキストを追加するだけです。

:::tip
この技術は、ここに示されている[TextButton](https://docs.juce.com/master/classTextButton.html "A button that uses the standard lozenge-shaped background with a line of text on it.")コンポーネントと[ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")コンポーネントの両方で機能します。
:::

これでアプリケーションは以下のスクリーンショットのようになります：

<CaptionImage
  src="/_images/tutorial_radio_buttons_checkboxes_screenshot3.png"
  caption="トグル状態に基づいてボタンテキストを変更"
/>

## まとめ

このチュートリアルでは、チェックボックスとラジオボタンスタイルのコントロールの使用を紹介しました。特に、独自のアプリケーションで以下のことができるようになるはずです：

- [ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトを使用し、状態の変更に応答する。
- [ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトのテキストを状態に応じて変更する。
- [ToggleButton](https://docs.juce.com/master/classToggleButton.html "A button that can be toggled on/off.")オブジェクトをグループ化して、グループ内の 1 つのボタンのみが一度にオンにできる「ラジオグループ」を形成する。
- 他の[Button](https://docs.juce.com/master/classButton.html "A base class for buttons.")コンポーネントをトグルとして使用する。

## 関連項目

- [チュートリアル：リスナーとブロードキャスター](../tutorial_listeners_and_broadcasters/)
- [チュートリアル：JUCE での色](../tutorial_colours/)
- [チュートリアル：Label クラス](../tutorial_label/)
- [チュートリアル：ComboBox クラス](../tutorial_combo_box/)
- [チュートリアル：Slider クラス](../tutorial_slider_values/)
