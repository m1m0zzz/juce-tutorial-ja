<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-plugins/tutorial_plugin_examples" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">プラグインの例 | JUCE日本語版チュートリアル</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://m1m0zzz.github.io/juce-tutorial-ja/plugins/tutorial_plugin_examples/"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="プラグインの例 | JUCE日本語版チュートリアル"><meta data-rh="true" name="description" content="このチュートリアルでは、オーディオ/ミディのプラグインの例をいくつか詳しく説明し、プラグイン開発のオープンな可能性を探ります。"><meta data-rh="true" property="og:description" content="このチュートリアルでは、オーディオ/ミディのプラグインの例をいくつか詳しく説明し、プラグイン開発のオープンな可能性を探ります。"><link data-rh="true" rel="icon" href="/juce-tutorial-ja/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://m1m0zzz.github.io/juce-tutorial-ja/plugins/tutorial_plugin_examples/"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/plugins/tutorial_plugin_examples/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/plugins/tutorial_plugin_examples/" hreflang="x-default"><link rel="stylesheet" href="/juce-tutorial-ja/assets/css/styles.ee4ac6b4.css">
<script src="/juce-tutorial-ja/assets/js/runtime~main.5add7671.js" defer="defer"></script>
<script src="/juce-tutorial-ja/assets/js/main.cf826c6e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/juce-tutorial-ja/"><div class="navbar__logo"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JUCE日本語版チュートリアル</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/juce-tutorial-ja/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/juce-tutorial-ja/">About / このサイトについて</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/audio/">Audio</a><button aria-label="Expand sidebar category &#x27;Audio&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/synth/">Synth</a><button aria-label="Expand sidebar category &#x27;Synth&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/midi/">MIDI</a><button aria-label="Expand sidebar category &#x27;MIDI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/juce-tutorial-ja/category/plugins/">Plugins</a><button aria-label="Collapse sidebar category &#x27;Plugins&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_audio_parameter/">プラグインパラメータの追加</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_audio_processor_value_tree_state/">プラグイン状態の保存と読み込み</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_audio_bus_layouts/">プラグインに適切なバスレイアウトを設定する</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_audio_processor_graph/">カスケード・プラグイン・エフェクト</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_plugin_examples/">プラグインの例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/plugins/tutorial_new_projucer_project/">ウェーブテーブル・シンセシス</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/dsp/">DSP</a><button aria-label="Expand sidebar category &#x27;DSP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/graphics/">Graphics</a><button aria-label="Expand sidebar category &#x27;Graphics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/interface-design/">Interface Design</a><button aria-label="Expand sidebar category &#x27;Interface Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/mobile/">Mobile</a><button aria-label="Expand sidebar category &#x27;Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/utility-classes/">Utility Classes</a><button aria-label="Expand sidebar category &#x27;Utility Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/juce-tutorial-ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/juce-tutorial-ja/category/plugins/"><span itemprop="name">Plugins</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">プラグインの例</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><h1>チュートリアルプラグインの例</h1>
<p>このチュートリアルでは、オーディオ/ミディのプラグインの例をいくつか詳しく説明し、プラグイン開発のオープンな可能性を探ります。</p>
<p>レベル Intermediate</p>
<p>プラットフォーム Windows, macOS, Linux, iOS</p>
<p>プラグイン形式： VST, VST3, AU, AAX, Standalone</p>
<p>クラス： <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a>, <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a>, <a href="https://docs.juce.com/master/classAudioParameterFloat" target="_blank" rel="noopener noreferrer" title="A subclass of AudioProcessorParameter that provides an easy way to create a parameter which maps onto...">AudioParameterFloat</a>, <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a>, <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a>, <a href="https://docs.juce.com/master/classMidiMessage" target="_blank" rel="noopener noreferrer" title="Encapsulates a MIDI message.">ミディメッセージ</a>, <a href="https://docs.juce.com/master/classAudioProcessorValueTreeState" target="_blank" rel="noopener noreferrer" title="This class contains a ValueTree that is used to manage an AudioProcessor&#x27;s entire state.">オーディオプロセッサ値ツリー状態</a>, <a href="https://docs.juce.com/master/classGenericAudioProcessorEditor" target="_blank" rel="noopener noreferrer" title="A type of UI component that displays the parameters of an AudioProcessor as a simple list of sliders,...">GenericAudioProcessorEditor (ジェネリックオーディオプロセッサーエディター)</a></p>
<h1>Getting started</h1>
<p>このチュートリアルにはいくつかのデモ・プロジェクトがあります。これらのプロジェクトのダウンロード・リンクは、チュートリアルの関連セクションに記載されています。</p>
<p>If you need help with this step in each of these sections, see <a href="/juce-tutorial-ja/plugins/tutorial_new_projucer_project/">チュートリアルProjucerパート1：Projucerを始める</a>.</p>
<h1>The demo projects</h1>
<p>このチュートリアルで提供されるデモプロジェクトは、オーディオ/ミディプラグインのいくつかの異なる例を示しています。要約すると、これらのプラグインは</p>
<ul>
<li>Creating interesting musical patterns with a simple arpeggiator. Jump to <a href="#tutorial_plugin_examples_arpeggiator">アルペジエーター・プラグイン</a>.</li>
<li>Filtering out unwanted noises using a noise gate. Jump to <a href="#tutorial_plugin_examples_noise_gate">ノイズゲート・プラグイン</a>.</li>
<li>Expanding the channel count to a multi-out synthesiser. Jump to <a href="#tutorial_plugin_examples_multi_out_synth">マルチアウト・シンセ・プラグイン</a>.</li>
<li>Expanding the channel count to a surround compatible plugin. Jump to <a href="#tutorial_plugin_examples_surround">サラウンド・プラグイン</a>.</li>
</ul>
<p>We use the <a href="https://docs.juce.com/master/classGenericAudioProcessorEditor" target="_blank" rel="noopener noreferrer" title="A type of UI component that displays the parameters of an AudioProcessor as a simple list of sliders,...">GenericAudioProcessorEditor (ジェネリックオーディオプロセッサーエディター)</a> class common to all projects to lay out all of our GUI components across plugin examples.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>The code presented here is broadly similar to the <strong>プラグインサンプル</strong> from the JUCE Examples.</p></div></div>
<h1>The Arpeggiator Plugin</h1>
<p>Download the demo project for this section here: <a href="/juce-tutorial-ja/tutorials/PIPs/ArpeggiatorTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/ArpeggiatorTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>Projucerのプロジェクト設定の &quot;Plugin Characteristics &quot;フィールドで &quot;MIDI Effect Plugin &quot;オプションを有効にしてください。</p></div></div>
<p>アルペジエーターは、オーディオ・プロセッシングのないMIDIプラグインで、ソフトウェア・インストゥルメントやDAWのMIDIトラックに挿入して、入力されるMIDI信号を変更することができます。</p>
<figure><img src="https://docs.juce.com/master/tutorial_plugin_examples_arpeggiator_screenshot1.png" alt="Arpeggiator plugin window"><figcaption><b>Arpeggiator plugin window</b></figcaption></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arpeggiator-implementation">Arpeggiator Implementation<a href="#arpeggiator-implementation" class="hash-link" aria-label="Arpeggiator Implementation への直接リンク" title="Arpeggiator Implementation への直接リンク">​</a></h2>
<p>In the <code>アルペジエーター</code> class, we have defined several private member variables to implement our arpeggiator behaviour as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::AudioParameterFloat* speed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int currentNote, lastNoteValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float rate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::SortedSetと記している；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (アルペジエーター)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Among these we have a <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a> object that holds a set of unique int variables according to a certain sorting rule. This will allow us to reorder the MIDI notes efficiently to produce the desired musical patterns.</p>
<p>クラスのコンストラクタでは、MIDIプラグインを作成するため、オーディオバスなしでプラグインを初期化します。また、ここに示すように、アルペジエーターのスピードのパラメーターを1つ追加します：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">アルペジエーター()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : AudioProcessor (BusesProperties()) // オーディオバスを全く追加しない</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addParameter (speed = new juce::AudioParameterFloat (&quot;speed&quot;, &quot;Arpeggiator Speed&quot;, 0.0, 1.0, 0.5))；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>prepareToPlay()</code> function, we initialise some variables to prepare for subsequent processing like follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void prepareToPlay (double sampleRate, int) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        notes.clear();                          // [1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        currentNote = 0;                        // [2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastNoteValue = -1;                     // [3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = 0;                               // [4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rate = static_cast(sampleRate); // [5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[1]: First, we empty the <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a> of MIDI note numbers.</li>
<li>[2]: The currentNote variable temporarily holds the current index for the <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a> of notes.</li>
<li>[3]: The lastNoteValue variable temporarily holds the previous index to be able to stop the note.</li>
<li>[4]: The time variable keeps track of the note duration with respect to the buffer size and sample rate.</li>
<li>[5]: The rate stores the current sample rate in a float variable.</li>
</ul>
<p>Next, we perform the actual processing in the <code>processBlock()</code> function as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void processBlock (juce::AudioBuffer&amp; buffer, juce::MidiBuffer&amp; midi) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // the audio buffer in a midi effect will have zero channels!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jassert (buffer.getNumChannels() == 0);                                                         // [6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // however we use the buffer to get timing information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto numSamples = buffer.getNumSamples();                                                       // [7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // get note duration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto noteDuration = static_cast(std::ceil (rate * 0.25f * (0.1f + (1.0f - (*速度))))); // [8].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (const auto metadata : midi) // [9].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            const auto msg = metadata.getMessage()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (msg.isNoteOn()) notes.add (msg.getNoteNumber())；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else if (msg.isNoteOff()) notes.removeValue (msg.getNoteNumber())；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        midi.clear(); // [10].</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[6]: To ensure that we deal with a MIDI plugin, assert that there are no audio channels in the audio buffer.</li>
<li>[7]: We still retrieve the number of samples in the block from the audio buffer.</li>
<li>[8]: According to the speed parameter of our user interface and the sample rate, we calculate the note duration in number of samples.</li>
<li>[9]: For every event in the <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a>, we add the note to the <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a> if the event is a &quot;Note On&quot; and remove the note if the event is a &quot;Note Off&quot;.</li>
<li>[10]: We then empty the <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a> to add the single notes back in the buffer one by one in the next step.</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if ((time + numSamples) &gt;= noteDuration) // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto offset = juce::jmax (0, juce::jmin ((int) (noteDuration - time), numSamples - 1)); // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (lastNoteValue &gt; 0) // [13].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                midi.addEvent (juce::MidiMessage::noteOff (1, lastNoteValue), offset)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lastNoteValue = -1；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (notes.size() &gt; 0) // [14].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                currentNote = (currentNote + 1) % notes.size()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lastNoteValue = notes[currentNote]；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                midi.addEvent (juce::MidiMessage::noteOn (1, lastNoteValue, (juce::uint8) 127), offset)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = (time + numSamples) % noteDuration; // [15].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[11]: We check whether the current time with the number of samples in the current block added to it is greater than the note duration. If it is the case this means that by the end of the current block, we would reach a note transition and we therefore proceed to modify the <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a>. Otherwise we keep the MIDI state as is.</li>
<li>[12]: Calculate the sample offset at which the note transition occurs within the current audio block.</li>
<li>[13]: If the previous note is still playing, the lastNoteValue variable is greater than 0 and therefore we need to send a &quot;Note Off&quot; event to stop the note from playing with the correct sample offset. We then reset the lastNoteValue variable.</li>
<li>[14]: If there are notes to shuffle and play in the <a href="https://docs.juce.com/master/classSortedSet" target="_blank" rel="noopener noreferrer" title="Holds a set of unique primitive objects, such as ints or doubles.">ソートセット</a>, we send a &quot;Note On&quot; event to play the first note in the set after having stored the previous note number and retrieved the next note number.</li>
<li>[15]: Finally we keep track of our current time relative to the note duration whether we reach a note transition or not.</li>
</ul>
<h1>The Noise Gate Plugin</h1>
<p>Download the demo project for this section here: <a href="/juce-tutorial-ja/tutorials/PIPs/NoiseGateTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/NoiseGateTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<p>ノイズゲートは、DAWトラックのインサートとして配置されたときに、あるサイドチェインスレッショルド以下の入力音をフィルタリングするオーディオプラグインです。</p>
<figure><img src="https://docs.juce.com/master/tutorial_plugin_examples_noise_gate_screenshot1.png" alt="Noise gate plugin window"><figcaption><b>Noise gate plugin window</b></figcaption></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="noise-gate-implementation">Noise Gate Implementation<a href="#noise-gate-implementation" class="hash-link" aria-label="Noise Gate Implementation への直接リンク" title="Noise Gate Implementation への直接リンク">​</a></h2>
<p>In the <code>ノイズゲート</code> class, we have defined several private member variables to implement our noise gate behaviour as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">プライベート：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::AudioParameterFloat* threshold；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::AudioParameterFloat* alpha；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int sampleCountDown；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    float lowPassCoeff；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (NoiseGate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the class constructor, we initialise the plugin with three stereo buses for the input, output and sidechain respectively [1]. We also add two parameters namely threshold and alpha [2] as shown here:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ノイズゲート()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : AudioProcessor (BusesProperties().withInput (&quot;Input&quot;, juce::AudioChannelSet::stereo()) // [1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                           .withOutput (&quot;Output&quot;, juce::AudioChannelSet::stereo())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                           .withInput (&quot;Sidechain&quot;, juce::AudioChannelSet::stereo()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addParameter (threshold = new juce::AudioParameterFloat (&quot;threshold&quot;, &quot;Threshold&quot;, 0.0f, 1.0f, 0.5f)); // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addParameter (alpha = new juce::AudioParameterFloat (&quot;alpha&quot;, &quot;Alpha&quot;, 0.0f, 1.0f, 0.8f))；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>スレッショルドパラメーターは、ノイズゲートが入力信号に作用するパワーレベルを決定する。alpha パラメーターは、サイドチェイン信号のフィルタリングを制御します。</p>
<p>In the <code>isBusesLayoutSupported()</code> function, we ensure that the number of input channels is identical to the number of output channels and that the input buses are enabled:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bool isBusesLayoutSupported (const BusesLayout&amp; layouts) const override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // サイドチェーンは任意のレイアウトを取ることができるが、メインバスは入力と出力で同じである必要がある。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return layouts.getMainInputChannelSet() == layouts.getMainOutputChannelSet()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &amp;&amp; ! layouts.getMainInputChannelSet().isDisabled()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>prepareToPlay()</code> function, we initialise some variables to prepare for subsequent processing like follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void prepareToPlay (double, int) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lowPassCoeff = 0.0f; // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sampleCountDown = 0; // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコ ピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[3]: The low-pass coefficient will be calculated from the sidechain signal and the alpha parameter to determine the gating behaviour.</li>
<li>[4]: The sample countdown allows us to keep track of the number of samples left with regards to the sample rate before the gating occurs.</li>
</ul>
<p>Next, we perform the actual processing in the <code>processBlock()</code> function as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void processBlock (juce::AudioBuffer&amp; buffer, juce::MidiBuffer&amp;) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto mainInputOutput = getBusBuffer (buffer, true, 0);                                  // [5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto sideChainInput  = getBusBuffer (buffer, true, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto alphaCopy = alpha-&gt;get();                                                          // [6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto thresholdCopy = threshold-&gt;get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto j = 0; j &lt; buffer.getNumSamples(); ++j)                                       // [7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto mixedSamples = 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto i = 0; i &lt; sideChainInput.getNumChannels(); ++i)                          // [8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                mixedSamples += sideChainInput.getReadPointer (i) [j];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mixedSamples /= static_cast(sideChainInput.getNumChannels())；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lowPassCoeff = (alphaCopy * lowPassCoeff) + ((1.0f - alphaCopy) * mixedSamples); // [9].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (lowPassCoeff &gt;= thresholdCopy) // [10].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sampleCountDown = (int) getSampleRate()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 非常に効果的でない方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto i = 0; i &lt; mainInputOutput.getNumChannels(); ++i) // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                *mainInputOutput.getWritePointer (i, j) = sampleCountDown &gt; 0 ?*mainInputOutput.getReadPointer (i, j)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                              : 0.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (sampleCountDown &gt; 0) // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                -sampleCountDown；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[5]: First, we separate the sidechain buffer from the main IO buffer for separate processing in subsequent steps.</li>
<li>[6]: Then we retrieve copies of the threshold and alpha parameters.</li>
<li>[7]: The outer loop will process the individual samples in the audio buffer block while the inner loops will process the channels in an interleaved manner. This allows us to keep the same state for each channel in a single sample processing.</li>
<li>[8]: For each channel in the sidechain, we add the signals together and divide by the number of sidechain channels in order to sum the signal to mono.</li>
<li>[9]: Next we calculate the low-pass coefficient from the alpha parameter and the sidechain mono signal using the formula y[i] = ((1 - alpha) * サイドチェーン) + (alpha * y[i - 1]).</li>
<li>[10]: If this coefficient is greater than or equal to the threshold, we reset the sample countdown to the sample rate.</li>
<li>[11]: For every input channel, we copy the input buffer sample to the output buffer if the countdown is non-zero. Otherwise, we mute the output signal by writing zero samples.</li>
<li>[12]: We make sure to decrement the sample countdown value for every sample processed.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>ここに示した実装は、通常ノイズゲートをプログラムする方法 ではない。世の中にはもっと効率的で優れたアルゴリズムがあります。</p></div></div>
<h1>The Multi-Out Synth Plugin</h1>
<p>Download the demo project for this section here: <a href="/juce-tutorial-ja/tutorials/PIPs/MultiOutSynthTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/MultiOutSynthTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>Projucerのプロジェクト設定の &quot;Plugin Characteristics &quot;フィールドで、&quot;Plugin MIDI Input &quot;オプションを有効にしてください。</p></div></div>
<p>マルチアウト・シンセは、オーディオファイルのサンプルを基に最大5つのシンセサイザー音色を生成し、最大16のマルチ出力に信号を出力するソフトウェア・インストゥルメント・プラグインです。</p>
<figure><img src="https://docs.juce.com/master/tutorial_plugin_examples_multi_out_synth_screenshot1.png" alt="Multi-out synth plugin window"><figcaption><b>Multi-out synth plugin window</b></figcaption></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-out-synth-implementation">Multi-Out Synth Implementation<a href="#multi-out-synth-implementation" class="hash-link" aria-label="Multi-Out Synth Implementation への直接リンク" title="Multi-Out Synth Implementation への直接リンク">​</a></h2>
<p>In the <code>マルチアウトシンセ</code> class, we have defined several private member variables to implement our multi-out synth behaviour as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::AudioFormatManager formatManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::OwnedArraysynth；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::SynthesiserSound::Ptr sound；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (MultiOutSynth)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Among these we have an <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> in order to register audio file formats to read our sample sound. We also have an array of <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> objects that holds one synth per channel and a smart pointer to the sample sound we use in the tutorial.</p>
<p>また、MIDIチャンネルの最大数やシンセのボイス数の最大数など、便利な定数も宣言している：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">列挙</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxMidiChannel = 16、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        最大ボイス数 = 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the class constructor, we initialise the plugin with 16 stereo output buses but no input bus [1] as we are creating a software instrument plugin. We also register basic audio file formats on the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object in order to read the &quot;.ogg&quot; sample file [2] as shown here:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MultiOutSynth()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : AudioProcessor (BusesProperties())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #1&quot;, juce::AudioChannelSet::stereo(), true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #2&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #3&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #4&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #5&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #6&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #7&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #8&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #9&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #10&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #11&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #12&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #13&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #14&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;Output #15&quot;, juce::AudioChannelSet::stereo(), false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          .withOutput (&quot;出力 #16&quot;, juce::AudioChannelSet::stereo(), false))   // [1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 他のものを初期化する（バスとは関係ない）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        formatManager.registerBasicFormats(); // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto midiChannel = 0; midiChannel &lt; maxMidiChannel; ++midiChannel) // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synth.add (new juce::Synthesiser())；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto i = 0; i &lt; maxNumberOfVoices; ++i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                synth[midiChannel]-&gt;addVoice (new juce::SamplerVoice()); // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loadNewSample (juce::MemoryBlock (singing_ogg, singing_oggSize)); // [5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For each midi/output channel, we instantiate a new <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> object, add it to the array [3] and create 5 <a href="https://docs.juce.com/master/classSamplerVoice" target="_blank" rel="noopener noreferrer" title="A subclass of SynthesiserVoice that can play a SamplerSound.">サンプラーボイス</a> objects per synth [4]. We also load the sample file as binary data [5] using the <code>loadNewSample()</code> private function defined hereafter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void loadNewSample (const juce::MemoryBlock&amp; sampleData)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto soundBuffer = std::make_unique (sampleData, false);   // [6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::unique_ptrformatReader (formatManager.findFormatForFileExtension (&quot;ogg&quot;)-&gt;createReaderFor (soundBuffer.release(), true))；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        juce::BigInteger midiNotes；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        midiNotes.setRange (0, 126, true)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        juce::SynthesiserSound::Ptr newSound = new juce::SamplerSound (&quot;Voice&quot;, *formatReader, midiNotes, 0x40, 0.0, 0.0, 10.0); // [7].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto channel = 0; channel &lt; maxMidiChannel; ++channel) // [8].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synth[channel]-&gt;removeSound (0)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sound = newSound; // [9] 音を削除します。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto channel = 0; channel &lt; maxMidiChannel; ++channel) // [10].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synth[channel]-&gt;addSound (sound)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[6]: First create a <a href="https://docs.juce.com/master/classMemoryInputStream" target="_blank" rel="noopener noreferrer" title="Allows a block of data to be accessed as a stream.">メモリー入力ストリーム</a> from the sample binary data and convert the stream to read the file as an &quot;ogg&quot; format.</li>
<li>[7]: Declare a <a href="https://docs.juce.com/master/classSamplerSound" target="_blank" rel="noopener noreferrer" title="A subclass of SynthesiserSound that represents a sampled audio clip.">サンプラーサウンド</a> object with the previously created stream reader and constrain the range of midi notes using a <a href="https://docs.juce.com/master/classBigInteger" target="_blank" rel="noopener noreferrer" title="An arbitrarily large integer class.">BigInteger</a>.</li>
<li>[8]: For every <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> object in the synth array, we make sure to clear the currently loaded <a href="https://docs.juce.com/master/classSynthesiserSound" target="_blank" rel="noopener noreferrer" title="Describes one of the sounds that a Synthesiser can play.">シンセサイザーサウンド</a> before loading a new one.</li>
<li>[9]: Then assign the newly created <a href="https://docs.juce.com/master/classSamplerSound" target="_blank" rel="noopener noreferrer" title="A subclass of SynthesiserSound that represents a sampled audio clip.">サンプラーサウンド</a> to the smart pointer to keep a reference to the sound.</li>
<li>[10]: Finally, for every Synthesizer object we load the new sound as a <a href="https://docs.juce.com/master/classSamplerSound" target="_blank" rel="noopener noreferrer" title="A subclass of SynthesiserSound that represents a sampled audio clip.">サンプラーサウンド</a> object.</li>
</ul>
<p>To make sure that no buses are added or removed beyond our requirements, we override two functions from the <a href="https://docs.juce.com/master/classAudioProcessor" target="_blank" rel="noopener noreferrer" title="Base class for audio processing classes or plugins.">オーディオプロセッサ</a> class as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bool canAddBus (bool isInput) const override { return (! isInput &amp;&amp; getBusCount (false) &lt; maxMidiChannel); }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool canRemoveBus (bool isInput) const override { return (! isInput &amp;&amp; getBusCount (false) &gt; 1); }.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title=" コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>これにより、インプットバスの追加や削除、アウトプットバスの16チャンネルを超える追加や完全な削除を防ぐことができます。</p>
<p>In the <code>prepareToPlay()</code> function, we prepare for subsequent processing by setting the sample rate for every <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> object in the synth array by calling the <code>setCurrentPlaybackSampleRate()</code> function:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void prepareToPlay (double newSampleRate, int samplesPerBlock) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        juce::ignoreUnused (samplesPerBlock)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto midiChannel = 0; midiChannel &lt; maxMidiChannel; ++midiChannel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synth[midiChannel]-&gt;setCurrentPlaybackSampleRate (newSampleRate)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we perform the actual processing in the <code>processBlock()</code> function as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void processBlock (juce::AudioBuffer&amp; buffer, juce::MidiBuffer&amp; midiBuffer) オーバーライド</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto busCount = getBusCount (false); // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto busNr = 0; busNr &lt; busCount; ++busNr) // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto midiChannelBuffer = filterMidiMessagesForChannel (midiBuffer, busNr + 1)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto audioBusBuffer = getBusBuffer (buffer, false, busNr)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synth [busNr]-&gt;renderNextBlock (audioBusBuffer, midiChannelBuffer, 0, audioBusBuffer.getNumSamples()); // [13].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[11]: First, we retrieve the number of output buses.</li>
<li>[12]: For every output bus (and therefore for every <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> instance), we filter out the unnecessary audio bus buffers and filter out the midi messages that do not correspond to the midi channel of the synthesiser by calling a private helper function defined thereafter.</li>
<li>[13]: We can then call the <code>レンダーネクストブロック()</code> function directly on the corresponding <a href="https://docs.juce.com/master/classSynthesiser" target="_blank" rel="noopener noreferrer" title="Base class for a musical device that can play sounds.">シンセサイザー</a> object to generate the sound by supplying the correct audio bus buffer and midi channel buffer.</li>
</ul>
<p>MIDIチャンネルをフィルタリングするヘルパー関数は以下のように実装されている：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">static juce::MidiBuffer filterMidiMessagesForChannel (const juce::MidiBuffer&amp; input, int channel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        juce::MidiBuffer 出力；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto metadata : input) // [14].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto message = metadata.getMessage()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (message.getChannel() == channel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                output.addEvent (message, metadata.samplePosition)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return output; // [15］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[14]: For every midi channel buffer, we check whether the midi message channel matches the midi channel of the output bus we are looking for and if so we add the <a href="https://docs.juce.com/master/classMidiMessage" target="_blank" rel="noopener noreferrer" title="Encapsulates a MIDI message.">ミディメッセージ</a> to a newly-created <a href="https://docs.juce.com/master/classMidiBuffer" target="_blank" rel="noopener noreferrer" title="Holds a sequence of time-stamped midi events.">ミディバッファ</a>.</li>
<li>[15]: When we have iterated over all midi messages in all midi channels, we return with a buffer containing only the midi messages of the selected channel.</li>
</ul>
<h1>The Surround Plugin</h1>
<p>Download the demo project for this section here: <a href="/juce-tutorial-ja/tutorials/PIPs/SurroundTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/SurroundTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<p>サラウンド・ユーティリティは、サラウンド設定を含む各チャンネルの入力信号をモニターし、選択したチャンネルにピンのサイン波を送ることができるプラグインです。</p>
<figure><img src="https://docs.juce.com/master/tutorial_plugin_examples_surround_screenshot1.png" alt="Surround plugin window"><figcaption><b>Surround plugin window</b></figcaption></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="surround-implementation">Surround Implementation<a href="#surround-implementation" class="hash-link" aria-label="Surround Implementation への直接リンク" title="Surround Implementation への直接リンク">​</a></h2>
<p>In the <code>サラウンドプロセッサー</code> class, we have defined several private member variables to implement our surround behaviour as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    juce::Array channelActive;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce::ArrayalphaCoeffs；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int channelClicked；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int sampleOffset；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //==============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (SurroundProcessor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>これらのうち、プラグインのアクティブ・チャンネルのサンプル数を記録する配列と、各チャンネルのアルファ係数を記録する配列がある。</p>
<p>クラスのコンストラクタでは、デフォルトで入力用と出力用にそれぞれ2つのステレオ・ペアのバスでプラグインを初期化しますが、構成は現在使用されているバス・レイアウトの設定に応じて変更されます。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">サラウンドプロセッサ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        : AudioProcessor(BusesProperties().withInput (&quot;Input&quot;, juce::AudioChannelSet::stereo())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                          .withOutput (&quot;Output&quot;, juce::AudioChannelSet::stereo()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>isBusesLayoutSupported()</code> function, we ensure that the input/output channels are discrete channels [1], that the number of input channels is identical to the number of output channels [2] and that the input buses are enabled [3] as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bool isBusesLayoutSupported (const BusesLayout&amp; layouts) const override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ((! layouts.getMainInputChannelSet() .isDiscreteLayout()) // [1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             &amp;&amp; (! layouts.getMainOutputChannelSet().isDiscreteLayout())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             &amp;&amp; (layouts.getMainInputChannelSet() == layouts.getMainOutputChannelSet()) // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             &amp;&amp; (! layouts.getMainInputChannelSet().isDisabled()); // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>prepareToPlay()</code> function, we initialise some variables to prepare for subsequent processing like follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void prepareToPlay (double sampleRate, int samplesPerBlock) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        channelClicked = 0;                                             // [4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sampleOffset = static_cast(std::ceil (sampleRate)); // [5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto numChannels = getChannelCountOfBus (true, 0); // [6].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        channelActive.resize (numChannels)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        alphaCoeffs.resize (numChannels)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reset(); // [7］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        triggerAsyncUpdate(); // [8].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        juce::ignoreUnused (samplesPerBlock)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[4]: First, we reset the temporary variable that designates the channel index that is clicked by the user.</li>
<li>[5]: Then we store the sample rate before processing the block and later on incrementing this temporary variable to keep track of phase with sample offsets.</li>
<li>[6]: We need to resize the active channels and coefficients arrays to the currently active number of channels for the block.</li>
<li>[7]: The <code>リセット</code> function is called at several places to clear the active channels array as defined later.</li>
<li>[8]: Finally, we trigger an asynchronous update to the GUI thread and handle the callback later on.</li>
</ul>
<p>The <code>リセット</code> function is also called in the <code>releaseResources()</code> function after the block processing finishes:</p>
<p>The <code>リセット</code> function is implemented by setting every channel value to 0 like follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void reset() オーバーライド</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto&amp; channel : channelActive)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            channel = 0；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As for the asynchronous update of the GUI, we handle the callback by calling the <code>updateGUI()</code> function on the <a href="https://docs.juce.com/master/classAudioProcessorEditor" target="_blank" rel="noopener noreferrer" title="Base class for the component that acts as the GUI for an AudioProcessor.">オーディオプロセッサーエディター</a>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void handleAsyncUpdate() override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (auto* editor = getActiveEditor())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (auto* surroundEditor = dynamic_cast(エディタ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                surroundEditor-&gt;updateGUI()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since the <a href="https://docs.juce.com/master/classAudioProcessor" target="_blank" rel="noopener noreferrer" title="Base class for audio processing classes or plugins.">オーディオプロセッサ</a> inherits from the ChannelClickListener class defined in the <code>サラウンドエディター</code> class, we have to override its virtual functions. The <code>channelButtonClicked()</code> callback function is triggered when the user clicks on a channel button. It provides the channel index that was pressed and resets the sample offset variable like so:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void channelButtonClicked (int channelIndex) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        channelClicked = channelIndex；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sampleOffset = 0；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>isChannelActive()</code> helper function returns whether the specified channel is active by checking whether the active channel array still has samples to process:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ブール isChannelActive (int channelIndex) オーバーライド</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return channelActive[channelIndex] &gt; 0；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we perform the actual processing in the <code>processBlock()</code> function as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void processBlock (juce::AudioBuffer&amp; buffer, juce::MidiBuffer&amp;) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (auto ch = 0; ch &lt; buffer.getNumChannels(); ++ch)                   // [9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto&amp; channelTime = channelActive.getReference (ch);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto&amp; alpha = alphaCoeffs.getReference (ch);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto j = 0; j &lt; buffer.getNumSamples(); ++j)                   // [10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                auto sample = buffer.getReadPointer (ch)[j];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                alpha = (0.8f * alpha) + (0.2f * sample);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (std::abs (alpha) &gt;= 0.1f)                                   // [11]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    channelTime = static_cast(getSampleRate() / 2.0)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            channelTime = juce::jmax (0, channelTime - buffer.getNumSamples()); // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[9]: For each channel in the audio buffer, we get a reference to the active channel countdown samples and the alpha coefficient values.</li>
<li>[10]: Then for every sample in the buffer block, we get the input sample value of the channel and calculate the alpha coefficient using the formula alpha[i] = ((1 - x) * サンプル) + (x * alpha[i - 1]) where x = 0.8 in this case.</li>
<li>[11]: If the alpha coefficient is greater than or equals to a certain threshold in this case 0.1, we set the countdown samples for that specific channel to half of the sample rate.</li>
<li>[12]: We also make sure to subtract the number of samples in the current block from the number of samples in the countdown.</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        auto fillSamples = juce::jmin (static_cast (std::ceil (getSampleRate())) - sampleOffset,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       buffer.getNumSamples());                 // [13]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (juce::isPositiveAndBelow (channelClicked, buffer.getNumChannels())) // [14]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto* channelBuffer = buffer.getWritePointer (channelClicked);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto freq = (float) (440.0 / getSampleRate());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto i = 0; i &lt; fillSamples; ++i)                              // [15]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                channelBuffer[i] += std::sin (2.0f * juce::MathConstants::pi * freq * static_cast(sampleOffset++))；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[13]: Next we calculate the number of output samples to fill by taking the smallest number of the two from the sample offset and the number of samples in the block.</li>
<li>[14]: Then we can check whether the channel index clicked is valid and get the write pointer for the correct channel buffer.</li>
<li>[15]: Finally we calculate the frequency of the sine wave by dividing the A4 frequency by the sample rate. Then for every sample to fill, we produce a sine wave with appropriate frequency and phase offset using the sample offset variable that we increment after the assignment for the next sample.</li>
</ul>
<h1>Summary</h1>
<p>このチュートリアルでは、オーディオ／ミディ・プラグインの例をいくつか見てきました。特に</p>
<ul>
<li>シンプルなアルペジエーターを作り、面白い音楽パターンを作る。</li>
<li>不要なノイズを除去するノイズゲートを内蔵。</li>
<li>複数の出力を持つシンセサイザーを製作。</li>
<li>チャンネル数を拡張するためにサラウンド対応プラグインを構築。</li>
</ul>
<h1>See also</h1>
<ul>
<li><a href="/juce-tutorial-ja/plugins/tutorial_create_projucer_basic_plugin/">チュートリアル基本的なAudio/MIDIプラグインを作る, パート1：セットアップ</a></li>
<li><a href="/juce-tutorial-ja/plugins/tutorial_code_basic_plugin/">チュートリアル基本的なAudio/MIDIプラグインを作る, パート2: プラグインのコーディング</a></li>
<li><a href="/juce-tutorial-ja/plugins/tutorial_midi_message/">チュートリアルMIDIデータの作成</a></li>
<li><a href="/juce-tutorial-ja/plugins/tutorial_handling_midi_events/">チュートリアル：MIDIイベントの処理</a></li>
<li><a href="/juce-tutorial-ja/plugins/tutorial_audio_processor_graph/">チュートリアルカスケードプラグインエフェクト</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/plugins/tutorial_plugin_examples.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/juce-tutorial-ja/plugins/tutorial_audio_processor_graph/"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">カスケード・プラグイン・エフェクト</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/juce-tutorial-ja/plugins/tutorial_new_projucer_project/"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">ウェーブテーブル・シンセシス</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#arpeggiator-implementation" class="table-of-contents__link toc-highlight">Arpeggiator Implementation</a></li><li><a href="#noise-gate-implementation" class="table-of-contents__link toc-highlight">Noise Gate Implementation</a></li><li><a href="#multi-out-synth-implementation" class="table-of-contents__link toc-highlight">Multi-Out Synth Implementation</a></li><li><a href="#surround-implementation" class="table-of-contents__link toc-highlight">Surround Implementation</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">JUCE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juce.com/learn/tutorials/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juce.com/learn/documentation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.juce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="footer__link-item">repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/juce-framework/JUCE" target="_blank" rel="noopener noreferrer" class="footer__link-item">JUCE GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Raw Material Software Limited. translation: mimoz</div></div></div></footer></div>
</body>
</html>