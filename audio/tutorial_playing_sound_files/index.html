<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-audio/tutorial_playing_sound_files" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">オーディオプレーヤーの構築 | JUCE日本語版チュートリアル</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_playing_sound_files/"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="オーディオプレーヤーの構築 | JUCE日本語版チュートリアル"><meta data-rh="true" name="description" content="このチュートリアルでは、サウンドファイルを開いて再生する方法について説明します。これには、JUCEでサウンドファイルを扱うためのいくつかの重要なクラスが含まれます。"><meta data-rh="true" property="og:description" content="このチュートリアルでは、サウンドファイルを開いて再生する方法について説明します。これには、JUCEでサウンドファイルを扱うためのいくつかの重要なクラスが含まれます。"><link data-rh="true" rel="icon" href="/juce-tutorial-ja/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_playing_sound_files/"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_playing_sound_files/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_playing_sound_files/" hreflang="x-default"><link rel="stylesheet" href="/juce-tutorial-ja/assets/css/styles.ee4ac6b4.css">
<script src="/juce-tutorial-ja/assets/js/runtime~main.2c1dcd22.js" defer="defer"></script>
<script src="/juce-tutorial-ja/assets/js/main.cf826c6e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/juce-tutorial-ja/"><div class="navbar__logo"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JUCE日本語版チュートリアル</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/juce-tutorial-ja/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/juce-tutorial-ja/">About / このサイトについて</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/juce-tutorial-ja/category/audio/">Audio</a><button aria-label="Collapse sidebar category &#x27;Audio&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">オーディオプレーヤーの構築</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_processing_audio_input/">オーディオ入力の処理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/">AudioSampleBufferクラスを使ったオーディオのループ再生</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">AudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_audio_thumbnail/">オーディオ波形を描く</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_audio_device_manager/">AudioDeviceManagerクラス</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/synth/">Synth</a><button aria-label="Expand sidebar category &#x27;Synth&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/midi/">MIDI</a><button aria-label="Expand sidebar category &#x27;MIDI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/plugins/">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/dsp/">DSP</a><button aria-label="Expand sidebar category &#x27;DSP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/graphics/">Graphics</a><button aria-label="Expand sidebar category &#x27;Graphics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/interface-design/">Interface Design</a><button aria-label="Expand sidebar category &#x27;Interface Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/mobile/">Mobile</a><button aria-label="Expand sidebar category &#x27;Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/utility-classes/">Utility Classes</a><button aria-label="Expand sidebar category &#x27;Utility Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/juce-tutorial-ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/juce-tutorial-ja/category/audio/"><span itemprop="name">Audio</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">オーディオプレーヤーの構築</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><h1>チュートリアルオーディオプレーヤーの構築</h1>
<p>このチュートリアルでは、サウンドファイルを開いて再生する方法について説明します。これには、JUCEでサウンドファイルを扱うためのいくつかの重要なクラスが含まれます。</p>
<p>レベル Intermediate</p>
<p>プラットフォーム Windows, macOS, Linux</p>
<p>クラス： <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a>, <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a>, <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a>, <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a>, <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a>, <a href="https://docs.juce.com/master/classChangeListener" target="_blank" rel="noopener noreferrer" title="Receives change event callbacks that are sent out by a ChangeBroadcaster.">変更リスナー</a>, <a href="https://docs.juce.com/master/classFile" target="_blank" rel="noopener noreferrer" title="Represents a local file or directory.">ファイル</a>, <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a></p>
<h1>Getting started</h1>
<p>Download the demo project for this tutorial here: <a href="/juce-tutorial-ja/tutorials/PIPs/PlayingSoundFilesTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/PlayingSoundFilesTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<p>If you need help with this step, see <a href="/juce-tutorial-ja/audio/tutorial_new_projucer_project/">チュートリアルProjucerパート1：Projucerを始める</a>.</p>
<h1>The demo project</h1>
<p>このデモ・プロジェクトでは、サウンド・ファイルの再生をコントロールするための3つのボタン・インターフェースを紹介します。つのボタンは</p>
<ul>
<li>ユーザーがサウンドファイルを選択するためのファイル選択ボタンを表示します。</li>
<li>サウンドを再生するボタン。</li>
<li>音を止めるボタン。</li>
</ul>
<p>インターフェイスは以下のスクリーンショットの通り：</p>
<figure><img src="https://docs.juce.com/master/tutorial_playing_sound_files_screenshot1.png" alt="A three-button interface to control sound file playback."><figcaption><b>A three-button interface to control sound file playback.</b></figcaption></figure>
<h1>Helpful classes</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-audiosource-class">The AudioSource class<a href="#the-audiosource-class" class="hash-link" aria-label="The AudioSource class への直接リンク" title="The AudioSource class への直接リンク">​</a></h2>
<p>While we can generate audio sample-by-sample in the <code>getNextAudioBlock()</code> of the Audio Application template, there are some built-in tools for generating and processing audio. These allow us to link together high-level building blocks to form powerful audio applications without having to process each and every sample of audio within our application code (JUCE does this on our behalf). These building blocks are based on the <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> class. In fact, if you have followed any of the tutorials based on the <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a> class — for example, <a href="/juce-tutorial-ja/audio/tutorial_simple_synth_noise/">チュートリアルホワイトノイズ・ジェネレーターを作る</a> — then you have been making use of the <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> class already. The <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a> class itself inherits from the <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> class and, importantly, contains an <a href="https://docs.juce.com/master/classAudioSourcePlayer" target="_blank" rel="noopener noreferrer" title="Wrapper class to continuously stream audio from an audio source to an AudioIODevice.">オーディオソースプレーヤ</a> object that streams the audio between the <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a> and the audio hardware device. We can simply generate the audio samples directly in the <code>getNextAudioBlock()</code> function but we can instead chain a number of <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> objects together to form series of processes. We make use of this feature in this tutorial.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="audio-formats">Audio formats<a href="#audio-formats" class="hash-link" aria-label="Audio formats への直接リンク" title="Audio formats への直接リンク">​</a></h2>
<p>JUCE は、多くの形式のサウンドファイルを読み書きするためのツールを提供しています。このチュートリアルでは、特に以下のクラスを使用します：</p>
<ul>
<li><a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a>: This class contains a list of audio formats (such as WAV, AIFF, Ogg Vorbis, and so on) and can create suitable objects for reading audio data from these formats.</li>
<li><a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a>: This class handles the low-level file reading operations on the audio file and allows us to read audio in a consistent format (generally this means arrays of <code>フロート</code> values). When an <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object is asked to open a particular file, it creates instances of this class.</li>
<li><a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a>: This is a subclass of the <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> class. It can read audio data from an <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object and render the audio via its <code>getNextAudioBlock()</code> function.</li>
<li><a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a>: This class is another subclass of the <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> class. It can control the playback of an <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object. This control includes starting and stopping the playback of the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object. It can also perform sample rate conversion and it can buffer audio ahead of time if we wish.</li>
</ul>
<h1>Putting it together</h1>
<p>We will now bring together these classes along with suitable user interface classes to make our sound file playing application. It is useful at this point to think about the various phases — or <em>運輸省</em> — of playing an audio file. Once the audio file is loaded we can consider these four possible states:</p>
<ul>
<li><em>停止</em>: Audio playback is stopped and ready to be started.</li>
<li><em>スタート</em>: Audio playback hasn&#x27;t yet started but it has been told to start.</li>
<li><em>プレー</em>: Audio is playing.</li>
<li><em>停止</em>: Audio is playing but playback has been told to stop, after this it will return to the <em>停止</em> state.</li>
</ul>
<p>To represent these states, we create an <code>列挙</code> within our <code>メインコンテンツコンポーネント</code> class:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">列挙 TransportState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        停止中、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        開始、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        再生中、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        停止中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initialising-the-interface">Initialising the interface<a href="#initialising-the-interface" class="hash-link" aria-label="Initialising the interface への直接リンク" title="Initialising the interface への直接リンク">​</a></h2>
<p>In the constructor for our <code>メインコンテンツコンポーネント</code> class, we configure the three buttons:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">MainContentComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        状態 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">停止</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">addAndMakeVisible</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">openButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        openButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setButtonText</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Open...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        openButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">onClick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">openButtonClicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">addAndMakeVisible</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">playButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setButtonText</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Play&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">onClick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">playButtonClicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColour</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TextButton</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">buttonColourId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Colours</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">green</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        playButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEnabled</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">addAndMakeVisible</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stopButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setButtonText（</span><span class="token string" style="color:#e3116c">&quot;停止&quot;</span><span class="token plain">）；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">onClick </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">stopButtonClicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColour</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TextButton</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">buttonColourId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Colours</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">red</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopButton</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEnabled</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">；</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>// Notice in particular that we disable the <strong>プレー</strong> and <strong>ストップ</strong> buttons initially. The <strong>プレー</strong> button is enabled once a valid file is loaded. We can see here that we have assigned a lambda function to the <a title="You can assign a lambda to this callback object to have it called when the button is clicked." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/classButton.html/#a30b76ab312dc7f66e67596ae20540ec2">ボタン::onClick</a> helper objects for each of these three buttons (see <a href="/juce-tutorial-ja/audio/tutorial_listeners_and_broadcasters/">チュートリアルリスナーとブロードキャスター</a>). We also initialise our transport state in the constructor&#x27;s initialiser list.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-initialisation">Other initialisation<a href="#other-initialisation" class="hash-link" aria-label="Other initialisation への直接リンク" title="Other initialisation への直接リンク">​</a></h2>
<p>In addition to the three <a href="https://docs.juce.com/master/classTextButton" target="_blank" rel="noopener noreferrer" title="A button that uses the standard lozenge-shaped background with a line of text on it.">テキストボタン</a> objects we have four other members of our <code>メインコンテンツコンポーネント</code> class:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AudioFormatManager formatManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">unique_ptrreaderSource；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    juce</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AudioTransportSource transportSource；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TransportState状態；</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we see the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a>, <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a>, and <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> classes mentioned earlier.</p>
<p>In the <code>メインコンテンツコンポーネント</code> constructor we need to initialise the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object to register a list of standard formats [1]:</p>
<p>As a minimum this will enable the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object to create readers for the WAV and AIFF formats. Other formats may be available depending on the platform and the options enabled in the <code>Juce_Audio_formats</code> module within the Projucer project as shown in the following screenshot:</p>
<figure><img src="https://docs.juce.com/master/tutorial_playing_sound_files_screenshot2.png" alt="The juce_audio_formats module options showing audio format options."><figcaption><b>The juce_audio_formats module options showing audio format options.</b></figcaption></figure>
<p>In the <code>メインコンテンツコンポーネント</code> constructor we also add our <code>メインコンテンツコンポーネント</code> object as a listener [2] to the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object so that we can respond to changes in its state (for example, when it stops):</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>The function name is <code>addChangeListener()</code> in this case, rather than simply <code>addListener()</code> as it is with many other listener classes in JUCE.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="responding-to-audiotransportsource-changes">Responding to AudioTransportSource changes<a href="#responding-to-audiotransportsource-changes" class="hash-link" aria-label="Responding to AudioTransportSource changes への直接リンク" title="Responding to AudioTransportSource changes への直接リンク">​</a></h2>
<p>When changes in the transport are reported, the <code>changeListenerCallback()</code> function will be called. This will be called asynchronously on the message thread:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void changeListenerCallback (juce::ChangeBroadcaster* source) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (source == &amp;transportSource)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (transportSource.isPlaying())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                changeState (Playing)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            さもなければ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                changeState (Stopped)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can see that this just calls a member function <code>changeState()</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="changing-states">Changing states<a href="#changing-states" class="hash-link" aria-label="Changing states への直接リンク" title="Changing states への直接リンク">​</a></h2>
<p>The changing of the transport state is localised into this single function <code>changeState()</code>. This helps keep all of the logic for this functionality in one place. This function updates the <code>状態</code> member and triggers any changes to other objects that need to take place when in this new state.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>More experienced readers may wish to use the <a href="https://en.wikipedia.org/wiki/State_pattern" target="_blank" rel="noopener noreferrer">状態設計パターン</a> as an alternative way of structuring this code.</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void changeState (TransportState newState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (state != newState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            state = newState；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            switch (state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case Stopped：                           // [3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setEnabled (false)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setEnabled (true)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.setPosition (0.0)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case Starting：                          // [4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setEnabled (false)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.start()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case Playing：                           // [5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setEnabled (true)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ケース停止：                          // [6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.stop()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[3]: When the transport returns to the <em>停止</em> state it disables the <strong>ストップ</strong> button, enables the <strong>プレー</strong> button, and resets the transport position back to the start of the file.</li>
<li>[4]: The <em>スタート</em> state is triggered by the user clicking the <strong>プレー</strong> button, this tells the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object to start playing. At this point we disable the <strong>プレー</strong> button too.</li>
<li>[5]: The <em>プレー</em> state is triggered by the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object reporting a change via the <code>changeListenerCallback()</code> function. Here we enable the <strong>ストップ</strong> button.</li>
<li>[6]: The <em>停止</em> state is triggered by the user clicking the <strong>ストップ</strong> button, so we tell the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object to stop.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="processing-the-audio">Processing the audio<a href="#processing-the-audio" class="hash-link" aria-label="Processing the audio への直接リンク" title="Processing the audio への直接リンク">​</a></h2>
<p>The audio processing in this demo project is very straightforward: we simply hand off the processing to the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object by passing it the <a href="https://docs.juce.com/master/structAudioSourceChannelInfo" target="_blank" rel="noopener noreferrer" title="Used by AudioSource::getNextAudioBlock().">オーディオソースチャンネル情報</a> struct that we have been passed via the <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a> class:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void getNextAudioBlock (const juce::AudioSourceChannelInfo&amp; bufferToFill) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (readerSource.get() == nullptr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bufferToFill.clearActiveBufferRegion()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            を返します；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transportSource.getNextAudioBlock（bufferToFill）；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that we check if there is a valid <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object first and simply zero the output if not (using the convenient <a title="Convenient method to clear the buffer if the source is not producing any data." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/structAudioSourceChannelInfo.html/#a6246ca9f1f6ef86dab31fc0eeaacb7a3">AudioSourceChannelInfo::clearActiveBufferRegion()</a> function). The <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> member is stored in a std::unique_ptr object because we need to create these objects dynamically based on the user&#x27;s actions. It also allows us to check for <code>ヌルプトル</code> for invalid objects.</p>
<p>We also need to remember to pass the <code>prepareToPlay()</code> callback to any other <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> objects we are using:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void prepareToPlay (int samplesPerBlockExpected, double sampleRate) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transportSource.prepareToPlay (samplesPerBlockExpected, sampleRate)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And the <code>releaseResources()</code> callback too:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void releaseResources() override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transportSource.releaseResources()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="opening-a-file">Opening a file<a href="#opening-a-file" class="hash-link" aria-label="Opening a file への直接リンク" title="Opening a file への直接リンク">​</a></h2>
<p>To open a file we pop up a <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a> object in response to the <strong>オープン...</strong> button being clicked:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void openButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chooser = std::make_unique (&quot;Select a Wave file to play...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                       juce::File{},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                       &quot;*.wav&quot;);                     // [7]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto chooserFlags = juce::FileBrowserComponent::openMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          | juce::FileBrowserComponent::canSelectFiles;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chooser-&gt;launchAsync (chooserFlags, [this] (const juce::FileChooser&amp; fc)     // [8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto file = fc.getResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (file != juce::File{})                                                // [9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                auto* reader = formatManager.createReaderFor (file);                 // [10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (reader != nullptr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    auto newSource = std::make_unique(reader, true); // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.setSource (newSource.get(), 0, nullptr, reader-&gt;sampleRate); // [12].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setEnabled (true); // [13] playButton.reset (newSource.get())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    readerSource.reset (newSource.release()); // [14].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[7]: Create the <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a> object with a short message and allow the user to select only <code>.wav</code> files.</li>
<li>[8]: Pop up the <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a> object.</li>
<li>[9]: If <code>もし</code> will succeed if the user actually selects a file (rather than cancelling)</li>
<li>[10]: The <a title="Searches through the known formats to try to create a suitable reader for this file." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/classAudioFormatManager.html/#a4eed7ecbb353d3d85154182de5057221">AudioFormatManager::createReaderFor()</a> function is used attempt to create a reader for this particular file. This will return the <code>ヌルプトル</code> value if it fails (for example the file is not an audio format the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object can handle).</li>
<li>[11]: We create a new <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object using the reader we just created. The second argument <code>真の</code> indicates that we want the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object to manage the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object and delete it when it is no longer needed. We store the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object in a temporary std::unique_ptr object to avoid deleting a previously allocated <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> prematurely on subsequent commands to open a file.</li>
<li>[12]: The <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object is connected to our <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object that is being used in our <code>getNextAudioBlock()</code> function. In case the sample rate of the file doesn&#x27;t match the hardware sample rate we pass this in as the fourth argument, which we obtain from the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object. See <a href="#tutorial_playing_sound_files_notes">備考</a> for more information on the second and third arguments. The <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> source will handle any sample rate conversion that is necessary.</li>
<li>[13]: The <strong>プレー</strong> button is enabled so that the user can click on it.</li>
<li>[14]: Since the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> should now be using our newly allocated <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object we can safely store the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object in our <code>リーダーソース</code> member. (As mentioned in <a href="#tutorial_playing_sound_files_processing_the_audio">オーディオの処理</a> above.) To do this we must transfer ownership from the local <code>ニューソース</code> variable by using std::unique_ptr::release().</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>Storing the newly allocated <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object in a temporary std::unique_ptr object has the added benefit of being exception-safe. An exception could be thrown during the function call <a title="Sets the reader that is being used as the input source." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/classAudioTransportSource.html/#a20a6a91c4505e77207cadef7ddc4dc5c">AudioTransportSource::setSource()</a>, in which case the std::unique_ptr object will delete the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object that is no longer needed. If a raw pointer had been used at this point to store <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object then there could be a memory leak since the pointer would be left dangling if the exception is thrown.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="playing-and-stopping-the-file">Playing and stopping the file<a href="#playing-and-stopping-the-file" class="hash-link" aria-label="Playing and stopping the file への直接リンク" title="Playing and stopping the file への直接リンク">​</a></h2>
<p>Since we have already set up the code to actually play the file, we need only call our <code>changeState()</code> function with the appropriate argument to play the file. When the <strong>プレー</strong> button is clicked, we do the following:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void playButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeState (Starting)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Stopping the file is similarly straightforward, when the the <strong>ストップ</strong> button is clicked:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void stopButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeState (停止)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Change the third (<code>ファイルパターン許可</code>) argument when creating the <a href="https://docs.juce.com/master/classFileChooser" target="_blank" rel="noopener noreferrer" title="Creates a dialog box to choose a file or directory to load or save.">ファイルチューザー</a> object to allow the application to load AIFF files too. The file patterns can be separated by a semicolon so this should be <code>&quot;*.wav;*.aif;*.aiff&quot;</code> to allow for the two common file extensions for this format.</p>
<h1>Adding pause functionality</h1>
<p>We will now walk through some steps to add a <em>ポーズ</em> functionality to the application. Here we will make the <strong>プレー</strong> button become a <strong>ポーズ</strong> button while the file is playing (instead of just disabling it). We will also make the <strong>ストップ</strong> button become a <strong>ゼロに戻す</strong> button while the sound file is paused.</p>
<p>First of all we need to add two states <em>一時停止</em> and <em>休止</em> to our <code>輸送状態</code> enum:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">列挙 TransportState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        停止中、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        開始、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        再生中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        一時停止、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        一時停止、</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        停止</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our <code>changeState()</code> function needs to handle the two new states and the code for the other states needs to be updated too:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void changeState (TransportState newState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (state != newState)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            state = newState；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            switch (state)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ケース Stopped：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setButtonText (&quot;Play&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setButtonText (&quot;Stop&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setEnabled (false)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.setPosition (0.0)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case Starting：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.start()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case Playing：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setButtonText (&quot;Pause&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setButtonText (&quot;Stop&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setEnabled（true）；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                case 一時停止：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.stop()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ケースPaused：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    playButton.setButtonText (&quot;再開&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stopButton.setButtonText (&quot;Return to Zero&quot;)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ケース停止：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    transportSource.stop()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ボタンを適切に有効・無効にし、それぞれの状態でボタンのテキストを正しく更新します。</p>
<p>Notice that we actually stop the transport when asked to pause in the <em>一時停止</em> state. In the <code>changeListenerCallback()</code> function, we need to change the logic to move to the correct state depending on whether a pause or stop request was made:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void changeListenerCallback (juce::ChangeBroadcaster* source) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (source == &amp;transportSource)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (transportSource.isPlaying())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                changeState (Playing)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else if ((state == Stopping) || (state == Playing))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                changeState (Stopped)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else if (一時停止 == 状態)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                changeState (Paused)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We need to change the code when the <strong>プレー</strong> button is clicked:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void playButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if ((状態 == 停止) || (状態 == 一時停止))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            changeState (Starting)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else if (状態 == 再生中)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            changeState (一時停止)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And when the <strong>ストップ</strong> button is clicked:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void stopButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (state == Paused)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            changeState (停止)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        さもなければ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            changeState (停止)；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>これでアプリケーションをビルドして実行できるはずだ。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>The source code for this modified version of the application can be found in the <code>サウンドファイル再生チュートリアル_02.h</code> file of the demo project.</p></div></div>
<p>Add a <a href="https://docs.juce.com/master/classLabel" target="_blank" rel="noopener noreferrer" title="A component that displays a text string, and can optionally become a text editor when clicked.">ラベル</a> object to the interface that displays the current time position of the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object. You can use the <a title="Returns the position that the next data block will be read from." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/classAudioTransportSource.html/#a1984ac3a6eafb12d5312c3eab5615810">AudioTransportSource::getCurrentPosition()</a> function to obtain this position. You will also need to make the <code>メインコンテンツコンポーネント</code> class inherit from the <a href="https://docs.juce.com/master/classTimer" target="_blank" rel="noopener noreferrer" title="Makes repeated callbacks to a virtual method at a specified time interval.">タイマー</a> class and perform periodic updates in your <code>timerCallback()</code> function to update the label. You could even use the <a href="https://docs.juce.com/master/classRelativeTime" target="_blank" rel="noopener noreferrer" title="A relative measure of time.">相対時間</a> class to convert the raw time in seconds to a more useful format in minutes, seconds, and milliseconds.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>The source code for this exercise can be found in the <code>サウンドファイル再生チュートリアル_03.h</code> file of the demo project.</p></div></div>
<h1>Summary</h1>
<p>このチュートリアルでは、サウンドファイルの読み込みと再生について紹介しました。特に、以下の事柄を取り上げました：</p>
<ul>
<li>Using the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> class to create <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> objects for common audio formats.</li>
<li>Using various <a href="https://docs.juce.com/master/classAudioSource" target="_blank" rel="noopener noreferrer" title="Base class for objects that can produce a continuous stream of audio.">オーディオソース</a> classes to create and connecting them together. In particular:<!-- -->
<ul>
<li>the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> class for reading and playing audio from <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> objects; and</li>
<li>the <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> class for controlling the playback of an <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object.</li>
</ul>
</li>
<li>また、オーディオファイルの再生状態を管理する一つの方法についても調べた。</li>
</ul>
<h1>Notes</h1>
<p>The second and third arguments to the <a title="Sets the reader that is being used as the input source." href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/classAudioTransportSource.html/#a20a6a91c4505e77207cadef7ddc4dc5c">AudioTransportSource::setSource()</a> function allow you to control look ahead buffering on a background thread. The second argument is the buffer size to use and the third argument is a pointer to a <a href="https://docs.juce.com/master/classTimeSliceThread" target="_blank" rel="noopener noreferrer" title="A thread that keeps a list of clients, and calls each one in turn, giving them all a chance to run so...">タイムスライススレッド</a> object, which is used for the background processing. In this example we use a zero buffer size and a <code>ヌルプトル</code> value for the thread object, which is the default.</p>
<h1>See also</h1>
<ul>
<li><a href="/juce-tutorial-ja/audio/tutorial_listeners_and_broadcasters/">チュートリアルリスナーとブロードキャスター</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_simple_synth_noise/">チュートリアルホワイトノイズ・ジェネレーターを作る</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_sine_synth/">チュートリアルサイン波シンセサイザーを作る</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_audio_thumbnail/">チュートリアルオーディオ波形を描く</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/audio/tutorial_playing_sound_files.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/juce-tutorial-ja/category/audio/"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Audio</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/juce-tutorial-ja/audio/tutorial_processing_audio_input/"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">オーディオ入力の処理</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-audiosource-class" class="table-of-contents__link toc-highlight">The AudioSource class</a></li><li><a href="#audio-formats" class="table-of-contents__link toc-highlight">Audio formats</a></li><li><a href="#initialising-the-interface" class="table-of-contents__link toc-highlight">Initialising the interface</a></li><li><a href="#other-initialisation" class="table-of-contents__link toc-highlight">Other initialisation</a></li><li><a href="#responding-to-audiotransportsource-changes" class="table-of-contents__link toc-highlight">Responding to AudioTransportSource changes</a></li><li><a href="#changing-states" class="table-of-contents__link toc-highlight">Changing states</a></li><li><a href="#processing-the-audio" class="table-of-contents__link toc-highlight">Processing the audio</a></li><li><a href="#opening-a-file" class="table-of-contents__link toc-highlight">Opening a file</a></li><li><a href="#playing-and-stopping-the-file" class="table-of-contents__link toc-highlight">Playing and stopping the file</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">JUCE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juce.com/learn/tutorials/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juce.com/learn/documentation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.juce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="footer__link-item">repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/juce-framework/JUCE" target="_blank" rel="noopener noreferrer" class="footer__link-item">JUCE GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Raw Material Software Limited. translation: mimoz</div></div></div></footer></div>
</body>
</html>