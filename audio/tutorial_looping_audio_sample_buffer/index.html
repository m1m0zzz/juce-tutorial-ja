<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-audio/tutorial_looping_audio_sample_buffer" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">AudioSampleBufferクラスを使ったオーディオのループ再生 | JUCE日本語版チュートリアル</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://m1m0zzz.github.io/juce-tutorial-ja/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AudioSampleBufferクラスを使ったオーディオのループ再生 | JUCE日本語版チュートリアル"><meta data-rh="true" name="description" content="このチュートリアルでは、AudioSampleBuffer オブジェクトに格納されたオーディオを再生し、ループさせる方法を説明します。これは、録音されたオーディオデータを操作するサンプリングアプリケーションの基礎として役立ちます。"><meta data-rh="true" property="og:description" content="このチュートリアルでは、AudioSampleBuffer オブジェクトに格納されたオーディオを再生し、ループさせる方法を説明します。これは、録音されたオーディオデータを操作するサンプリングアプリケーションの基礎として役立ちます。"><link data-rh="true" rel="icon" href="/juce-tutorial-ja/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://m1m0zzz.github.io/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/" hreflang="x-default"><link rel="stylesheet" href="/juce-tutorial-ja/assets/css/styles.ee4ac6b4.css">
<script src="/juce-tutorial-ja/assets/js/runtime~main.2c1dcd22.js" defer="defer"></script>
<script src="/juce-tutorial-ja/assets/js/main.cf826c6e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/juce-tutorial-ja/"><div class="navbar__logo"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/juce-tutorial-ja/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JUCE日本語版チュートリアル</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/juce-tutorial-ja/">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードを切り替える(現在はライトモード)" aria-label="ダークモードを切り替える(現在はライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/juce-tutorial-ja/">About / このサイトについて</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/juce-tutorial-ja/category/audio/">Audio</a><button aria-label="Collapse sidebar category &#x27;Audio&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">オーディオプレーヤーの構築</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_processing_audio_input/">オーディオ入力の処理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/">AudioSampleBufferクラスを使ったオーディオのループ再生</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">AudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_audio_thumbnail/">オーディオ波形を描く</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/juce-tutorial-ja/audio/tutorial_audio_device_manager/">AudioDeviceManagerクラス</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/synth/">Synth</a><button aria-label="Expand sidebar category &#x27;Synth&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/midi/">MIDI</a><button aria-label="Expand sidebar category &#x27;MIDI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/plugins/">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/dsp/">DSP</a><button aria-label="Expand sidebar category &#x27;DSP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/graphics/">Graphics</a><button aria-label="Expand sidebar category &#x27;Graphics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/interface-design/">Interface Design</a><button aria-label="Expand sidebar category &#x27;Interface Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/mobile/">Mobile</a><button aria-label="Expand sidebar category &#x27;Mobile&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/juce-tutorial-ja/category/utility-classes/">Utility Classes</a><button aria-label="Expand sidebar category &#x27;Utility Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/juce-tutorial-ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/juce-tutorial-ja/category/audio/"><span itemprop="name">Audio</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">AudioSampleBufferクラスを使ったオーディオのループ再生</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><h1>チュートリアルAudioSampleBufferクラスを使ったオーディオのループ再生</h1>
<p>このチュートリアルでは、AudioSampleBuffer オブジェクトに格納されたオーディオを再生し、ループさせる方法を説明します。これは、録音されたオーディオデータを操作するサンプリングアプリケーションの基礎として役立ちます。</p>
<p>レベル Intermediate</p>
<p>プラットフォーム Windows, macOS, Linux</p>
<p>クラス： <a href="https://docs.juce.com/master/classAudioBuffer" target="_blank" rel="noopener noreferrer" title="A multi-channel buffer containing floating point audio samples.">オーディオバッファ</a>, <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a>, <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a></p>
<h1>Getting started</h1>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注記</div><div class="admonitionContent_BuS1"><p>This tutorial assumes you have already completed <a href="/juce-tutorial-ja/audio/tutorial_simple_synth_noise/">チュートリアルホワイトノイズ・ジェネレーターを作る</a> and <a href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">チュートリアルオーディオプレーヤーの構築</a>. If not, you should look at these first.</p></div></div>
<p>Download the demo project for this tutorial here: <a href="/juce-tutorial-ja/tutorials/PIPs/LoopingAudioSampleBufferTutorial.zip/">ピップ</a> | <a href="/juce-tutorial-ja/tutorials/ZIPs/LoopingAudioSampleBufferTutorial.zip/">ジップ</a>. Unzip the project and open the first header file in the Projucer.</p>
<p>If you need help with this step, see <a href="/juce-tutorial-ja/audio/tutorial_new_projucer_project/">チュートリアルProjucerパート1：Projucerを始める</a>.</p>
<h1>The demo project</h1>
<p>The demo project for this tutorial allows the user to open a sound file, read the whole file into an <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object, and play it in a loop. In <a href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">チュートリアルオーディオプレーヤーの構築</a> we played sound files using an <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object connected to an <a href="https://docs.juce.com/master/classAudioTransportSource" target="_blank" rel="noopener noreferrer" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">オーディオ・トランスポート・ソース</a> object to play the sound. Looping is possible using this method by enabling enabling the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object&#x27;s looping flag — using the <a title="Toggles loop-mode." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioFormatReaderSource.html/#a15d8af211ce8cfcbc0c4aaac143b303e">AudioFormatReaderSource::setLooping()</a> function.</p>
<p>All of the code relevant to the discussion in this tutorial is in the <code>メインコンテンツコンポーネント</code> class of the demo project.</p>
<h1>Loading sample data into memory</h1>
<p>There are many cases where it is probably better to use the built-in classes for sound file playback. There may be occasions where you need to do this yourself and this tutorial gives an introduction to some of the techniques. Sampler applications commonly load the sound file data into memory like this, especially when the sounds are relatively short (see the <a href="https://docs.juce.com/master/classSamplerSound" target="_blank" rel="noopener noreferrer" title="A subclass of SynthesiserSound that represents a sampled audio clip.">サンプラーサウンド</a> class for an example). Synthesising sounds can also be achieved by storing a wavetable in an <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object and looping it at an appropriate rate to produce the required musical pitch. This is explored in <a href="/juce-tutorial-ja/audio/tutorial_wavetable_synth/">チュートリアルウェーブテーブルシンセシス</a>.</p>
<p>This tutorial also highlights some of the potential multi-threading issues you may encounter when combining access to files, and audio processing on the audio thread. Some of these problems seem simple on the surface but often require carefully applied techniques in order to avoid crashes and audio glitches. These techniques are explored further in <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">チュートリアルAudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-the-length-limit">Why the length limit?<a href="#why-the-length-limit" class="hash-link" aria-label="Why the length limit? への直接リンク" title="Why the length limit? への直接リンク">​</a></h2>
<p>デモ・プロジェクトでは、読み込めるサウンドファイルの長さを2秒未満に制限しています。この制限はかなり恣意的ですが、これには大まかに2つの理由があります：</p>
<ol>
<li>If the whole file is very large then your computer might run out of physical memory. In a real application, of course, you would be able to use a much higher limit. A 2-second stereo audio file, at a sample rate of 44.1kHz, loaded into an <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object, will only occupy 705,600 bytes of memory. (See notes)</li>
<li>かなり短いファイルであっても、読み込みには些細な時間しかかからない。</li>
</ol>
<p>ポイント1について：コンピュータが持っている物理メモリの量を超えると、仮想メモリ（つまりハードドライブなどの二次記憶装置）を使い始める可能性がある。これでは  、そもそもデータをメモリにロードする意味がなくなってしまう！もちろん、メモリが不足すれば、デバイスによっては動作が失敗することもある。</p>
<p>Regarding point 2: we keep the example simple by loading the audio data directly in, after the <a title="Shows a dialog box to choose a file to open." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classFileChooser.html/#a546ef74bcd139b67a90e4459cd591d21">FileChooser::browseForFileToOpen()</a> function has returned the file selected by the user. This means that the <em>メッセージスレッド</em> will be blocked until all of the audio has been read in from disk into the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object. Even with short sounds we should really do this on a background thread to keep the user interface as responsive as possible for the user. For long sounds the delay and unresponsiveness will be very noticeable. Adding another (background) thread would add to the complexity of this example. See <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">チュートリアルAudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a> for example of how to load files on a background thread in this way.</p>
<p>シンプルにするために、デモ・プロジェクトでは長いファイルをロードしようとしてもエラーは報告されない。このようなエラー報告を追加することは、追加の練習としてあなたに残されています。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reading-the-sound-file">Reading the sound file<a href="#reading-the-sound-file" class="hash-link" aria-label="Reading the sound file への直接リンク" title="Reading the sound file への直接リンク">​</a></h2>
<p>When the user clicks the <strong>オープン...</strong> button they are presented with a file chooser. The whole file is then read into an <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> member <code>ファイルバッファ</code> in our <code>メインコンテンツコンポーネント</code> class.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    void openButtonClicked()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shutdownAudio();                                                                            // [1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chooser = std::make_unique (&quot;Select a Wave file shorter than 2 seconds to play...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                       juce::File{},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                       &quot;*.wav&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto chooserFlags = juce::FileBrowserComponent::openMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          | juce::FileBrowserComponent::canSelectFiles;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        chooser-&gt;launchAsync (chooserFlags, [this] (const juce::FileChooser&amp; fc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto file = fc.getResult();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (file == juce::File{})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            std::unique_ptrreader (formatManager.createReaderFor (file)); // [2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (reader.get() != nullptr)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                auto duration = (float) reader-&gt;lengthInSamples / reader-&gt;sampleRate; // [3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (duration &lt; 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fileBuffer.setSize ((int) reader-&gt;numChannels, (int) reader-&gt;lengthInSamples); // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    reader-&gt;read (&amp;fileBuffer, // [5]); // [4].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  0, // [5.1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  (int) reader-&gt;lengthInSamples, // [5.2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  0, // [5.3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  true, // [5.4］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  true); // [5.5］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    position = 0; // 【6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    setAudioChannels (0, (int) reader-&gt;numChannels); // [7].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                その他</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // ファイルが2秒以上というエラーを処理する。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[1]: Notice that we shut down the audio system for the <a href="https://docs.juce.com/master/classAudioAppComponent" target="_blank" rel="noopener noreferrer" title="A base class for writing audio apps that stream from the audio i/o devices.">オーディオコンポーネント</a> object each time we open a new file. This is to avoid some of the multithreading issues hinted at already. Once the audio system is shut down, there is no danger that our <code>getNextAudioBlock()</code> function will be called on the <em>オーディオスレッド</em> while we are still within the call to the <a title="You can assign a lambda to this callback object to have it called when the button is clicked." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classButton.html/#a30b76ab312dc7f66e67596ae20540ec2">ボタン::onClick</a> lambda function (which will have called this <code>openButtonClicked()</code> function from the <em>メッセージスレッド</em>).</li>
<li>[2]: Here we create the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォ  ーマットリーダー</a> object using the <a href="https://docs.juce.com/master/classAudioFormatManager" target="_blank" rel="noopener noreferrer" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">オーディオフォーマットマネージャー</a> object. Notice that we store this in a std::unique_ptr object as we need to manage this object ourselves. (In <a href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">チュートリアルオーディオプレーヤーの構築</a> we pass the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object to the <a href="https://docs.juce.com/master/classAudioFormatReaderSource" target="_blank" rel="noopener noreferrer" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object to manage for for us.) This operation may fail to create the reader object, therefore we have to check that the <code>読者</code> pointer is not a <code>ヌルプトル</code> value on the next line.</li>
<li>[3]: This is where we calculate the duration of the sound file by dividing the length of the file in samples by its sample rate. We check that this is less that 2 seconds on the next line.</li>
<li>[4]: Here we resize the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object by calling the <a title="Changes the buffer&#x27;s size or number of channels." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioBuffer.html/#a4434de94aa03d7db6d7ef06977ddf0ac">AudioSampleBuffer::setSize()</a> function using the number of channels and length from the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object.</li>
<li>[5]: This reads the audio data from the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object into our <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> <code>ファイルバッファ</code> member using the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioFormatReader.html/#ad180e2b06c2a10c0ca399c3231b155c0">AudioFormatReader::read()</a> function. The arguments are:<!-- -->
<ul>
<li>[5.1]: The destination start sample in the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object where the data will start to be written.</li>
<li>[5.2]: The number of samples to read.</li>
<li>[5.3]: The start samples in the <a href="https://docs.juce.com/master/classAudioFormatReader" target="_blank" rel="noopener noreferrer" title="Reads samples from an audio file stream.">オーディオフォーマットリーダー</a> object where reading will start.</li>
<li>[5.4]: For stereo (or other two-channel) files this flag indicates whether to read the left channel.</li>
<li>[5.5]: For stereo files this flag indicates whether to read the right channel.</li>
</ul>
</li>
<li>[6]: We need to store the most recent read position within our buffer as we play it. This resets our <code>位置</code> member to zero.</li>
<li>[7]: This starts the audio system back up again. Here we have an opportunity to use the number of channels in the sound file to try and configure our audio device with the same number of channels.</li>
</ul>
<h1>Processing the audio</h1>
<p>In the <code>getNextAudioBlock()</code> function the appropriate number of samples is read from our <code>ファイルバッファ</code> <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> member and written out the the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object in the <a href="https://docs.juce.com/master/structAudioSourceChannelInfo" target="_blank" rel="noopener noreferrer" title="Used by AudioSource::getNextAudioBlock().">オーディオソースチャンネル情報</a> struct.</p>
<p>While reading the audio data from the file we keep track of the current read position using the <code>位置</code> member (being careful to update it after all the channels of the audio have been processed for the specified block of samples):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void getNextAudioBlock (const juce::AudioSourceChannelInfo&amp; bufferToFill) override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto numInputChannels = fileBuffer.getNumChannels()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto numOutputChannels = bufferToFill.buffer-&gt;getNumChannels()；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto outputSamplesRemaining = bufferToFill.numSamples; // [8].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        auto outputSamplesOffset = bufferToFill.startSample; // [9].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (outputSamplesRemaining &gt; 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto bufferSamplesRemaining = fileBuffer.getNumSamples() - position; // [10].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            auto samplesThisTime = juce::jmin (outputSamplesRemaining, bufferSamplesRemaining); // [11].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for (auto channel = 0; channel &lt; numOutputChannels; ++channel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                bufferToFill.buffer-&gt;copyFrom (channel, // [12])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               outputSamplesOffset, // [12.1].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               fileBuffer, // [12.2].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               channel % numInputChannels, // [12.3].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               位置, // [12.4］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                               samplesThisTime); // [12.5].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            outputSamplesRemaining -= samplesThisTime; // [13] }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            outputSamplesOffset += samplesThisTime; // 【14】.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            位置 += samplesThisTime; // 【15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (position == fileBuffer.getNumSamples())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                position = 0; // [16］</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>[8]: The <code>出力サンプル数</code> variable stores the total number of samples that the <code>getNextAudioBlock()</code> function needs to output taking a copy from the <a href="https://docs.juce.com/master/structAudioSourceChannelInfo" target="_blank" rel="noopener noreferrer" title="Used by AudioSource::getNextAudioBlock().">オーディオソースチャンネル情報</a> struct. We use this to check if we need to exit the <code>while()</code> loop that starts on the next line.</li>
<li>[9]: We also take a copy of the <a title="The first sample in the buffer from which the callback is expected to write data." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/structAudioSourceChannelInfo.html/#a42e88ccc05d4893015e2415785390259">AudioSourceChannelInfo::startSample</a> value to use as our offset within the destination buffer.</li>
<li>[10]: Here we calculate how many samples are left in the buffer from which we are reading.</li>
<li>[11]: For this pass of the <code>while()</code> loop we need to output the smaller of the remaining samples for this call to the <code>getNextAudioBlock()</code> function and the remaining samples in the buffer — using the <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__core-maths.html/#gae8394cdf11279b266f4aa741758c1669">jmin()</a> function. If this is less than the total number of samples for this call to the <code>getNextAudioBlock()</code> function, then there will be one more pass of the <code>while()</code> loop, before exiting.</li>
<li>[12]: For each output channel we use the <a title="Copies samples from another buffer to this one." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioBuffer.html/#a9ec751bfa23564c011bf3940ca17b743">AudioSampleBuffer::copyFrom()</a> function to copy sections of data from one channel of one buffer to a channel of another buffer. Here we specify the destination channel index.<!-- -->
<ul>
<li>[12.1]: This is the sample offset within the destination buffer.</li>
<li>[12.2]: This is the source <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object from which to copy.</li>
<li>[12.3]: This is the channel index of the source buffer. In case the source buffer has fewer channels than our destination buffer we use this modulo calculation. For example, a mono source buffer will mean that this always results in zero, copying the same data to each of the output channels.</li>
<li>[12.4]: This is the position to start reading from in the source buffer.</li>
<li>[12.5]: The number of samples to read that we calculated earlier.</li>
</ul>
</li>
<li>[13]: Now deduct the number of samples we just processed from the <code>出力サンプル数</code> variable.</li>
<li>[14]: Increment the <code>出力サンプルオフセット</code> by the same amount in case we have another pass of the <code>while()</code> loop.</li>
<li>[15]: Offset our <code>位置</code> member by the same amount too.</li>
<li>[16]: Finally, check if the <code>位置</code> member reached the end of the <code>ファイルバッファ</code> <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object and reset it to zero to form the loop if necessary.</li>
</ul>
<p>Add a level slider to control the audio playback level of the audio file (see <a href="/juce-tutorial-ja/audio/tutorial_synth_level_control/">チュートリアルオーディオレベルのコントロール</a>). You can use the <a title="Applies a gain multiple to a region of one channel." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioBuffer.html/#a9ffc61d339e455d4bddc7cf055a63ee3">AudioSampleBuffer::applyGain()</a> or <a title="Applies a range of gains to a region of a channel." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioBuffer.html/#ab0542e5b626b36087f0054e795695682">AudioSampleBuffer::applyGainRamp()</a> functions to apply the gain to the data in an <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/group__juce__audio__basics-buffers.html/#gab339ebab0d3b10c91c0d47c8fd2e50d2">オーディオサンプルバッファ</a> object.</p>
<h1>Multithreading issues</h1>
<p>As discussed previously, this tutorial avoids multithreading issues by shutting down and restarting audio each time the user clicks the <strong>オープン...</strong> button. But what if we didn&#x27;t do this — what could happen? There many things that could go wrong, all of which have to do with the fact that both the <code>getNextAudioBlock()</code> and <code>openButtonClicked()</code> functions could be running at the same time in different threads. Here are some examples:</p>
<ul>
<li>Let&#x27;s say that the application is already playing an audio file and the user clicks the <strong>オープン...</strong> button and chooses a new file. Suppose the audio thread interrupts this function between [4] and [5]. The buffer has been resized but the data hasn&#x27;t been written to the buffer. The buffer may still contain audio data from the previous file but it depends whether the memory for the buffer needed to be moved when it was resized. In any case we&#x27;ll probably get a glitch.</li>
<li>It&#x27;s possible that the <code>getNextAudioBlock()</code> function could be interrupted by code in the <code>openButtonClicked()</code> function. Suppose this happens just after [11] and that the <code>openButtonClicked()</code> function has just reached [4]. The buffer might be resized to be shorter than it was but we already calculated our starting point a few lines earlier. This could lead to a memory access error and the application could crash.</li>
<li>The <code>getNextAudioBlock()</code> function could be interrupted while calling the <a title="Copies samples from another buffer to this one." href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer/classAudioBuffer.html/#a9ec751bfa23564c011bf3940ca17b743">AudioSampleBuffer::copyFrom()</a> function. Again depending in the implementation of this we could end up accessing memory that we shouldn&#x27;t.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>There are a number of other things that could go wrong. You may be familiar with using a <a href="https://en.wikipedia.org/wiki/Critical_section" target="_blank" rel="noopener noreferrer">クリティカルセクション</a> to synchronise memory access between threads. This is just one possible solution but care should be taken using a <a href="https://en.wikipedia.org/wiki/Critical_section" target="_blank" rel="noopener noreferrer">クリティカルセクション</a> in audio code as it can lead to <a href="https://en.wikipedia.org/wiki/Priority_inversion" target="_blank" rel="noopener noreferrer">優先順位反転</a> which could cause audio drop outs. We look at a solution that avoids critical sections in <a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">チュートリアルAudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a>.</p></div></div>
<h1>Notes</h1>
<p>44.1kHzの2秒間のステレオ・オーディオは、AudioSampleBufferオブジェクトに705,600バイトを使用します：</p>
<ul>
<li>2チャンネル</li>
<li>2秒</li>
<li>44,100  サンプル</li>
<li>4 bytes-per-sample (using the <code>フロート</code> type)</li>
</ul>
<p>Multiply these together and the result is: 2 x 2 x 2 x 44100 x 4 = 705600</p>
<h1>Summary</h1>
<p>このチュートリアルでは、次のことを紹介した：</p>
<ul>
<li>サウンドファイルからオーディオデータを直接読み込む方法。</li>
<li>データを再生用のバッファにコピーする方法。</li>
<li>シンプルなサンプラー・アプリケーションや、ウェーブテーブル・バッファを使ったシンセサイザーの基礎となる。</li>
<li>オーディオアプリケーションに存在する潜在的なマルチスレッド問題のいくつか。</li>
</ul>
<h1>See also</h1>
<ul>
<li><a href="/juce-tutorial-ja/audio/tutorial_playing_sound_files/">チュートリアルオーディオプレーヤーの構築</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_processing_audio_input/">チュートリアルオーディオ入力を処理する</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_audio_thumbnail/">チュートリアルオーディオ波形を描く</a></li>
<li><a href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/">チュートリアルAudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/m1m0zzz/juce-tutorial-ja/tree/main/docs/audio/tutorial_looping_audio_sample_buffer.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/juce-tutorial-ja/audio/tutorial_processing_audio_input/"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">オーディオ入力の処理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/juce-tutorial-ja/audio/tutorial_looping_audio_sample_buffer_advanced/"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">AudioSampleBufferクラスを使ったオーディオのループ（上級者向け）</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-the-length-limit" class="table-of-contents__link toc-highlight">Why the length limit?</a></li><li><a href="#reading-the-sound-file" class="table-of-contents__link toc-highlight">Reading the sound file</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Tutorial</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/juce-tutorial-ja/category/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">JUCE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://juce.com/learn/tutorials/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://juce.com/learn/documentation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.juce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/m1m0zzz/juce-tutorial-ja" target="_blank" rel="noopener noreferrer" class="footer__link-item">repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/juce-framework/JUCE" target="_blank" rel="noopener noreferrer" class="footer__link-item">JUCE GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Raw Material Software Limited. translation: mimoz</div></div></div></footer></div>
</body>
</html>